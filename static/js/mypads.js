(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function(){var i=require("./frontend/js/configuration.js"),n=require("./frontend/js/route.js");i.init(n.init)}).call(this);
},{"./frontend/js/configuration.js":3,"./frontend/js/route.js":39}],2:[function(require,module,exports){
module.exports=function(){var n=require("mithril"),t={};return t.admToken=function(){return localStorage.getItem("admToken")},t.isAdmin=function(){return!!t.admToken()},t.userInfo=n.prop(),t.token=function(){return localStorage.getItem("token")},t.isAuthenticated=function(){return!!t.token()},t.fn={},t.fn.xhrConfig=function(n){n.setRequestHeader("Authorization","JWT "+t.token())},t}.call(this);
},{"mithril":49}],3:[function(require,module,exports){
module.exports=function(){var n=require("mithril"),e=require("lodash"),t=require("./auth.js"),o={};o.URLS={RAWBASE:window.location.pathname.replace(new RegExp("index.html"),"")},o.URLS.BASE=o.URLS.RAWBASE+"api",o.URLS.CONF=o.URLS.BASE+"/configuration",o.URLS.AUTH=o.URLS.BASE+"/auth",o.URLS.LOGIN=o.URLS.AUTH+"/login",o.URLS.LOGOUT=o.URLS.AUTH+"/logout",o.URLS.CHECK=o.URLS.AUTH+"/check",o.URLS.USER=o.URLS.BASE+"/user",o.URLS.USERMARK=o.URLS.USER+"mark",o.URLS.GROUP=o.URLS.BASE+"/group",o.URLS.PAD=o.URLS.BASE+"/pad",o.URLS.USERLIST=o.URLS.BASE+"/userlist",o.URLS.PASSRECOVER=o.URLS.BASE+"/passrecover",o.URLS.ACCOUNT_CONFIRMATION=o.URLS.BASE+"/accountconfirm",o.URLS.CACHECHECK=o.URLS.BASE+"/cache/check",o.SERVER=n.prop();return o.USERLANG="en",o.LANG=require("../../static/l10n/en.json"),o.updateLang=function(e){n.request({method:"GET",url:o.URLS.RAWBASE+"l10n/"+e+".json"}).then(function(n){o.USERLANG=e,o.LANG=n},function(n){console.log("updatel:"+n),o.USERLANG="en";var e=o.LANG.BACKEND.CONFIGURATION.LANG_PROBLEM+" ("+n+")";(0,require("./widgets/notification.js").error)({body:e})})},o.unauthUrl=function(){var n="";return function(e){return e&&(n=window.location.toString()),n}}(),o.init=function(S){n.request({method:"GET",url:o.URLS.CONF,data:t.isAuthenticated()?{auth_token:t.token()}:void 0}).then(function(n){o.SERVER=n.value,!n.auth&&t.isAuthenticated()&&localStorage.removeItem("token"),t.userInfo(n.user);var r=window.navigator.userLanguage||window.navigator.language;r=e.find(e.keys(o.SERVER.languages),function(n){return e.startsWith(r,n)}),r&&"en"!==r&&o.updateLang(r),S()},function(n){console.log("confinit:"+n);var e=o.LANG.BACKEND.CONFIGURATION.CANTGET+" ("+n+")";(0,require("./widgets/notification.js").error)({body:e})})},o}.call(this);
},{"../../static/l10n/en.json":50,"./auth.js":2,"./widgets/notification.js":40,"lodash":48,"mithril":49}],4:[function(require,module,exports){
module.exports=function(){var e={},n=new RegExp("<","g"),r=new RegExp(">","g");return e.cleanup=function(e){return e.replace(n,"&lt;").replace(r,"&gt;")},e}.call(this);
},{}],5:[function(require,module,exports){
module.exports=function(){var e=(require("mithril"),require("js-cookie")),t=require("../configuration.js"),a={};return a.autoExpand=function(e,t){t||a.wantExpandedPad()&&a.expandIframe()},a.wantExpandedPad=function(){var t=e.get("wantExpandedPad");return"string"==typeof t&&"true"===t},a.isExpanded=function(){return document.querySelector("a.expand-toggle").className.indexOf("expanded")>-1},a.expandIframe=function(){var a=document.querySelector("section.pad iframe"),n=document.querySelector("a.expand-toggle i"),r=document.querySelector("a.expand-toggle");a&&(a.style.height="80vh"),n&&(n.classList.remove("glyphicon-resize-full"),n.classList.add("glyphicon-resize-small")),r&&(r.classList.add("expanded"),r.title=t.LANG.GROUP.PAD.REDUCE),e.set("wantExpandedPad","true",{expires:365,path:t.URLS.RAWBASE})},a.reduceIframe=function(a){void 0===a&&(a=!0);var n=document.querySelector("section.pad iframe"),r=document.querySelector("a.expand-toggle i"),d=document.querySelector("a.expand-toggle");n&&(n.style.height=null),r&&(r.classList.remove("glyphicon-resize-small"),r.classList.add("glyphicon-resize-full")),d&&(d.classList.remove("expanded"),d.title=t.LANG.GROUP.PAD.EXPAND),a&&e.set("wantExpandedPad","false",{expires:365,path:t.URLS.RAWBASE})},a}.call(this);
},{"../configuration.js":3,"js-cookie":47,"mithril":49}],6:[function(require,module,exports){
module.exports=function(){var i=require("mithril"),t={};return t.icon=function(t,n,a,l){var e="glyphicon mp-tooltip glyphicon-";e+=t.valid[n]()?"info-sign":"exclamation-sign";var o=t.valid[n]()?a:l;return i("i",{class:e,"data-msg":o})},t.field=function(n,a,l,e){return{label:i("label",{for:a},[l,e]),input:i("input.form-control",{name:a,value:n.data[a]()||"",oninput:t.handleField.bind(null,n)}),icon:e}},t.initFields=function(t,n){t.data={},t.valid={},n.forEach(function(n){t.data[n]=i.prop(),t.valid[n]=i.prop(!0)})},t.handleField=function(i,t,n){n||(n=t,t=void 0);var a=n.target.getAttribute("name");i.data[a](n.target.value),i.valid[a](function(){return t?n.target.checkValidity()&&t(i,n):n.target.checkValidity()}())},t.focusOnInit=function(i,t){t||i.focus()},t}.call(this);
},{"mithril":49}],7:[function(require,module,exports){
module.exports=function(){var e=require("mithril"),o=require("../configuration.js"),n={};n.checkLoop=function(r,i){i||(n.inFrame(r,i),e.request({method:"GET",url:o.URLS.CACHECHECK}).then(function(e){if(e.userCacheReady){var o=document.getElementById("hide-when-ready").classList,r=document.querySelectorAll(".show-when-ready");return o.add("hidden"),[].forEach.call(r,function(e){e.classList.remove("hidden")}),"user cache ready"}setTimeout(function(){return n.checkLoop()},500)},function(e){console.log("user cache check loop:"+e);var o=config.LANG.BACKEND.CONFIGURATION.LANG_PROBLEM+" ("+e+")";(0,require("../widgets/notification.js").error)({body:o}),e&&setTimeout(function(){return n.checkLoop()},500)}))};var r=new RegExp("/mypads");return n.inFrame=function(e,o){if(!o){var n=location.href;window.displaymode=n,!window.parent.location.href.match(r)||void 0!==window.parent.displaymode&&window.parent.displaymode===n||window.parent.location.reload()}},n}.call(this);
},{"../configuration.js":3,"../widgets/notification.js":40,"mithril":49}],8:[function(require,module,exports){
module.exports=function(){var r=(require("mithril"),require("../configuration.js")),e=require("js-cookie"),u={};return currentValues={padByField:"ctime",padAsc:!0,groupByField:"ctime",groupAsc:!0},u.init=function(){var r=e.get("sortingPreferences");if(r)try{var u=JSON.parse(r);for(var n in u)currentValues.hasOwnProperty(n)&&(currentValues[n]=u[n])}catch(r){}},u.updateValues=function(u){for(var n in u)currentValues.hasOwnProperty(n)&&(currentValues[n]=u[n]);e.set("sortingPreferences",JSON.stringify(currentValues),{expires:365,path:r.URLS.RAWBASE})},u.padByField=function(){return currentValues.padByField},u.padAsc=function(){return currentValues.padAsc},u.groupByField=function(){return currentValues.groupByField},u.groupAsc=function(){return currentValues.groupAsc},u.init(),u}.call(this);
},{"../configuration.js":3,"js-cookie":47,"mithril":49}],9:[function(require,module,exports){
module.exports=function(){"use strict";var r=require("mithril"),e=require("lodash"),t=require("../configuration.js"),u=require("../auth.js"),a=require("../widgets/notification.js"),s=require("js-base64").Base64.encode,n={};return n.init=function(){e.assign(n,{groups:r.prop({}),pads:r.prop({}),users:r.prop([]),admins:r.prop([]),tags:r.prop([]),tmp:r.prop({groups:r.prop({}),pads:r.prop({})})})},n.init(),n.fetch=function(s){var o=function(r){a.error({body:e.result(t.LANG,r.error)}),s&&s(r)},i=u.isAuthenticated(),p=i?{auth_token:u.token()}:void 0;r.request({url:t.URLS.GROUP,method:"GET",data:p}).then(function(a){n.groups(a.value.groups),n.pads(a.value.pads);var i=u.userInfo();a.value.users[i._id]=i,n.users(a.value.users);var d=e(a.value.groups).values().pluck("tags").flatten().union().value();n.tags(d),r.request({url:t.URLS.USERLIST,method:"GET",data:p}).then(function(r){i.userlists=r.value,u.userInfo(i),s&&s(null,r)},o)},o)},n.fetchObject=function(o,i,p){var d=function(r){a.error({body:e.result(t.LANG,r.error)}),p&&p(r)},l=function(e){var a={url:t.URLS.PAD+"/"+o.pad+"?",method:"GET"};i&&(a.url+="&password="+s(i)),u.isAuthenticated()&&(a.url+="&auth_token="+u.token()),r.request(a).then(function(r){var e=n.tmp(),t=e.pads();t[r.key]=r.value,e.pads(t),n.tmp(e),p&&p(null,r)},function(r){if("BACKEND.ERROR.TYPE.PASSWORD_MISSING"===r.error){var t={_id:o.pad,visibility:"private"},u=n.tmp(),a=u.pads();return a[o.pad]=t,u.pads(a),n.tmp(u),p(null,{key:o.pad,value:t})}return"BACKEND.ERROR.PERMISSION.UNAUTHORIZED"===r.error||"BACKEND.ERROR.CONFIGURATION.KEY_NOT_FOUND"===r.error?d(r):e?p(null,e):void d(r)})};!function(){var a={url:t.URLS.GROUP+"/"+o.group+"?",method:"GET"};i&&(a.url+="&password="+s(i)),u.isAuthenticated()&&(a.url+="&auth_token="+u.token()),r.request(a).then(function(r){var t=n.tmp(),u=t.groups();u[r.key]=r.value,t.groups(u),t.pads(e.merge(t.pads(),r.pads)),n.tmp(t),!o.pad||e.includes(r.pads,o.pad)?p&&p(null,r):l(r)},function(r){if(o.pad)return l();d(r)})}()},n}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../widgets/notification.js":40,"js-base64":46,"lodash":48,"mithril":49}],10:[function(require,module,exports){
module.exports=function(){var r=require("mithril"),e=require("lodash"),o=require("../configuration.js"),t=require("../widgets/notification.js"),i={};return i.controller=function(){var i=r.route.param("token");r.request({url:o.URLS.ACCOUNT_CONFIRMATION,method:"POST",data:{token:i}}).then(function(){r.route("/login"),t.success({body:o.LANG.USER.INFO.ACCOUNT_CONFIRMATION_SUCCESS})},function(i){r.route("/login"),t.error({body:e.result(o.LANG,i.error)})})},i.view=function(){},i}.call(this);
},{"../configuration.js":3,"../widgets/notification.js":40,"lodash":48,"mithril":49}],11:[function(require,module,exports){
module.exports=function(){var e=require("mithril"),r=require("lodash"),t=require("../configuration.js"),o=require("../auth.js"),u=require("../widgets/notification.js"),i={};return i.controller=function(){e.request({url:t.URLS.AUTH+"/admin/logout",method:"GET",data:{auth_token:o.admToken()}}).then(function(){document.title=t.SERVER.title,localStorage.removeItem("admToken"),u.success({body:t.LANG.USER.AUTH.SUCCESS_OUT}),e.route("/")},function(o){u.error({body:r.result(t.LANG,o.error)}),e.route("/")})},i}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../widgets/notification.js":40,"lodash":48,"mithril":49}],12:[function(require,module,exports){
module.exports=function(){var r=require("mithril"),e=require("lodash"),i=require("../configuration.js"),t=require("../auth.js"),n=require("../widgets/notification.js"),o=require("./layout.js"),a=require("../helpers/form.js"),s=require("./subscribe.js"),u={};u.controller=function(){if(!t.isAdmin())return r.route("/admin");document.title=i.LANG.ADMIN.FORM_USER_EDIT+" - "+i.SERVER.title;var o={adminView:r.prop(!0),profileView:r.prop(!1),user:r.prop(!1)},s=function(){o.fields=["login","password","passwordConfirm","email","firstname","lastname","organization","lang","color"],a.initFields(o,o.fields);var i=o.user();e.forEach(o.fields,function(t){e.startsWith(t,"password")||(o.data[t]=r.prop(i[t]))})},u=function(t){return r.route("/admin/users"),n.error({body:e.result(i.LANG,t.error)})};return o.submit={profileSave:function(a){a.preventDefault();var s=o.data.password();if(s&&s!==o.data.passwordConfirm())return n.warning({body:i.LANG.USER.ERR.PASSWORD_MISMATCH});r.request({method:"PUT",url:i.URLS.USER+"/"+o.data.login(),data:e.assign(o.data,{auth_token:t.admToken()})}).then(function(r){t.userInfo(r.value),n.success({body:i.LANG.USER.AUTH.PROFILE_SUCCESS})},u)}},r.request({method:"GET",url:i.URLS.USER+"/"+r.route.param("login"),data:{auth_token:t.admToken()}}).then(function(r){o.user(r.value),s()},u),o};var l={};return l.main=function(e){var t=[r("h2",i.LANG.ADMIN.FORM_USER_EDIT+" "+e.user().login),s.views.form(e)];return r("section",{class:"user"},t)},l.aside=function(){return r("section.user-aside",[r("h2",i.LANG.ACTIONS.HELP),r("article.well",r.trust(i.LANG.ADMIN.HELP_USER_EDIT))])},u.view=function(r){return o.view(l.main(r),l.aside())},u}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../helpers/form.js":6,"../widgets/notification.js":40,"./layout.js":22,"./subscribe.js":33,"lodash":48,"mithril":49}],13:[function(require,module,exports){
module.exports=function(){var r=require("mithril"),e=require("lodash"),i=require("../configuration.js"),o=require("../auth.js"),t=require("../widgets/notification.js"),n={};return n.controller=function(){if(!o.isAdmin())return r.route("/admin");var n=r.route.param("login");r.route("/admin/users"),window.confirm(i.LANG.ADMIN.INFO.USER_REMOVE_SURE)&&r.request({method:"DELETE",url:i.URLS.USER+"/"+n,data:{auth_token:o.admToken()}}).then(function(){t.success({body:i.LANG.USER.INFO.REMOVE_ACCOUNT_SUCCESS})},function(r){t.error({body:e.result(i.LANG,r.error)})})},n}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../widgets/notification.js":40,"lodash":48,"mithril":49}],14:[function(require,module,exports){
module.exports=function(){var e=require("mithril"),r=require("lodash"),i=require("../configuration.js"),n=require("../auth.js"),t=require("../widgets/notification.js"),o=require("./layout.js"),u=require("./user.js"),s=require("../helpers/form.js"),a={};a.controller=function(){if(!n.isAdmin())return e.route("/admin");document.title=i.LANG.ADMIN.FORM_USERS_SEARCH+" - "+i.SERVER.title;var o={user:e.prop(!1)};return o.fields=["login"],s.initFields(o,o.fields),o.search=function(u){u.preventDefault(),e.request({method:"GET",url:i.URLS.USER+"/"+o.data.login(),data:{auth_token:n.admToken()}}).then(function(e){o.user(e.value),t.info({body:i.LANG.ADMIN.INFO.USER_FOUND})},function(e){o.user(!1),t.error({body:r.result(i.LANG,e.error)})})},o};var l={};return l.form=function(r){var n=u.view.field.login(r);return n.input.attrs.config=s.focusOnInit,n.icon.attrs["data-msg"]=i.LANG.ADMIN.INFO.USERS_SEARCH_LOGIN,e("form.block",{id:"users-form",onsubmit:r.search},[e("fieldset.block-group",[e("legend",i.LANG.ADMIN.USERS_SEARCH_LOGIN),e("div.form-group",[n.label,n.input])]),l.user(r),e("input.block.send",{form:"users-form",type:"submit",class:"btn btn-default",value:i.LANG.ADMIN.FIELD.SEARCH})])},l.user=function(r){var n=r.user();if(n){var t=[e("a",{href:"/admin/users/"+n.login+"/edit",config:e.route,title:i.LANG.GROUP.EDIT},[e("i.glyphicon glyphicon-pencil")]),e("a",{href:"/admin/users/"+n.login+"/remove",config:e.route,title:i.LANG.GROUP.REMOVE},[e("i.glyphicon glyphicon-trash")])],o=n.login;return n.firstname&&(o=[o,"(",n.firstname,n.lastname,")"].join(" ")),e("ul.admin-users",[e("li.block-group",[e("span.block.name",o),e("span.block.actions",t)])])}return e("p.admin-users",i.LANG.ADMIN.INFO.USER_NONE)},l.main=function(r){var n=[e("h2.block",i.LANG.ADMIN.FORM_USERS_SEARCH),l.form(r)];return e("section",{class:"block-group user admin"},n)},l.aside=function(){return e("section.user-aside",[e("h2",i.LANG.ACTIONS.HELP),e("article",e.trust(i.LANG.ADMIN.HELP_USERS))])},a.view=function(e){return o.view(l.main(e),l.aside(e))},a}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../helpers/form.js":6,"../widgets/notification.js":40,"./layout.js":22,"./user.js":35,"lodash":48,"mithril":49}],15:[function(require,module,exports){
module.exports=function(){var e=require("mithril"),t=require("lodash"),a=require("../configuration.js"),r=require("../auth.js"),n=require("../widgets/notification.js"),o=require("./layout.js"),i=require("./user.js"),s=require("../helpers/form.js"),c={};c.controller=function(){document.title=a.LANG.ADMIN.FORM_LOGIN+" - "+a.SERVER.title;var o={};localStorage.removeItem("token"),s.initFields(o,["login","password"]);var i=function(i){i&&localStorage.setItem("admToken",i.token),e.request({url:a.URLS.CONF,method:"GET",data:{auth_token:r.admToken()}}).then(function(r){if(!r.auth)return localStorage.removeItem("admToken");if(s.initFields(o,["title","rootUrl","allowEtherPads","passwordMin","passwordMax","defaultLanguage","checkMails","tokenDuration","SMTPHost","SMTPPort","SMTPSSL","SMTPTLS","SMTPUser","SMTPPass","SMTPEmailFrom","HTMLExtraHead","openRegistration","hideHelpBlocks","useFirstLastNameInPads"]),o.currentConf=r.value,t.forIn(r.value,function(t,a){o.data[a]=e.prop(t)}),0===o.data.rootUrl().length){var i=window.location;o.data.rootUrl(i.protocol+"//"+i.host)}var c=function(e){return e=e||0,function(t){return void 0!==t&&(e=parseInt(t,10)),e}};o.data.passwordMin=c(o.data.passwordMin()),o.data.passwordMax=c(o.data.passwordMax()),o.data.passwordMin.toJSON=function(){return o.data.passwordMin()},o.data.passwordMax.toJSON=function(){return o.data.passwordMax()},document.title=a.LANG.ADMIN.FORM_SETTINGS+" - "+a.SERVER.title,n.success({body:a.LANG.USER.AUTH.SUCCESS})},function(e){n.error({body:t.result(a.LANG,e.error)})})};return r.isAdmin()&&i(),o.login=function(r){r.preventDefault(),e.request({url:a.URLS.AUTH+"/admin/login",method:"POST",data:o.data}).then(i,function(e){n.error({body:t.result(a.LANG,e.error)})})},o.submit=function(i){if(i.preventDefault(),o.data.passwordMin()>o.data.passwordMax())n.warning({body:a.LANG.ADMIN.ERR.PASSWORD_SIZE}),document.querySelector('input[name="passwordMin"]').focus();else{var s=t.reduce(o.data,function(e,t,a){return t()!==o.currentConf[a]&&(e[a]=t),e},{}),c=t.pairs(s),l=function(i){e.request({method:"PUT",url:a.URLS.CONF+"/"+i[0],data:{value:i[1](),auth_token:r.admToken()}}).then(function(e){c.length>0?l(c.pop()):(o.currentConf[e.key]=e.value,a.SERVER[e.key]=e.value,n.success({body:a.LANG.ADMIN.INFO.SUCCESS}))},function(e){n.error({body:t.result(a.LANG,e.error)})})};c.length>0?l(c.pop()):n.info({body:a.LANG.ADMIN.INFO.NOCHANGE})}},o};var l={};return l.form=function(t){var r=i.view.field.login(t);r.input.attrs.config=s.focusOnInit,r.icon.attrs["data-msg"]=a.LANG.ADMIN.INFO.LOGIN;var n=i.view.field.password(t);return n.icon.attrs["data-msg"]=a.LANG.USER.PASSWORD,delete n.input.attrs.pattern,delete n.input.attrs.minlength,delete n.input.attrs.maxlength,r.label.attrs.class="col-sm-4",n.label.attrs.class="col-sm-4",e("form.form-horizontal.col-sm-8.col-sm-offset-2.well",{id:"login-form",onsubmit:t.login},[e("fieldset",[e("legend",a.LANG.ADMIN.ETHERPAD_ACCOUNT),e(".form-group",[r.label,e(".col-sm-7",r.input)]),e(".form-group",[n.label,e(".col-sm-7",n.input)]),e("input.btn.btn-success.pull-right",{form:"login-form",type:"submit",value:a.LANG.USER.LOGIN})])])},l.settings=function(r){var n=a.LANG.ADMIN,o={title:function(){var e=s.icon(r,"title",n.INFO.TITLE,n.ERR.TITLE),a=s.field(r,"title",n.FIELD.TITLE,e);return t.assign(a.input.attrs,{required:!0}),a}(),rootUrl:function(){var e=s.icon(r,"rootUrl",n.INFO.ROOTURL,n.ERR.ROOTURL),a=s.field(r,"rootUrl",n.FIELD.ROOTURL,e);return t.assign(a.input.attrs,{type:"url"}),a}(),HTMLExtraHead:function(){return{label:e("label",{for:"HTMLExtraHead"},a.LANG.ADMIN.FIELD.HTMLEXTRA_HEAD),icon:e("i",{class:"mp-tooltip glyphicon glyphicon-info-sign","data-msg":a.LANG.ADMIN.INFO.HTMLEXTRA_HEAD}),textarea:e("textarea.form-control",{name:"HTMLExtraHead",value:r.data.HTMLExtraHead(),onchange:e.withAttr("value",r.data.HTMLExtraHead)},r.data.HTMLExtraHead())}}(),passwordMin:function(){var e=s.icon(r,"passwordMin",n.INFO.PASSWORD_MIN,n.ERR.PASSWORD_MIN),a=s.field(r,"passwordMin",n.FIELD.PASSWORD_MIN,e);return t.assign(a.input.attrs,{type:"number",min:"1",required:!0}),a}(),passwordMax:function(){var e=s.icon(r,"passwordMax",n.INFO.PASSWORD_MAX,n.ERR.PASSWORD_MAX),a=s.field(r,"passwordMax",n.FIELD.PASSWORD_MAX,e);return t.assign(a.input.attrs,{type:"number",min:"1",required:!0}),a}(),defaultLanguage:function(){var n=e("i",{class:"mp-tooltip glyphicon glyphicon-info-sign","data-msg":a.LANG.ADMIN.INFO.LANGUAGE_DEFAULT});return{label:e("label",{for:"defaultLanguage"},[a.LANG.ADMIN.FIELD.LANGUAGE_DEFAULT,n]),icon:n,select:e("select.form-control",{name:"defaultLanguage",required:!0,value:r.data.defaultLanguage(),onchange:e.withAttr("value",r.data.defaultLanguage)},t.reduce(a.SERVER.languages,function(t,a,r){return t.push(e("option",{value:r},a)),t},[]))}}(),allowEtherPads:function(){var a=s.icon(r,"allowEtherPads",n.INFO.ALLOW_ETHERPADS),o={name:"allowEtherPads"};r.data.allowEtherPads&&(o.checked="checked");var i=e('input[type="checkbox"]',o);return t.assign(i.attrs,{type:"checkbox",checked:r.data.allowEtherPads(),onchange:e.withAttr("checked",r.data.allowEtherPads)}),e("label",[i,n.FIELD.ALLOW_ETHERPADS,a])}(),hideHelpBlocks:function(){var a=s.icon(r,"hideHelpBlocks",n.INFO.HIDE_HELP_BLOCKS),o={name:"hideHelpBlocks"};r.data.hideHelpBlocks&&(o.checked="checked");var i=e('input[type="checkbox"]',o);return t.assign(i.attrs,{type:"checkbox",checked:r.data.hideHelpBlocks(),onchange:e.withAttr("checked",r.data.hideHelpBlocks)}),e("label",[i,n.FIELD.HIDE_HELP_BLOCKS,a])}(),useFirstLastNameInPads:function(){var a=s.icon(r,"useFirstLastNameInPads",n.INFO.USE_FIRST_AND_LAST_NAME_IN_PADS),o={name:"useFirstLastNameInPads"};r.data.useFirstLastNameInPads&&(o.checked="checked");var i=e('input[type="checkbox"]',o);return t.assign(i.attrs,{type:"checkbox",checked:r.data.useFirstLastNameInPads(),onchange:e.withAttr("checked",r.data.useFirstLastNameInPads)}),e("label",[i,n.FIELD.USE_FIRST_AND_LAST_NAME_IN_PADS,a])}(),openRegistration:function(){var a=s.icon(r,"openRegistration",n.INFO.OPEN_REGISTRATION),o={name:"openRegistration"};r.data.openRegistration&&(o.checked="checked");var i=e('input[type="checkbox"]',o);return t.assign(i.attrs,{type:"checkbox",checked:r.data.openRegistration(),onchange:e.withAttr("checked",r.data.openRegistration)}),e("label",[i,n.FIELD.OPEN_REGISTRATION,a])}(),checkMails:function(){var a=s.icon(r,"checkMails",n.INFO.CHECKMAILS),o={name:"checkMails"};r.data.checkMails&&(o.checked="checked");var i=e('input[type="checkbox"]',o);return t.assign(i.attrs,{type:"checkbox",checked:r.data.checkMails(),onchange:e.withAttr("checked",r.data.checkMails)}),e("label",[i,n.FIELD.CHECKMAILS,a])}(),tokenDuration:function(){var e=s.icon(r,"tokenDuration",n.INFO.TOKEN_DURATION),a=s.field(r,"tokenDuration",n.FIELD.TOKEN_DURATION,e);return t.assign(a.label.attrs,{style:"clear: left;"}),t.assign(a.input.attrs,{type:"number"}),a}(),SMTPHost:function(){var e=s.icon(r,"SMTPHost",n.INFO.SMTP_HOST);return s.field(r,"SMTPHost",n.FIELD.SMTP_HOST,e)}(),SMTPPort:function(){var e=s.icon(r,"SMTPPort",n.INFO.SMTP_PORT),a=s.field(r,"SMTPPort",n.FIELD.SMTP_PORT,e);return t.assign(a.input.attrs,{type:"number",min:1}),a}(),SMTPSSL:function(){var a=s.icon(r,"SMTPSSL",n.INFO.SMTP_SSL),o={name:"SMTPSSL"};r.data.SMTPSSL&&(o.checked="checked");var i=e('input[type="checkbox"]',o);return t.assign(i.attrs,{type:"checkbox",checked:r.data.SMTPSSL(),onchange:e.withAttr("checked",r.data.SMTPSSL)}),e("label",[i,n.FIELD.SMTP_SSL,a])}(),SMTPTLS:function(){var a=s.icon(r,"SMTPTLS",n.INFO.SMTP_TLS),o={name:"SMTPTLS"};r.data.SMTPTLS&&(o.checked="checked");var i=e('input[type="checkbox"]',o);return t.assign(i.attrs,{type:"checkbox",checked:r.data.SMTPTLS(),onchange:e.withAttr("checked",r.data.SMTPTLS)}),e("label",[i,n.FIELD.SMTP_TLS,a])}(),SMTPUser:function(){var e=s.icon(r,"SMTPUser",n.INFO.SMTP_USER),a=s.field(r,"SMTPUser",n.FIELD.SMTP_USER,e);return t.assign(a.label.attrs,{style:"clear: left;"}),a}(),SMTPPass:function(){var e=s.icon(r,"SMTPPass",n.INFO.SMTP_PASS),a=s.field(r,"SMTPPass",n.FIELD.SMTP_PASS,e);return t.assign(a.input.attrs,{type:"password"}),a}(),SMTPEmailFrom:function(){var e=s.icon(r,"SMTPEmailFrom",n.INFO.SMTP_EMAILFROM,n.ERR.SMTP_EMAILFROM),a=s.field(r,"SMTPEmailFrom",n.FIELD.SMTP_EMAILFROM,e);return t.assign(a.input.attrs,{type:"email"}),a}()};return e("form",{id:"settings-form",onsubmit:r.submit},[e("fieldset",[e("legend",a.LANG.ADMIN.SETTINGS_GENERAL),e("div",[e("div.form-group",[o.title.label,o.title.input]),e("div.form-group",[o.rootUrl.label,o.rootUrl.input]),e("div.form-group",[o.defaultLanguage.label,o.defaultLanguage.select]),e("div.checkbox",[o.allowEtherPads]),e("div.checkbox",[o.openRegistration]),e("div.checkbox",[o.hideHelpBlocks]),e("div.checkbox",[o.useFirstLastNameInPads]),e("div.form-group",[o.HTMLExtraHead.label,o.HTMLExtraHead.icon,o.HTMLExtraHead.textarea])])]),e("fieldset",[e("legend",a.LANG.ADMIN.SETTINGS_PASSWORD),e("div",[e("div.form-group",[o.passwordMin.label,o.passwordMin.input]),e("div.form-group",[o.passwordMax.label,o.passwordMax.input])])]),e("fieldset",[e("legend",a.LANG.ADMIN.SETTINGS_MAIL),e("div",[e("div.checkbox",[o.checkMails]),e("div.form-group",[o.tokenDuration.label,o.tokenDuration.input]),e("div.form-group",[o.SMTPHost.label,o.SMTPHost.input]),e("div.form-group",[o.SMTPPort.label,o.SMTPPort.input]),e("div.checkbox",[o.SMTPSSL]),e("div.checkbox",[o.SMTPTLS]),e("div.form-group",[o.SMTPUser.label,o.SMTPUser.input]),e("div.form-group",[o.SMTPPass.label,o.SMTPPass.input]),e("div.form-group",[o.SMTPEmailFrom.label,o.SMTPEmailFrom.input])])]),e("input.btn.btn-success",{form:"settings-form",type:"submit",value:a.LANG.ADMIN.FIELD.APPLY})])},l.main=function(t){var n=function(){return r.isAdmin()?[e("h2",a.LANG.ADMIN.FORM_SETTINGS),l.settings(t)]:[e("h2",a.LANG.ADMIN.FORM_LOGIN),l.form(t)]}();return e("section",{class:"block-group user admin"},n)},l.aside=function(){var t=r.isAdmin()?"HELP_SETTINGS":"HELP_LOGIN";return e("section.user-aside",[e("h2",a.LANG.ACTIONS.HELP),e("article.well",e.trust(a.LANG.ADMIN[t]))])},c.view=function(e){return o.view(l.main(e),l.aside(e))},c}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../helpers/form.js":6,"../widgets/notification.js":40,"./layout.js":22,"./user.js":35,"lodash":48,"mithril":49}],16:[function(require,module,exports){
module.exports=function(){"use strict";var r=require("mithril"),e=require("lodash"),t=require("../configuration.js"),i=require("../auth.js"),n=i.userInfo,o=require("./layout.js"),u=require("./group.js").mark,a=require("./pad-mark.js"),s=require("../model/group.js"),p={};p.controller=function(){if(!i.isAuthenticated())return t.unauthUrl(!0),r.route("/login");document.title=t.LANG.BOOKMARK.TITLE+" - "+t.SERVER.title;var o={};return o.computeBookmarks=function(){var r=n().bookmarks,t=function(r,t){return e(r).values().filter(function(r){return e.includes(t,r._id)}).sortBy("name").value()};o.bookmarks={groups:t(s.groups(),r.groups),pads:t(s.pads(),r.pads)}},o.unmark=function(r,e){("groups"===e?u:a)(r,o.computeBookmarks)},e.isEmpty(s.groups())?s.fetch(o.computeBookmarks):o.computeBookmarks(),o};var l={};return l._items=function(i,n,o){return 0===e.size(i.bookmarks[n])?r("p",o):r("ul.list-unstyled",e.map(i.bookmarks[n],function(o){var u;return u="groups"===n?"/mypads/group/"+o._id+"/view":"/mypads/group/"+o.group+"/pad/view/"+o._id,r("li",[r("button.btn.btn-link.btn-lg",{title:t.LANG.GROUP.UNMARK,onclick:e.partial(i.unmark,o._id,n)},[r("i.glyphicon glyphicon-star")]),r("a",{href:u,config:r.route},o.name)])}))},l.groups=e.partialRight(l._items,"groups",t.LANG.GROUP.NONE),l.pads=e.partialRight(l._items,"pads",t.LANG.GROUP.PAD.NONE),l.aside=function(){return r("section.user-aside",[r("h2",t.LANG.ACTIONS.HELP),r("article.well",r.trust(t.LANG.BOOKMARK.HELP))])},l.main=function(e){return r("section",[r("h2",t.LANG.BOOKMARK.TITLE),r("section.panel.panel-primary",[r(".panel-heading",r("h3.panel-title",t.LANG.GROUP.GROUPS)),r(".panel-body",l.groups(e))]),r("section.panel.panel-info",[r(".panel-heading",r("h3.panel-title",t.LANG.GROUP.PAD.PADS)),r(".panel-body",l.pads(e))])])},p.view=function(r){return o.view(l.main(r),l.aside(r))},p}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../model/group.js":9,"./group.js":20,"./layout.js":22,"./pad-mark.js":26,"lodash":48,"mithril":49}],17:[function(require,module,exports){
module.exports=function(){"use strict";var i=require("mithril"),e=require("lodash"),r=require("../configuration.js"),t=require("../auth.js"),o=require("./layout.js"),n=require("../helpers/form.js"),a=require("../widgets/notification.js"),s=require("../widgets/tag.js"),u=require("../model/group.js"),l={};l.controller=function(){if(!t.isAuthenticated())return r.unauthUrl(!0),i.route("/login");var o={},l=function(){o.addView=i.prop("/mypads/group/add"===i.route()),document.title=o.addView()?r.LANG.GROUP.ADD:r.LANG.GROUP.EDIT_GROUP,document.title+=" - "+r.SERVER.title,o.fields=["name","description","visibility","password","readonly"],n.initFields(o,o.fields),o.data.visibility("restricted");var t;if(!o.addView()){var a=i.route.param("key");o.group=u.groups()[a],e.map(e.keys(o.group),function(e){o.data[e]=i.prop(o.group[e])}),o.data.password=i.prop(""),t=o.group.tags}o.tag=new s.controller({current:t||[],tags:u.tags()}),o.data.tags=function(){return o.tag.current},o.data.tags.toJSON=function(){return o.tag.current}};return e.isEmpty(u.groups())?u.fetch(l):l(),o.submit=function(n){n.preventDefault();var s=function(){var i={params:{},extra:{}};return o.addView()?(i.params.method="POST",i.params.url=r.URLS.GROUP,i.extra.msg=r.LANG.GROUP.INFO.ADD_SUCCESS):(i.params.method="PUT",i.params.url=r.URLS.GROUP+"/"+o.group._id,i.extra.msg=r.LANG.GROUP.INFO.EDIT_SUCCESS),i}();s.params.data=e.assign(o.data,{admin:t.userInfo()._id}),s.params.data.auth_token=t.token(),i.request(s.params).then(function(r){var t=u.groups();t[r.key]=r.value,u.groups(t),u.tags(e.union(u.tags(),r.value.tags)),a.success({body:s.extra.msg}),i.route("/mypads/group/"+r.value._id+"/view")},function(i){a.error({body:e.result(r.LANG,i.error)})})},o};var c={};return l.views=c,c.icon={},c.icon.common=function(e){return i("i",{class:"mp-tooltip glyphicon glyphicon-info-sign","data-msg":e})},c.icon.name=function(i){return n.icon(i,"name",r.LANG.GROUP.INFO.NAME,r.LANG.GROUP.ERR.NAME)},c.icon.description=function(i){return n.icon(i,"description",r.LANG.GROUP.INFO.DESCRIPTION)},c.icon.visibility=function(){return c.icon.common(r.LANG.GROUP.INFO.VISIBILITY)},c.icon.password=function(){return c.icon.common(r.LANG.GROUP.INFO.PASSWORD)},c.icon.readonly=function(){return c.icon.common(r.LANG.GROUP.INFO.READONLY)},c.field={},c.field.name=function(i){var t=n.field(i,"name",r.LANG.GROUP.INFO.NAME,c.icon.name(i));return e.assign(t.input.attrs,{placeholder:r.LANG.GROUP.INFO.NAME,required:!0,maxlength:40,config:n.focusOnInit}),t.label.attrs.class="col-sm-4",t},c.field.description=function(e){var t=c.icon.description(e);return{label:i("label.col-sm-4",{for:"description"},[r.LANG.GROUP.FIELD.DESCRIPTION,t]),icon:t,textarea:i("textarea.form-control",{name:"description",value:e.data.description()||"",onchange:i.withAttr("value",e.data.description)},e.data.description())}},c.field.visibility=function(t,o){o=!!e.isUndefined(o)||o;var n=c.icon.visibility();return{label:i("label.col-sm-4",{for:"visibility"},[r.LANG.GROUP.FIELD.VISIBILITY,n]),icon:n,select:i("select.form-control",{name:"visibility",required:!0,value:t.data.visibility(),onchange:i.withAttr("value",t.data.visibility)},[function(){return o?i("option",{value:"restricted"},r.LANG.GROUP.FIELD.RESTRICTED):i("option",{value:""},"")}(),i("option",{value:"private"},r.LANG.GROUP.FIELD.PRIVATE),i("option",{value:"public"},r.LANG.GROUP.FIELD.PUBLIC)])}},c.field.password=function(e){var t=c.icon.password();return{label:i("label.col-sm-4",{for:"password"},[r.LANG.USER.PASSWORD,t]),icon:t,input:i("input.form-control",{name:"password",type:"password",placeholder:r.LANG.USER.UNDEF,value:e.data.password(),required:e.addView()&&"private"===e.data.visibility(),oninput:i.withAttr("value",e.data.password)})}},c.field.readonly=function(e){var t=c.icon.readonly();return{label:i("label",[i("input",{name:"readonly",type:"checkbox",checked:e.data.readonly(),onchange:i.withAttr("checked",e.data.readonly)}),[r.LANG.GROUP.FIELD.READONLY,t]]),icon:t}},c.field.tag=function(i){return s.view(i.tag)},c.form=function(t){var o=e.reduce(t.fields,function(i,e){return i[e]=c.field[e](t),i},{}),n=[i(".form-group",[o.name.label,i(".col-sm-7",o.name.input)]),i(".form-group",[o.description.label,i(".col-sm-7",o.description.textarea)]),i(".form-group",[o.visibility.label,i(".col-sm-7",o.visibility.select)])];return"private"===t.data.visibility()&&n.push(i(".form-group",[o.password.label,i(".col-sm-7",o.password.input)])),t.addView()||n.push(i(".form-group",i(".col-sm-7 .col-sm-offset-4",i(".checkbox",[o.readonly.label])))),n.push(c.field.tag(t)),i("form.form-horizontal",{id:"group-form",onsubmit:t.submit},[i("fieldset",[i("legend",r.LANG.GROUP.GROUP),i("div",n)]),i("input.btn.btn-success.pull-right",{form:"group-form",type:"submit",value:r.LANG.ACTIONS.SAVE})])},c.main=function(e){return i("section",{class:"user group-form"},[i("h2",e.addView()?r.LANG.GROUP.ADD:r.LANG.GROUP.EDIT_GROUP),c.form(e)])},c.aside=function(){return i("section.user-aside",[i("h2",r.LANG.ACTIONS.HELP),i("article.well",i.trust(r.LANG.GROUP.ADD_HELP))])},l.view=function(i){return o.view(c.main(i),c.aside(i))},l}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../helpers/form.js":6,"../model/group.js":9,"../widgets/notification.js":40,"../widgets/tag.js":41,"./layout.js":22,"lodash":48,"mithril":49}],18:[function(require,module,exports){
module.exports=function(){"use strict";var r=require("mithril"),e=require("lodash"),t=require("../auth.js"),o=require("../configuration.js"),u=require("../model/group.js"),i=require("../widgets/notification.js"),n={};return n.controller=function(){if(!t.isAuthenticated())return o.unauthUrl(!0),r.route("/login");window.confirm(o.LANG.GROUP.INFO.REMOVE_SURE)?r.request({method:"DELETE",url:o.URLS.GROUP+"/"+r.route.param("key"),data:{auth_token:t.token()}}).then(function(e){var t=u.groups();delete t[e.key],u.groups(t),i.success({body:o.LANG.GROUP.INFO.REMOVE_SUCCESS}),r.route("/mypads/group/list")},function(r){i.error({body:e.result(o.LANG,r.error)})}):r.route("/mypads/group/"+r.route.param("key")+"/view")},n.view=function(){},n}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../model/group.js":9,"../widgets/notification.js":40,"lodash":48,"mithril":49}],19:[function(require,module,exports){
module.exports=function(){"use strict";var t=require("mithril"),i=require("lodash"),e=require("../configuration.js"),r=require("../auth.js"),n=require("../widgets/notification.js"),s=require("./layout.js"),o=require("../model/group.js"),p=require("./pad-mark.js"),a=require("./pad-share.js"),u=require("../helpers/ready.js"),l=require("../helpers/sortingPreferences.js"),c={};c.controller=function(){var s=t.route.param("key"),p={group:{visibility:"",tags:[]},privatePassword:t.prop(""),sendPass:t.prop(!1)};r.isAuthenticated()&&(p.bookmarks=r.userInfo().bookmarks.pads),p.isGuest=!r.isAuthenticated();var a=function(n){if(n)return t.route("/mypads");var a=function(n){if(n)return t.route("/mypads");var a=p.isGuest?o.tmp():o;if(p.group=a.groups()[s],p.isGuest)p.isAdmin=!1,p.isUser=!1,p.pads=i.sortBy(i.compact(i.map(p.group.pads,function(t){return a.pads()[t]})),l.padByField());else{p.isAdmin=i.includes(p.group.admins,r.userInfo()._id),p.isUser=i.includes(p.group.users,r.userInfo()._id);var u=o.pads(),c=o.users();p.pads=i.sortBy(i.map(p.group.pads,function(t){return u[t]}),l.padByField()),p.users=i.map(p.group.users,function(t){return c[t]}),p.admins=i.map(p.group.admins,function(t){return c[t]})}l.padAsc()||p.pads.reverse(),document.title=e.LANG.GROUP.GROUP+" "+p.group.name+" - "+e.SERVER.title};o.groups()[s]?a():(p.isGuest=!0,o.fetchObject({group:s},void 0,a))},u=function(){return r.isAuthenticated()?i.partial(o.fetch,a):i.partial(o.fetchObject,{group:s},void 0,a)}();return i.isEmpty(o.groups())?u():a(),p.sortField=t.prop(l.padByField()),p.sortAsc=t.prop(l.padAsc()),p.sortBy=function(t,e){p.sortField()===t&&"boolean"!=typeof e&&p.sortAsc(!p.sortAsc()),p.sortField(t);var r=p.sortAsc()?"asc":"desc";p.pads=i.sortByOrder(p.pads,t,r),l.updateValues({padByField:p.sortField(),padAsc:p.sortAsc()})},p.quit=function(){window.confirm(e.LANG.GROUP.INFO.RESIGN)&&t.request({method:"POST",url:e.URLS.GROUP+"/resign",data:{gid:p.group._id,auth_token:r.token()}}).then(function(i){var r=o.groups();delete r[i.value._id],o.groups(r),n.success({body:e.LANG.GROUP.INFO.RESIGN_SUCCESS}),t.route("/mypads/group/list")},function(t){n.error({body:i.result(e.LANG,t.error)})})},p.submitPass=function(t){t.preventDefault(),o.fetchObject({group:s},p.privatePassword(),function(t){if(t)return p.sendPass(!1);var e=p.isGuest?o.tmp():o;p.group=e.groups()[s],p.pads=i.sortBy(i.compact(i.map(p.group.pads,function(t){return e.pads()[t]})),l.padByField()),p.sendPass(!0)})},p};var d={};return d.properties=function(r){return t("table.table.table-stripped.table-bordered",[t("thead",t("tr",[t("th",{scope:"col"},e.LANG.GROUP.PAD.PADS),t("th",{scope:"col",title:e.LANG.GROUP.PAD.VISIBILITY},t("i.glyphicon.glyphicon-eye-open",t("span.sr-only",e.LANG.GROUP.PAD.VISIBILITY))),t("th",{scope:"col"},e.LANG.GROUP.FIELD.READONLY),t("th",{scope:"col",title:e.LANG.GROUP.PAD.ADMINS},t("i.glyphicon.glyphicon-knight",t("span.sr-only",e.LANG.GROUP.PAD.ADMINS))),t("th",{scope:"col",title:e.LANG.GROUP.PAD.USERS},t("i.glyphicon.glyphicon-user",t("span.sr-only",e.LANG.GROUP.PAD.USERS))),t("th",{scope:"col"},e.LANG.GROUP.TAGS.TITLE)])),t("tbody",t("tr.text-center",[t("td",i.size(r.group.pads)),t("td",e.LANG.GROUP.FIELD[r.group.visibility.toUpperCase()]),t("td",e.LANG.GLOBAL[r.group.readonly?"YES":"NO"]),t("td",i.size(r.group.admins)),t("td",i.size(r.group.users)),t("td",t("ul.list-inline",i.map(r.group.tags,function(i){return t("li.label.label-default",i)})))]))])},d.pads=function(r){var n="/mypads/group/"+r.group._id,s=e.LANG.GROUP,o=t("p.col-sm-6.text-center",[t("a.btn.btn-default",{href:n+"/pad/add",config:t.route},[t("i.glyphicon.glyphicon-plus.text-success")," "+e.LANG.GROUP.PAD.ADD])]),u=t("p.text-center",[t("a.btn.btn-default",{href:n+"/pad/move",config:t.route},[t("i.glyphicon.glyphicon-transfer")," "+e.LANG.GROUP.PAD.MOVE])]),l=function(){return r.sortField()?r.sortAsc()?"top":"bottom":"arrow-combo"}(),c=t("p.col-sm-6.text-right.small",[t("span"," "+e.LANG.GROUP.PAD.SORT_BY),t("button.btn.btn-default.btn-xs",{class:"ctime"===r.sortField()?" btn-info":"",type:"button",onclick:i.partial(r.sortBy,"ctime")},[e.LANG.GROUP.PAD.SORT_BY_CREATION+" ",t("i.small.glyphicon glyphicon-triangle-"+l)]),t("button.btn.btn-default.btn-xs",{class:"name"===r.sortField()?" btn-info":"",type:"button",onclick:i.partial(r.sortBy,"name")},[e.LANG.GROUP.PAD.SORT_BY_NAME+" ",t("i.small.glyphicon glyphicon-triangle-"+l)])]),d=function(){return 0===i.size(r.group.pads)?t("p",e.LANG.GROUP.PAD.NONE):t("ul.list-group.col-sm-12",i.map(r.pads,function(o){var u=[function(){if("restricted"!==r.group.visibility||o.visibility&&"restricted"!==o.visibility)return t("button.btn.btn-default.btn-xs",{title:e.LANG.GROUP.SHARE,onclick:a.bind(r,r.group._id,o._id)},[t("i.glyphicon.glyphicon-link")])}()];r.isAdmin&&u.push(t("a.btn.btn-default.btn-xs",{href:n+"/pad/edit/"+o._id,config:t.route,title:e.LANG.MENU.CONFIG},[t("i.glyphicon.glyphicon-wrench")]),t("a.btn.btn-default.btn-xs",{href:n+"/pad/remove/chat/history/"+o._id,config:t.route,title:e.LANG.GROUP.REMOVE_CHAT_HISTORY},[t("i.glyphicon.glyphicon-volume-off")]),t("a.btn.btn-default.btn-xs",{href:n+"/pad/remove/"+o._id,config:t.route,title:e.LANG.GROUP.REMOVE},[t("i.glyphicon.glyphicon-trash.text-danger")]));var l=o.name;if(o.visibility&&o.visibility!==r.group.visibility){l+=" ("+e.LANG.GROUP.FIELD[o.visibility.toUpperCase()]+")"}return t("li.list-group-item",[function(){if(!r.isGuest){var e=i.includes(r.bookmarks,o._id);return t("button.btn.btn-link.btn-lg",{title:e?s.UNMARK:s.BOOKMARK,onclick:function(){p(o._id)}},[t("i",{class:"glyphicon glyphicon-star"+(e?"":"-empty")})])}}(),t("span.name",[t("a",{href:n+"/pad/view/"+o._id,config:t.route,title:e.LANG.GROUP.VIEW},l)]),t("span.pull-right",u)])}))}(),g=[];return r.isAdmin&&g.push(o),g.push(c,d),r.isAdmin&&g.push(u),t("section.panel-body",g)},d.users=function(r){if(r.isGuest)return t("p",e.LANG.GROUP.PAD.PUBLIC_DENIED);var n=function(t){var i="";return t.firstname?i+=t.firstname+" "+t.lastname+" ":i+=t.login,i+" : "+t.email},s=function(r){return 0===i.size(r)?t("p",e.LANG.GROUP.PAD.USERS_NONE):t("ul.list-group",i.map(r,function(i){return t("li.list-group-item",n(i))}))},o="/mypads/group/"+r.group._id,p=[t("h4",e.LANG.GROUP.PAD.ADMINS)];r.isAdmin&&p.push(t("p.text-center",t("a.btn.btn-default",{href:o+"/user/share",config:t.route},[t("i.glyphicon.glyphicon-plus.text-success")," "+e.LANG.GROUP.SHARE_ADMIN]))),p.push(s(r.admins));var a=[t("h4",e.LANG.GROUP.PAD.USERS)];return r.isAdmin&&a.push(t("p.text-center",t("a.btn.btn-default",{href:o+"/user/invite",config:t.route},[t("i.glyphicon.glyphicon-plus.text-success")," "+e.LANG.GROUP.INVITE_USER.IU]))),a.push(s(r.users)),t("section.panel-body",[t(".col-sm-6",p),t(".col-sm-6",a)])},d.passForm=function(i){return[t("form",{id:"password-form",config:u.inFrame,onsubmit:i.submitPass},[t("label",{for:"mypadspassword"},e.LANG.USER.PASSWORD),t("input",{type:"password",required:!0,placeholder:e.LANG.USER.UNDEF,value:i.privatePassword(),oninput:t.withAttr("value",i.privatePassword)}),t("input.ok",{form:"password-form",type:"submit",value:e.LANG.USER.OK})])]},d.main=function(i){var r=[t("span",e.LANG.GROUP.GROUP+" "+i.group.name)],n="";"restricted"!==i.group.visibility&&(n=t("button.btn.btn-default",{title:e.LANG.GROUP.SHARE,onclick:a.bind(i,i.group._id,null)},[t("i.glyphicon.glyphicon-link"),t("span"," "+e.LANG.GROUP.SHARE)]));var s=[n];i.isAdmin&&s.push(t("a.btn.btn-default",{href:"/mypads/group/"+i.group._id+"/edit",config:t.route,title:e.LANG.MENU.CONFIG},[t("i.glyphicon.glyphicon-wrench"),t("span"," "+e.LANG.MENU.CONFIG)]),t("a.btn.btn-danger",{href:"/mypads/group/"+i.group._id+"/remove",config:t.route,title:e.LANG.GROUP.REMOVE},[t("i.glyphicon.glyphicon-trash"),t("span"," "+e.LANG.GROUP.REMOVE)]));var o=i.isAdmin&&i.admins.length>1||!i.isAdmin;return!i.isGuest&&o&&s.push(t("button.cancel.btn.btn-warning",{onclick:i.quit},[t("i.glyphicon glyphicon-fire")," "+e.LANG.GROUP.QUIT_GROUP])),r.push(t(".btn-group.pull-right",{role:"group"},s)),i.isAdmin||i.isUser||"private"!==i.group.visibility||i.sendPass()?t("section",[t("h2",r),t("section.description",[]),t("section.panel.panel-primary.props",[t(".panel-heading",t("h3.panel-title",e.LANG.GROUP.PROPERTIES)),t(".panel-body",i.group.description),d.properties(i)]),t("section.panel.panel-info.pads",[t(".panel-heading",t("h3.panel-title",e.LANG.GROUP.PAD.PADS)),d.pads(i)]),t("section.panel.panel-warning.users",[t(".panel-heading",t("h3.panel-title",e.LANG.GROUP.PAD.ADMINS+" & "+e.LANG.GROUP.PAD.USERS)),d.users(i)])]):t("section",[t("h2",r),d.passForm(i)])},d.aside=function(){return t("section.user-aside",[t("h2",e.LANG.ACTIONS.HELP),t("article.well",t.trust(e.LANG.GROUP.VIEW_HELP))])},c.view=function(t){return s.view(d.main(t),d.aside(t))},c}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../helpers/ready.js":7,"../helpers/sortingPreferences.js":8,"../model/group.js":9,"../widgets/notification.js":40,"./layout.js":22,"./pad-mark.js":26,"./pad-share.js":30,"lodash":48,"mithril":49}],20:[function(require,module,exports){
module.exports=function(){"use strict";var t=require("mithril"),i=require("lodash"),e=require("../configuration.js"),n=require("../widgets/notification.js"),r=require("../auth.js"),o=r.userInfo,s=require("./layout.js"),l=require("../model/group.js"),u=require("./pad-share.js"),a=require("../helpers/sortingPreferences.js"),c={};c.mark=function(s,l){var u=o(),a=function(t){return n.error({body:i.result(e.LANG,t.error)})};i.includes(u.bookmarks.groups,s)?i.pull(u.bookmarks.groups,s):u.bookmarks.groups.push(s),t.request({url:e.URLS.USERMARK,method:"POST",data:{type:"groups",key:s,auth_token:r.token()}}).then(function(){n.success({body:e.LANG.GROUP.MARK_SUCCESS}),l&&l()},a)},c.controller=function(){if(!r.isAuthenticated())return e.unauthUrl(!0),t.route("/login");document.title=e.LANG.GROUP.MYGROUPS+" - "+e.SERVER.title;var n={groups:{}};n.filters={admins:!1,users:!1};var s=function(t,i,e){n.filters[t]=!!i&&e,n.computeGroups()};return n.filterToggle=function(t){var e=function(e){return i.includes(e[t],o()._id)};s(t,!n.filters[t],e)},n.filterTag=function(t){var e=function(e){return i.includes(e.tags,t)};s(t,!n.filters[t],e)},n.filterVisibility=function(t){n.filterVisibVal===t?(n.filters.visibility=!1,n.filterVisibVal=!1):(n.filterVisibVal=t,n.filters.visibility=function(i){return i.visibility===t}),n.computeGroups()},n.search=t.prop(""),n.filterSearch=function(){n.search().length>2?n.filters.search=function(t){var i=new RegExp(n.search(),"gi");return!!t.name.match(i)||t.tags.toString().match(i)}:n.filters.search=!1,n.computeGroups()},window.c=n,n.sortField=t.prop(a.groupByField()),n.sortAsc=t.prop(a.groupAsc()),n.sortBy=function(t){n.sortField()===t&&n.sortAsc(!n.sortAsc()),n.sortField(t);var e=n.sortAsc()?"asc":"desc";n.groups=i.transform(n.groups,function(n,r,o){n[o]=i.sortByOrder(r,t,e)}),a.updateValues({groupByField:n.sortField(),groupAsc:n.sortAsc()})},n.computeGroups=function(){n.groups=i(l.groups()).values().sortBy(n.sortField()).value(),n.sortAsc()||n.groups.reverse();var t=o().bookmarks.groups;n.groups=i.reduce(n.groups,function(e,r){for(var o in n.filters)if(n.filters[o]&&!n.filters[o](r))return e;return i.includes(t,r._id)?e.bookmarked.push(r):r.readonly?e.archived.push(r):e.normal.push(r),e},{bookmarked:[],archived:[],normal:[]})},i.isEmpty(l.groups())?l.fetch(n.computeGroups):n.computeGroups(),n};var p={};return p.sort=function(n){var r=function(e,r){return t("button.btn.btn-default.btn-xs",{class:n.sortField()===e?" btn-info":"",onclick:i.partial(n.sortBy,e)},[t("span",r+" "),t("i.small.glyphicon glyphicon-triangle-"+(n.sortAsc()?"top":"bottom"))])};return t("section.sort",[t("h3",[t("span",e.LANG.GROUP.SORT.TITLE),t("i.mp-tooltip.glyphicon glyphicon-info-sign",{"data-msg":e.LANG.GROUP.SORT.HELP})]),t("ul.list-inline",[t("li",[r("ctime",e.LANG.GROUP.PAD.SORT_BY_CREATION)]),t("li",[r("name",e.LANG.GROUP.PAD.SORT_BY_NAME)])])])},p.search=function(i){return t("section.search",[t("h3",[t("span",e.LANG.GROUP.SEARCH.TITLE),t("i.mp-tooltip.glyphicon glyphicon-info-sign",{"data-msg":e.LANG.GROUP.SEARCH.HELP})]),t(".input-group",[t("input.form-control",{type:"search",placeholder:e.LANG.GROUP.SEARCH.TYPE,minlength:3,pattern:".{3,}",value:i.search(),oninput:t.withAttr("value",i.search),onkeydown:function(t){13===t.keyCode&&(t.preventDefault(),i.filterSearch())}}),t("span.input-group-btn",t("button.btn.btn-default",{type:"button",onclick:i.filterSearch},e.LANG.USER.OK))])])},p.filters=function(n){return t("section.filter",[t("h3",[t("span",e.LANG.GROUP.FILTERS.TITLE),t("i.mp-tooltip.glyphicon glyphicon-info-sign",{"data-msg":e.LANG.GROUP.FILTERS.HELP})]),t("ul.list-unstyled",[t("li",[t("button.btn.btn-default.btn-xs.btn-block",{class:"admin"+(n.filters.admins?" btn-info":""),onclick:i.partial(n.filterToggle,"admins")},e.LANG.GROUP.FILTERS.ADMIN)]),t("li",[t("button.btn.btn-default.btn-xs.btn-block",{class:"user"+(n.filters.users?" btn-info":""),onclick:i.partial(n.filterToggle,"users")},e.LANG.GROUP.FILTERS.USER)]),t("li",[function(){return i.map(["restricted","private","public"],function(r){return t("button.btn.btn-default.btn-xs.btn-block",{class:"user"+(n.filterVisibVal===r?" btn-info":""),onclick:i.partial(n.filterVisibility,r)},e.LANG.GROUP.FIELD.VISIBILITY+" : "+e.LANG.GROUP.FIELD[r.toUpperCase()])})}()])])])},p.tags=function(n){return t("section.tag",[t("h3",[t("span",e.LANG.GROUP.TAGS.TITLE),t("i.mp-tooltip.glyphicon glyphicon-info-sign",{"data-msg":e.LANG.GROUP.TAGS.HELP})]),t("ul.list-inline",i.map(l.tags(),function(e){return t("li",[t("button.btn.btn-default.btn-xs",{class:n.filters[e]?"btn-info":"",onclick:i.partial(n.filterTag,e)},e)])}))])},p.aside=function(i){return t("section.group-aside",[p.search(i),p.sort(i),p.filters(i),p.tags(i)])},p.group=function(n,r){var s="/mypads/group/"+r._id,l=i.includes(o().bookmarks.groups,r._id),a=e.LANG.GROUP,p=i.includes(r.admins,o()._id),g=[function(){if("restricted"!==r.visibility)return t("button.btn.btn-default.btn-xs",{type:"button",onclick:u.bind(n,r._id,null),title:e.LANG.GROUP.SHARE},[t("i.glyphicon.glyphicon-link")])}()];return p&&g.push(t("a.btn.btn-default.btn-xs",{href:s+"/edit",config:t.route,title:e.LANG.MENU.CONFIG},[t("i.glyphicon glyphicon-wrench")]),t("a.btn.btn-default.btn-xs",{href:s+"/remove",config:t.route,title:e.LANG.GROUP.REMOVE},[t("i.glyphicon.glyphicon-trash.text-danger")])),t("tr",[t("th",[t("p.pull-right",g),t("a.btn.btn-link.btn-lg",{onclick:c.mark.bind(n,r._id,n.computeGroups),href:"/mypads",config:t.route,title:l?a.UNMARK:a.BOOKMARK},[t("i",{class:"glyphicon glyphicon-star"+(l?"":"-empty")})]),t("a",{href:"/mypads/group/"+r._id+"/view",config:t.route,title:e.LANG.GROUP.VIEW_MANAGE},r.name)]),t("td",[i.size(r.pads),function(){var i=[];return p&&i.push(t("a.btn.btn-default.btn-xs.pull-right",{href:s+"/pad/add",config:t.route},[t("i.glyphicon.glyphicon-plus.text-success",{title:e.LANG.GROUP.PAD.ADD})])),i}()]),t("td",e.LANG.GROUP.FIELD[r.visibility.toUpperCase()]),t("td",[i.size(r.admins),function(){if(p)return t("a.btn.btn-default.btn-xs.pull-right",{href:s+"/user/share",config:t.route},[t("i.glyphicon.glyphicon-plus.text-success",{title:e.LANG.GROUP.SHARE_ADMIN})])}()]),t("td",[function(){if("restricted"===r.visibility)return[i.size(r.users),function(){if(p)return t("a.btn.btn-default.btn-xs.pull-right",{href:s+"/user/invite",config:t.route},[t("i.glyphicon.glyphicon-plus.text-success",{title:e.LANG.GROUP.INVITE_USER.IU})])}()]}()]),t("td",[t("ul.list-inline",i.map(r.tags,function(e){return t("li.label.label-default",{class:n.filters[e]?"label-info":"",onclick:i.partial(n.filterTag,e)},e)}))])])},p._groups=function(t,e){return i.map(t.groups[e],i.partial(p.group,t))},p.groups=i.partialRight(p._groups,"normal"),p.bookmarked=i.partialRight(p._groups,"bookmarked"),p.archived=i.partialRight(p._groups,"archived"),p.main=function(i){return t("section",[t("h2",[t("span",e.LANG.GROUP.MYGROUPS),t("i.mp-tooltip.glyphicon glyphicon-info-sign",{"data-msg":e.LANG.GROUP.HELP}),t("a.btn.btn-primary.pull-right",{href:"/mypads/group/add",config:t.route},[t("span",e.LANG.GROUP.ADD)])]),t("section.panel.panel-primary",[t(".panel-heading",t("h3.panel-title",e.LANG.GROUP.GROUPS)),t("table.table.table-stripped.table-bordered",[t("thead",t("tr",[t("th",{scope:"col"},e.LANG.GROUP.GROUPS),t("th",{scope:"col"},e.LANG.GROUP.PAD.PADS),t("th",{scope:"col",title:e.LANG.GROUP.PAD.VISIBILITY},t("i.glyphicon.glyphicon-eye-open",t("span.sr-only",e.LANG.GROUP.PAD.VISIBILITY))),t("th",{scope:"col",title:e.LANG.GROUP.PAD.ADMINS},t("i.glyphicon.glyphicon-knight",t("span.sr-only",e.LANG.GROUP.PAD.ADMINS))),t("th",{scope:"col",title:e.LANG.GROUP.PAD.USERS},t("i.glyphicon.glyphicon-user",t("span.sr-only",e.LANG.GROUP.PAD.USERS))),t("th",{scope:"col"},e.LANG.GROUP.TAGS.TITLE)])),t("tbody",[p.bookmarked(i),p.groups(i)])])]),t("section.panel.panel-default",[t(".panel-heading",t("h3.panel-title",e.LANG.GROUP.ARCHIVED)),t("table.table.table-stripped.table-bordered",[t("thead",t("tr",[t("th",{scope:"col"},e.LANG.GROUP.GROUPS),t("th",{scope:"col"},e.LANG.GROUP.PAD.PADS),t("th",{scope:"col",title:e.LANG.GROUP.PAD.VISIBILITY},t("i.glyphicon.glyphicon-eye-open",t("span.sr-only",e.LANG.GROUP.PAD.VISIBILITY))),t("th",{scope:"col",title:e.LANG.GROUP.PAD.ADMINS},t("i.glyphicon.glyphicon-knight",t("span.sr-only",e.LANG.GROUP.PAD.ADMINS))),t("th",{scope:"col",title:e.LANG.GROUP.PAD.USERS},t("i.glyphicon.glyphicon-user",t("span.sr-only",e.LANG.GROUP.PAD.USERS))),t("th",{scope:"col"},e.LANG.GROUP.TAGS.TITLE)])),p.archived(i)])])])},c.view=function(t){return s.view(p.main(t),p.aside(t))},c}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../helpers/sortingPreferences.js":8,"../model/group.js":9,"../widgets/notification.js":40,"./layout.js":22,"./pad-share.js":30,"lodash":48,"mithril":49}],21:[function(require,module,exports){
module.exports=function(){var e=require("mithril"),r=require("../auth.js"),t=require("./layout.js");return{controller:function(){return r.isAdmin()?e.route("/admin"):r.isAuthenticated()?e.route("/mypads"):void e.route("/login")},view:function(){return t.view(e("p","empty home"),e("p","empty aside"))}}}.call(this);
},{"../auth.js":2,"./layout.js":22,"mithril":49}],22:[function(require,module,exports){
module.exports=function(){var t=require("mithril"),e=require("lodash"),n=require("../configuration.js"),o=require("../auth.js"),i=require("../widgets/notification.js"),r=require("../helpers/expandPad.js"),a={},u={};u={},u.menuMain=function(){var i={auth:[{route:"/mypads",icon:"duplicate",txt:n.LANG.MENU.PAD},{route:"/mybookmarks",icon:"star",txt:n.LANG.MENU.BOOKMARK},{route:"/myuserlists",icon:"user",txt:n.LANG.MENU.USERLIST},{route:"/myprofile",icon:"home",txt:n.LANG.MENU.PROFILE},{route:"/logout",icon:"off",txt:n.LANG.MENU.LOGOUT}],admin:[{route:"/admin",icon:"wrench",txt:n.LANG.MENU.CONFIG},{route:"/admin/users",icon:"user",txt:n.LANG.MENU.USERS},{route:"/admin/logout",icon:"off",txt:n.LANG.MENU.LOGOUT}],unauth:[{route:"/login",icon:"lock",txt:n.LANG.USER.LOGIN},{route:"/subscribe",icon:"user",txt:n.LANG.USER.SUBSCRIBE}]};(n.SERVER.useLdap||!1===n.SERVER.openRegistration)&&(i.unauth=[{route:"/login",icon:"lock",txt:n.LANG.USER.LOGIN}]);var r=function(e){var n=t.route().slice(0,e.route.length)===e.route;return t("li",{class:n?"active":""},[t("a",{href:e.route,config:t.route},[t("i",{class:"glyphicon glyphicon-"+e.icon,title:e.txt}),t("span"," "+e.txt)])])};return o.isAuthenticated()?e.map(i.auth,r):o.isAdmin()?e.map(i.admin,r):e.map(i.unauth,r)};var c=new RegExp("/mypads/group/[^/]*/pad/view/[^/]*"),s=new RegExp("/mypads$");return a.view=function(o,a,l){var d="header",m="footer.container.ombre",E="aside.col-md-3.col-xs-12",p="main.container.ombre",h="section.col-md-9.col-xs-12";return r.wantExpandedPad()&&t.route().match(c)&&(d+=".hidden",m+=".hidden",E+=".hidden",p="main.container-fluid.ombre",h="section.col-md-12.col-xs-12"),t.route().match(s)&&(h+=".groupList"),[t(d,[t("ul.lang.container",e.reduce(n.SERVER.languages,function(e,o,i){var r=i===n.USERLANG?"active":"";return e.push(t("li",{class:r,onclick:n.updateLang.bind(null,i)},o)),e},[])),t("div.container.ombre",[t("h1",n.SERVER.title),t("hr.trait",{role:"presentation"}),t("nav",{class:"menu-main"},[t("ul.nav.nav-tabs",u.menuMain())])])]),t(p,[t(h,{config:r.autoExpand},o||""),t(E,a||"")]),t("section",{class:"notification"},i.view(i.controller())),t(m,t("p",[t("span",t.trust(n.LANG.GLOBAL.FOOTER+" | ")),t("a",{href:"/admin",config:t.route},n.LANG.MENU.ADMIN)]))]},a}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../helpers/expandPad.js":5,"../widgets/notification.js":40,"lodash":48,"mithril":49}],23:[function(require,module,exports){
module.exports=function(){var e=require("mithril"),r=require("lodash"),t=require("../configuration.js"),o=require("../auth.js"),i=require("../helpers/form.js"),n=require("../widgets/notification.js"),s=require("./layout.js"),u=require("./user.js"),a=require("../helpers/ready.js"),l={};l.controller=function(){var s={};return document.title=t.SERVER.title,i.initFields(s,["login","password"]),s.submit=function(i){if(i.preventDefault(),!s.data.login()){var u=document.querySelector("input[name=login]");s.data.login(u.value)}if(!s.data.password()){var a=document.querySelector("input[name=password]");s.data.password(a.value)}e.request({method:"POST",url:t.URLS.LOGIN,data:s.data}).then(function(i){o.userInfo(i.user),localStorage.setItem("token",i.token);var s=o.userInfo().lang;s!==t.USERLANG&&t.updateLang(s),document.title=" - "+t.LANG.USER.AUTH.WELCOME+" "+i.user.login+t.SERVER.title,n.success({body:t.LANG.USER.AUTH.SUCCESS});var u=t.unauthUrl();r.isEmpty(u)?e.route("/"):window.location=u},function(e){n.error({body:r.result(t.LANG,e.error)})})},s};var c={};return c.form=function(r){var o=u.view.field.login(r);o.input.attrs.config=i.focusOnInit,o.input.attrs.maxlength=40,o.label.attrs.class="col-sm-4";var n=u.view.field.password(r),s=[n.input];return!1===t.SERVER.useLdap&&s.push(e("p.help-block",[e("a",{href:"/passrecover",config:e.route},t.LANG.USER.PASSWORD_LOST)])),e("form.form-horizontal.col-sm-8.col-sm-offset-2.well",{id:"login-form",onsubmit:r.submit},[e("div",{id:"hide-when-ready",config:a.checkLoop},t.LANG.USER.PLEASE_WAIT),e("fieldset.show-when-ready.hidden",[e("legend",t.LANG.USER.MYPADS_ACCOUNT),e(".form-group",[o.label,e(".col-sm-7",o.input)]),e(".form-group",[n.label,e(".col-sm-7",s)]),e("input.btn.btn-success.pull-right",{form:"login-form",type:"submit",value:t.LANG.USER.LOGIN})])])},c.main=function(r){var o=[e("span",t.LANG.USER.FORM)];return t.SERVER.openRegistration&&!1===t.SERVER.useLdap&&o.push(e("a.small",{href:"/subscribe",config:e.route},t.LANG.USER.ORSUB)),e("section",{class:"user"},[e("h2",o),c.form(r)])},l.view=function(e){return s.view(c.main(e),u.view.aside.common(e))},l}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../helpers/form.js":6,"../helpers/ready.js":7,"../widgets/notification.js":40,"./layout.js":22,"./user.js":35,"lodash":48,"mithril":49}],24:[function(require,module,exports){
module.exports=function(){var e=require("mithril"),r=require("lodash"),t=require("../configuration.js"),o=require("../auth.js"),i=require("../model/group.js"),u=require("../widgets/notification.js");require("../helpers/ready.js");return{controller:function(){if(!o.isAuthenticated())return e.route("/login");e.request({method:"GET",url:t.URLS.LOGOUT,config:o.fn.xhrConfig}).then(function(){o.userInfo(null),localStorage.removeItem("token"),i.init(),document.title=t.SERVER.title,u.success({body:t.LANG.USER.AUTH.SUCCESS_OUT}),e.route("/")},function(o){u.error({body:r.result(t.LANG,o.error)}),e.route("/")})},view:function(){}}}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../helpers/ready.js":7,"../model/group.js":9,"../widgets/notification.js":40,"lodash":48,"mithril":49}],25:[function(require,module,exports){
module.exports=function(){"use strict";var r=require("mithril"),e=require("lodash"),i=require("../auth.js"),a=require("./layout.js"),o=require("../helpers/form.js"),t=require("./group-form.js"),s=require("../configuration.js"),u=require("../model/group.js"),l=require("../widgets/notification.js"),n={};n.controller=function(){if(!i.isAuthenticated())return s.unauthUrl(!0),r.route("/login");var a={groupParams:r.prop(!0)},t=r.route.param("pad"),n=r.route.param("group"),p=function(){if(a.addView=r.prop(!t),document.title=a.addView()?s.LANG.GROUP.PAD.ADD:s.LANG.GROUP.PAD.EDIT,document.title+=" - "+s.SERVER.title,a.fields=["name","visibility","password","readonly"],o.initFields(a,a.fields),a.group=u.groups()[n],!a.addView()){a.pad=u.pads()[t],e.map(e.keys(a.pad),function(e){a.data[e]=r.prop(a.pad[e])});var i=[a.data.visibility(),a.data.readonly()];a.groupParams=r.prop(e.every(i,e.isNull)),a.data.password=r.prop("")}};return e.isEmpty(u.groups())?u.fetch(p):p(),a.submit=function(o){o.preventDefault();var p=function(){return a.addView()?{method:"POST",url:s.URLS.PAD,successMsg:s.LANG.GROUP.INFO.PAD_ADD_SUCCESS}:{method:"PUT",url:s.URLS.PAD+"/"+t,successMsg:s.LANG.GROUP.INFO.PAD_EDIT_SUCCESS}}();a.groupParams()&&(a.data.visibility(null),a.data.password(null),a.data.readonly(null)),a.data.group=r.prop(n),r.request({method:p.method,url:p.url,data:e.assign(a.data,{auth_token:i.token()})}).then(function(e){var i=u.pads();if(i[e.key]=e.value,u.pads(i),a.addView()){var o=u.groups();o[n].pads.push(e.key),u.groups(o)}l.success({body:p.successMsg}),r.route("/mypads/group/"+n+"/view")},function(r){l.error({body:e.result(s.LANG,r.error)})})},a};var p={};return p.groupParams=function(e){var i=s.LANG.GROUP,a=r("i",{class:"mp-tooltip glyphicon glyphicon-info-sign","data-msg":i.INFO.GROUP_PARAMS});return{label:r("label",[r("input",{name:"groupParams",type:"checkbox",checked:e.groupParams(),onchange:r.withAttr("checked",e.groupParams)}),i.FIELD.GROUP_PARAMS,a]),icon:a}},p.form=function(i){var a=t.views.field.name(i);e.assign(a.input.attrs,{config:o.focusOnInit});var u="restricted"===i.group.visibility,l=t.views.field.visibility(i,u);e.assign(l.label.attrs,{style:"clear: left;"});var n=t.views.field.password(i),d=t.views.field.readonly(i),c=p.groupParams(i),m=[r(".form-group",[a.label,r(".col-sm-7",a.input)]),r(".form-group",[r(".col-sm-7.col-sm-offset-4",[r(".checkbox",[c.label])])])];return i.groupParams()||(m.push(r(".form-group",[l.label,r(".col-sm-7",l.select)])),"private"===i.data.visibility()&&m.push(r(".form-group",[n.label,r(".col-sm-7",n.input)])),i.addView()||m.push(r(".form-group",[r(".col-sm-7.col-sm-offset-4",[r(".checkbox",[d.label])])]))),r("form.form-horizontal",{id:"pad-form",onsubmit:i.submit},[r("fieldset",[r("legend",s.LANG.GROUP.PAD.PAD),r("div",m)]),r("input.btn.btn-success.pull-right",{form:"pad-form",type:"submit",value:s.LANG.ACTIONS.SAVE})])},p.main=function(e){return r("section",{class:"user group-form"},[r("h2",e.addView()?s.LANG.GROUP.PAD.ADD:s.LANG.GROUP.PAD.EDIT),p.form(e)])},p.aside=function(){return r("section.user-aside",[r("h2",s.LANG.ACTIONS.HELP),r("article.well",r.trust(s.LANG.GROUP.ADD_HELP))])},n.view=function(r){return a.view(p.main(r),p.aside(r))},n}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../helpers/form.js":6,"../model/group.js":9,"../widgets/notification.js":40,"./group-form.js":17,"./layout.js":22,"lodash":48,"mithril":49}],26:[function(require,module,exports){
module.exports=function(){"use strict";var r=require("mithril"),e=require("lodash"),o=require("../auth.js"),t=require("../configuration.js"),s=require("../widgets/notification.js");return function(u,i){var n=o.userInfo();e.includes(n.bookmarks.pads,u)?e.pull(n.bookmarks.pads,u):n.bookmarks.pads.push(u),r.request({url:t.URLS.USERMARK,method:"POST",data:{type:"pads",key:u,auth_token:o.token()}}).then(function(){s.success({body:t.LANG.GROUP.MARK_SUCCESS}),i&&i()},function(r){return s.error({body:e.result(t.LANG,r.error)})})}}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../widgets/notification.js":40,"lodash":48,"mithril":49}],27:[function(require,module,exports){
module.exports=function(){"use strict";var e=require("mithril"),r=require("lodash"),o=require("../auth.js"),t=require("../configuration.js"),u=require("../model/group.js"),n=require("../widgets/notification.js"),i=require("./layout.js"),a={};a.controller=function(){if(!o.isAuthenticated())return t.unauthUrl(!0),e.route("/login");document.title=t.LANG.GROUP.PAD.MOVE_TITLE+" - "+t.SERVER.title;var i={data:{newGroup:e.prop()}},a=e.route.param("group"),s=function(){i.selectedGroups=r(u.groups()).values().filter(function(e){return r.includes(e.admins,o.userInfo()._id)&&e._id!==a}).value(),i.group=u.groups()[a]};return r.isEmpty(u.groups())?u.fetch(s):s(),i.movePads=function(s){s.preventDefault();var p,l=r.clone(u.pads(),!0),c=r.reduce(u.pads(),function(e,r,o){return r.group===a&&(r.group=i.data.newGroup(),l[o]=r,e.push(r)),e},[]),d=function(u){e.request({method:"PUT",url:t.URLS.PAD+"/"+u._id,data:r.assign(u,{auth_token:o.token()})}).then(p,function(e){n.error({body:r.result(t.LANG,e.error)})})};(p=function(o){o&&(r.pull(u.groups()[a].pads,o.key),u.groups()[i.data.newGroup()].pads.push(o.key)),c.length?d(c.pop()):(u.pads(l),n.success({body:t.LANG.GROUP.INFO.PAD_MOVE_SUCCESS}),e.route("/mypads/group/"+i.data.newGroup()+"/view"))})()},i};var s={};return s.groups=function(o){var u=e("label.col-sm-4",{for:"group"},t.LANG.GROUP.MYGROUPS),n=function(){var u=r.map(o.selectedGroups,function(r){return e("option",{value:r._id},r.name)});return u.length>0?(u.splice(0,0,e("option")),e("select.form-control",{name:"group",required:!0,value:o.data.newGroup(),onchange:e.withAttr("value",o.data.newGroup)},u)):e("div",t.LANG.GROUP.INFO.PAD_MOVE_NOGROUP)}();return{label:u,icon:e("i",{class:"mp-tooltip glyphicon glyphicon-info-sign","data-msg":t.LANG.GROUP.INFO.PAD_MOVE}),select:n}},s.form=function(r){var o=s.groups(r),u=[e(".form-group",[o.label,o.icon,e(".col-sm-7",o.select)])];return r.selectedGroups.length>0&&u.push(e("input.btn.btn-success.pull-right",{form:"padmove-form",type:"submit",value:t.LANG.ACTIONS.SAVE})),e("form.form-horizontal",{id:"padmove-form",onsubmit:r.movePads},u)},s.main=function(r){var o="/mypads/group/"+r.group._id;return e("section",{class:"padmove user group-form"},[e("h2",[e("span",t.LANG.GROUP.PAD.MOVE_TITLE),e("a",{href:o+"/view",config:e.route,title:t.LANG.GROUP.VIEW},r.group.name)]),s.form(r)])},s.aside=function(){return e("section.user-aside",[e("h2",t.LANG.ACTIONS.HELP),e("article.well",e.trust(t.LANG.GROUP.PAD.MOVE_HELP))])},a.view=function(e){return i.view(s.main(e),s.aside(e))},a}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../model/group.js":9,"../widgets/notification.js":40,"./layout.js":22,"lodash":48,"mithril":49}],28:[function(require,module,exports){
module.exports=function(){"use strict";var r=require("mithril"),e=require("lodash"),t=require("../auth.js"),o=require("../configuration.js"),u=(require("../model/group.js"),require("../widgets/notification.js")),i={};return i.controller=function(){if(!t.isAuthenticated())return o.unauthUrl(!0),r.route("/login");var i=r.route.param("pad"),n=r.route.param("group");window.confirm(o.LANG.GROUP.INFO.CHAT_HISTORY_REMOVE_SURE)?r.request({method:"DELETE",url:o.URLS.PAD+"/chathistory/"+i,data:{auth_token:t.token()}}).then(function(e){u.success({body:o.LANG.GROUP.INFO.CHAT_HISTORY_REMOVE_SUCCESS}),r.route("/mypads/group/"+n+"/view")},function(r){u.error({body:e.result(o.LANG,r.error)})}):r.route("/mypads/group/"+n+"/view")},i.view=function(){},i}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../model/group.js":9,"../widgets/notification.js":40,"lodash":48,"mithril":49}],29:[function(require,module,exports){
module.exports=function(){"use strict";var r=require("mithril"),e=require("lodash"),u=require("../auth.js"),o=require("../configuration.js"),t=require("../model/group.js"),i=require("../widgets/notification.js"),n={};return n.controller=function(){if(!u.isAuthenticated())return o.unauthUrl(!0),r.route("/login");var n=r.route.param("pad"),a=r.route.param("group");window.confirm(o.LANG.GROUP.INFO.PAD_REMOVE_SURE)?r.request({method:"DELETE",url:o.URLS.PAD+"/"+n,data:{auth_token:u.token()}}).then(function(u){var s=t.pads();delete s[u.key],t.pads(s);var d=t.groups();e.pull(d[a].pads,n),t.groups(d),i.success({body:o.LANG.GROUP.INFO.PAD_REMOVE_SUCCESS}),r.route("/mypads/group/"+a+"/view")},function(r){i.error({body:e.result(o.LANG,r.error)})}):r.route("/mypads/group/"+a+"/view")},n.view=function(){},n}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../model/group.js":9,"../widgets/notification.js":40,"lodash":48,"mithril":49}],30:[function(require,module,exports){
module.exports=function(){"use strict";var o=require("../configuration.js");return function(t,i){var r=window.location,n=r.protocol+"//"+r.host+r.pathname+"?/mypads/group/"+t,a=i?"/pad/view/"+i:"/view";window.prompt(o.LANG.GROUP.SHARE_LINK,n+a)}}.call(this);
},{"../configuration.js":3}],31:[function(require,module,exports){
module.exports=function(){"use strict";var i=require("mithril"),r=require("lodash"),e=require("js-base64").Base64.encode,t=require("../configuration.js"),n=require("../auth.js"),a=require("./layout.js"),s=require("../model/group.js"),o=require("./pad-mark.js"),u=require("./pad-share.js"),p=require("../helpers/expandPad.js"),d=require("../helpers/ready.js"),l={};l.controller=function(){var e={group:{},pad:{},sendPass:i.prop(!1),password:i.prop(""),showIframe:i.prop(!0)};e.isAuth=n.isAuthenticated(),e.isGuest=!e.isAuth,e.bookmarks=e.isAuth?n.userInfo().bookmarks.pads:[],e.gid=i.route.param("group"),e.pid=i.route.param("pad");var a=function(a){if(a)return i.route("/mypads");var o=function(){var a=e.isGuest?s.tmp():s;if(e.group=a.groups()[e.gid]||{},e.pad=a.pads()[e.pid],!e.pad)return i.route("/mypads");document.title=t.LANG.GROUP.PAD.PAD+" "+e.pad.name,document.title+=" - "+t.SERVER.title,e.isAdmin=function(){return!(!e.isAuth||!e.group.admins)&&r.includes(e.group.admins,n.userInfo()._id)}()};s.pads()[e.pid]?o():(e.isGuest=!0,s.fetchObject({group:e.gid,pad:e.pid},void 0,o))},o=function(){if(e.isAuth)return r.partial(s.fetch,a);var i={group:e.gid,pad:e.pid};return r.partial(s.fetchObject,i,void 0,a)}();return r.isEmpty(s.pads())?o():a(),e.submit=function(i){i.preventDefault(),s.fetchObject({group:e.gid,pad:e.pid},e.password(),function(i){if(i)return e.sendPass(!1);var r=e.isGuest?s.tmp():s;e.group=r.groups()[e.gid],e.pad=r.pads()[e.pid],e.sendPass(!0)})},e};var c={};return c.passForm=function(r){return i("form",{id:"password-form",config:d.inFrame,onsubmit:r.submit},[i("label.block",{for:"mypadspassword"},t.LANG.USER.PASSWORD),i("input.block",{type:"password",required:!0,placeholder:t.LANG.USER.UNDEF,value:r.password(),oninput:i.withAttr("value",r.password)}),i("input.ok.block",{form:"password-form",type:"submit",value:t.LANG.USER.OK})])},c.pad=function(r){var a=n.userInfo(),s=r.sendPass()?"&mypadspassword="+e(r.password()):"",o=n.isAuthenticated()?"&auth_token="+n.token():"",u="",d="";if(a)if((a.useLoginAndColorInPads||t.SERVER.useFirstLastNameInPads)&&a.color&&(d="&userColor="+a.color),t.SERVER.useFirstLastNameInPads){var l=a.firstname?a.firstname:"",c=a.lastname?a.lastname:"";u="&userName="+l+" "+c}else a.useLoginAndColorInPads&&(u="&userName="+a.login);var f=t.URLS.RAWBASE.replace("mypads/","")+"p/"+r.pad._id+"?"+s+o+d+u;return[i("p.text-right",[i("a.btn.btn-default.expand-toggle",{href:"#",title:t.LANG.GROUP.PAD.EXPAND,onclick:function(i){return i.preventDefault(),p.isExpanded()?p.reduceIframe():p.expandIframe(),!0}},[i("i.glyphicon.glyphicon-resize-full")]),i("a.btn.btn-default.new-window",{href:f,target:"_blank",title:t.LANG.GROUP.PAD.OPEN_TAB,onclick:function(){return p.reduceIframe(!1),r.showIframe(!1),!0}},[i("i.glyphicon.glyphicon-new-window")])]),function(){if(r.showIframe())return i("iframe",{src:f})}()]},c.main=function(e){var n=function(){return e.pad?"private"===e.pad.visibility:e.group.visibility&&"private"===e.group.visibility}();if(!e.isAdmin&&n&&!e.sendPass())return c.passForm(e);var a="/mypads/group/"+e.gid,s=t.LANG.GROUP;return i("section",{class:"group"},[i(".btn-group.pull-right",[function(){var r=e.group&&e.group.visibility&&"restricted"!==e.group.visibility,n=e.pad.visibility&&"restricted"!==e.pad.visibility;if(r||n)return i("button.btn.btn-default",{title:t.LANG.GROUP.SHARE,onclick:u.bind(e,e.gid,e.pad._id)},[i("i.glyphicon glyphicon-link"),i("span"," "+t.LANG.GROUP.SHARE)])}(),function(){if(e.isAdmin)return i("a.btn.btn-default",{href:a+"/pad/edit/"+e.pad._id,config:i.route,title:t.LANG.MENU.CONFIG},[i("i.glyphicon glyphicon-wrench"),i("span"," "+t.LANG.MENU.CONFIG)])}(),function(){if(e.isAdmin)return i("a.btn.btn-danger",{href:a+"/pad/remove/"+e.pad._id,config:i.route,title:t.LANG.GROUP.REMOVE},[i("i.glyphicon glyphicon-trash"),i("span"," "+t.LANG.GROUP.REMOVE)])}()]),i("h2",[function(){if(!e.isGuest){var t=r.includes(e.bookmarks,e.pad._id);return i("button.btn.btn-link.btn-lg",{title:t?s.UNMARK:s.BOOKMARK,onclick:function(){o(e.pad._id)}},[i("i",{class:"glyphicon glyphicon-star"+(t?"":"-empty"),title:t?s.UNMARK:s.BOOKMARK})])}}(),i("span",t.LANG.GROUP.PAD.PAD+" "+e.pad.name),function(){if(e.group&&e.group.name)return[i("br"),i("span.h3",[" (",t.LANG.GROUP.PAD.FROM_GROUP+" ",i("a",{href:a+"/view",config:i.route,title:t.LANG.GROUP.VIEW},e.group.name),")"])]}()]),i("section.pad",c.pad(e))])},c.aside=function(){return i("section.user-aside",[i("h2",t.LANG.ACTIONS.HELP),i("article.well",i.trust(t.LANG.GROUP.PAD.VIEW_HELP))])},l.view=function(i){var r=!1;return i.pad&&i.pad.visibility&&(r="public"===i.pad.visibility),n.isAuthenticated()&&(r=!0),a.view(c.main(i),c.aside(),r)},l}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../helpers/expandPad.js":5,"../helpers/ready.js":7,"../model/group.js":9,"./layout.js":22,"./pad-mark.js":26,"./pad-share.js":30,"js-base64":46,"lodash":48,"mithril":49}],32:[function(require,module,exports){
module.exports=function(){var e=require("mithril"),r=require("lodash"),t=require("../configuration.js"),o=require("../auth.js"),s=require("../helpers/form.js"),i=require("../widgets/notification.js"),n=require("./layout.js"),u=require("./user.js"),a={};a.controller=function(){o.isAuthenticated()&&e.route("/logout"),document.title=t.LANG.USER.PASSRECOVER+" - "+t.SERVER.title;var n={token:e.route.param("token")},u=n.token?["password","passwordConfirm"]:["email"];s.initFields(n,u);var a=function(e){i.error({body:r.result(t.LANG,e.error)})};return n.submit=function(r){r.preventDefault(),e.request({method:"POST",url:t.URLS.PASSRECOVER,data:n.data}).then(function(){i.success({body:t.LANG.USER.INFO.PASSRECOVER_SUCCESS})},a)},n.changePass=function(r){r.preventDefault(),e.request({method:"PUT",url:t.URLS.PASSRECOVER+"/"+n.token,data:n.data}).then(function(){e.route("/login"),i.success({body:t.LANG.USER.INFO.CHANGEPASS_SUCCESS})},a)},n};var l={};return l.form=function(r){var o=u.view.field.email(r);return e("form",{id:"passrec-form",onsubmit:r.submit},[e("fieldset",[e(".form-group",[o.label,o.input])]),e("input.btn.btn-success.pull-right.col-sm-12",{form:"passrec-form",type:"submit",value:t.LANG.USER.OK})])},l.formChange=function(r){var o=u.view.field.password(r),s=u.view.field.passwordConfirm(r);return o.label.attrs.class="col-sm-4",s.label.attrs.class="col-sm-4",e("form.form-horizontal",{id:"passchange-form",onsubmit:r.changePass},[e("fieldset",[e(".form-group",[o.label,e(".col-sm-7",o.input)]),e(".form-group",[s.label,e(".col-sm-7",s.input)])]),e("input.btn.btn-success.pull-right",{form:"passchange-form",type:"submit",value:t.LANG.USER.OK})])},l.main=function(r){return e("section",{class:"user"},[e("h2",t.LANG.USER.PASSRECOVER),r.token?l.formChange(r):l.form(r)])},a.view=function(e){return n.view(l.main(e),u.view.aside.common(e))},a}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../helpers/form.js":6,"../widgets/notification.js":40,"./layout.js":22,"./user.js":35,"lodash":48,"mithril":49}],33:[function(require,module,exports){
module.exports=function(){var e=require("lodash"),o=require("mithril"),r=require("../configuration.js"),t=require("../helpers/form.js"),a=require("../model/group.js"),n=require("../widgets/notification.js"),i=require("../auth.js"),s=require("./layout.js"),l=require("./user.js"),u=require("../helpers/ready.js"),d={};d.controller=function(){var s={adminView:o.prop(!1)};if(s.profileView=o.prop("/myprofile"===o.route()),document.title=s.profileView()?r.LANG.USER.PROFILE:r.LANG.USER.SUBSCRIBE,document.title+=" - "+r.SERVER.title,s.profileView()&&!i.isAuthenticated())return r.unauthUrl(!0),o.route("/login");r.SERVER.useLdap&&s.profileView()?s.fields=["organization","lang","color"]:s.fields=["login","password","passwordConfirm","email","firstname","lastname","organization","lang","color"],s.profileView()&&s.fields.push("passwordCurrent","useLoginAndColorInPads"),t.initFields(s,s.fields),s.profileView()?e.map(s.fields,function(r){e.startsWith(r,"password")||(s.data[r]=o.prop(i.userInfo()[r]))}):s.data.lang=o.prop(r.USERLANG);var l=function(o){return n.error({body:e.result(r.LANG,o.error)})};return s.submit={},s.submit.subscribe=function(e){e.preventDefault(),s.data.password()!==s.data.passwordConfirm()?(n.warning({body:r.LANG.USER.ERR.PASSWORD_MISMATCH}),document.querySelector('input[name="passwordConfirm"]').focus()):o.request({method:"POST",url:r.URLS.USER,data:s.data}).then(function(e){if(!e.value.active){var t=r.LANG.USER.AUTH.SUBSCRIBE_CONFIRM_SUCCESS;return o.route("/"),n.success({body:t})}i.userInfo(e.value),n.success({body:r.LANG.USER.AUTH.SUBSCRIBE_SUCCESS});var a=i.userInfo().lang;a!==r.USERLANG&&r.updateLang(a),o.request({method:"POST",url:r.URLS.LOGIN,data:s.data}).then(function(e){localStorage.setItem("token",e.token),o.route("/")},l)},l)},s.submit.profileSave=function(t){t.preventDefault();var a=function(){var e=s.data.password();e&&e===s.data.passwordConfirm()||s.data.password(s.data.passwordCurrent())};o.request({method:"POST",url:r.URLS.CHECK,data:{login:i.userInfo().login,password:s.data.passwordCurrent,auth_token:i.token()}}).then(function(){r.SERVER.useLdap?(s.data.login=i.userInfo().login,s.data.email=i.userInfo().email,s.data.firstname=i.userInfo().firstname,s.data.lastname=i.userInfo().lastname,s.data.password=s.data.passwordCurrent):a(),o.request({method:"PUT",url:r.URLS.USER+"/"+i.userInfo().login,data:e.assign(s.data,{auth_token:i.token()})}).then(function(e){i.userInfo(e.value),n.success({body:r.LANG.USER.AUTH.PROFILE_SUCCESS})},l)},l)},s.removeAccount=function(){var e=window.prompt(r.LANG.USER.INFO.REMOVE_ACCOUNT_SURE);if(e){var t=i.userInfo().login;o.request({method:"POST",url:r.URLS.CHECK,data:{login:t,password:e,auth_token:i.token()}}).then(function(){o.request({method:"DELETE",url:r.URLS.USER+"/"+t,data:{auth_token:i.token()}}).then(function(){localStorage.removeItem("token"),i.userInfo(null),a.init(),document.title=r.SERVER.title,o.route("/"),n.success({body:r.LANG.USER.INFO.REMOVE_ACCOUNT_SUCCESS})},l)},l)}},s};var c={};return d.views=c,c.removeAccount=function(e){return[o("button.btn.btn-danger",{onclick:e.removeAccount},r.LANG.USER.REMOVE_ACCOUNT),o("i",{class:"glyphicon glyphicon-info-sign mp-tooltip mp-tooltip-left","data-msg":r.LANG.USER.INFO.REMOVE_ACCOUNT})]},c.form=function(a){var n=e.reduce(a.fields,function(e,o){return e[o]=l.view.field[o](a),e},{});a.adminView()&&(delete n.password.input.attrs.required,delete n.passwordConfirm.input.attrs.required);var i;if(r.SERVER.useLdap&&a.profileView()?i=[o(".form-group",[n.lang.label,n.lang.icon,o(".col-sm-7",n.lang.select)])]:(n.email.label.attrs.class="col-sm-4",i=[o(".form-group",[n.email.label,o(".col-sm-7",n.email.input)]),o(".form-group",[n.password.label,o(".col-sm-7",n.password.input)]),o(".form-group",[n.passwordConfirm.label,o(".col-sm-7",n.passwordConfirm.input)]),o(".form-group",[n.lang.label,o(".col-sm-7",n.lang.select)])]),a.profileView()){var s=l.view.field.passwordCurrent(a);s.input.attrs.config=t.focusOnInit,i.splice(1,0,o(".form-group",[s.label,o(".col-sm-7",s.input)])),i.push(o(".form-group",[o(".col-sm-7.col-sm-offset-4",[o(".checkbox",[n.useLoginAndColorInPads.label])])]))}else if(!a.adminView()){var d=n.login;d.input.attrs.config=t.focusOnInit,d.input.attrs.maxlength=40,d.label.attrs.class="col-sm-4",i.splice(0,0,o(".form-group",[d.label,o(".col-sm-7",[d.input])]))}var m,f=r.LANG.USER,p=a.profileView()||a.adminView();return r.SERVER.useLdap&&a.profileView()?(n.organization.label.attrs.class="col-sm-4",n.color.label.attrs.class="col-sm-4",m=[o("legend.opt",r.LANG.USER.OPTIONAL_FIELDS),o(".form-group",[n.organization.label,o(".col-sm-7",n.organization.input)]),o(".form-group",[n.color.label,o(".col-sm-7",n.color.input)])]):(n.firstname.label.attrs.class="col-sm-4",n.lastname.label.attrs.class="col-sm-4",n.organization.label.attrs.class="col-sm-4",n.color.label.attrs.class="col-sm-4",m=[o("legend.opt",r.LANG.USER.OPTIONAL_FIELDS),o(".form-group",[n.firstname.label,o(".col-sm-7",n.firstname.input)]),o(".form-group",[n.lastname.label,o(".col-sm-7",n.lastname.input)]),o(".form-group",[n.organization.label,o(".col-sm-7",n.organization.input)]),o(".form-group",[n.color.label,o(".col-sm-7",n.color.input)])]),o("form.form-horizontal",{id:"subscribe-form",onsubmit:p?a.submit.profileSave:a.submit.subscribe},[o("div",{id:"hide-when-ready",config:u.checkLoop},r.LANG.USER.PLEASE_WAIT),o("fieldset.show-when-ready.hidden",[o("legend",r.LANG.USER.MANDATORY_FIELDS),o("div",i)]),o("fieldset.show-when-ready.hidden",m),o(".form-group.show-when-ready.hidden",[o(".col-sm-12",[o("input.btn.btn-success pull-right",{form:"subscribe-form",type:"submit",value:p?r.LANG.ACTIONS.SAVE:f.REGISTER}),a.profileView()?c.removeAccount(a):""])])])},c.main=function(e){var t=[c.form(e)];return e.profileView()?t.splice(0,0,o("h2",r.LANG.USER.PROFILE+" : "+i.userInfo().login)):t.splice(0,0,o("h2",r.LANG.USER.SUBSCRIBE)),o("section",{class:"user"},t)},d.view=function(e){return s.view(c.main(e),e.profileView()?l.view.aside.profile(e):l.view.aside.common(e))},d}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../helpers/form.js":6,"../helpers/ready.js":7,"../model/group.js":9,"../widgets/notification.js":40,"./layout.js":22,"./user.js":35,"lodash":48,"mithril":49}],34:[function(require,module,exports){
module.exports=function(){"use strict";var e=require("mithril"),t=require("lodash"),n=require("../configuration.js"),i=require("../auth.js"),r=require("../model/group.js"),o=require("./layout.js"),u=require("../widgets/notification.js"),s=require("../widgets/tag.js"),l=require("../helpers/form.js"),a=require("../helpers/cleanupXss.js"),c={};c.invite=function(o,s){var l={invite:o.isInvite,gid:o.group._id,loginsOrEmails:o.tag.current,auth_token:i.token()};e.request({method:"POST",url:n.URLS.GROUP+"/invite",data:l}).then(function(e){var t,i=o.isInvite?"INVITE_USER":"ADMIN_SHARE";e.present.length>0&&(t=n.LANG.GROUP[i].SUCCESS+a.cleanup(e.present.join(", ")),u.success({body:t})),e.absent.length>0&&(t=n.LANG.GROUP[i].FAILURE+a.cleanup(e.absent.join(", ")),u.warning({body:t})),0===e.absent.length&&0===e.present.length&&u.success({body:n.LANG.NOTIFICATION.SUCCESS_GENERIC}),r.fetch(function(){s&&s(e)})},function(e){u.error({body:t.result(n.LANG,e.error)})})},c.controller=function(){if(!i.isAuthenticated())return n.unauthUrl(!0),e.route("/login");var o=i.userInfo(),u={};u.isInvite="invite"===e.route.param("action");var l=function(){var i=e.route.param("group");u.group=r.groups()[i];var l=r.users();l=t.reduce(l,function(e,t){return e.byId[t._id]=t,e.byLogin[t.login]=t,e.byEmail[t.email]=t,e},{byId:{},byLogin:{},byEmail:{}}),u.users=t.merge(l.byLogin,l.byEmail);var a=t(l.byId).pick(u.isInvite?u.group.users:u.group.admins).values().pluck("login").value();u.tag=new s.controller({name:"user-invite",label:n.LANG.GROUP.INVITE_USER.USERS_SELECTION,current:a,placeholder:n.LANG.GROUP.INVITE_USER.PLACEHOLDER,tags:t.pull(t.keys(u.users),o.login,o.email)})};return t.isEmpty(r.groups())?r.fetch(l):l(),u.userlistAdd=function(e){var n=o.userlists[e];u.tag.current=t.union(u.tag.current,t.pluck(n.users,"login"))},u.submit=function(t){t.preventDefault();var n=function(t){e.route("/mypads/group/"+t.value._id+"/view")};c.invite(u,n)},u};var g={};return g.userlistField=function(r){return e("div",[e(".form-group",[e("label.col-sm-4",{for:"userlists"},n.LANG.MENU.USERLIST),e("i",{class:"mp-tooltip glyphicon glyphicon-info-sign","data-msg":n.LANG.USERLIST.INFO.USER_INVITE}),e(".col-sm-7",e("select.form-control",{name:"userlists",onchange:e.withAttr("value",r.userlistAdd)},t.map(t.pairs(i.userInfo().userlists),function(t){return e("option",{value:t[0]},t[1].name)}).concat(e("option",{selected:!0,disabled:!0,hidden:!0,value:""}))))])])},g.userField=function(t){var i=s.views.input(t);return i.attrs.config=l.focusOnInit,e("div.tag",[e(".form-group",[e("label.col-sm-4",{for:t.name},t.label),e("i",{class:"mp-tooltip glyphicon glyphicon-info-sign tag","data-msg":n.LANG.GROUP.INVITE_USER.INPUT_HELP}),e(".col-sm-7",[e(".input-group",[i,e("span.input-group-btn",e("button.btn.btn-default",{type:"button",onclick:function(){t.add(document.getElementById(t.name+"-input"))}},n.LANG.USER.OK))]),s.views.datalist(t)])]),e(".form-group",[e("label.col-sm-4",n.LANG.GLOBAL.OR),e("i",{class:"mp-tooltip glyphicon glyphicon-info-sign tag","data-msg":n.LANG.USERLIST.FIELD.USERSAREA_HELP}),e(".col-sm-7",[e("textarea.form-control",{name:"usersArea",placeholder:n.LANG.USERLIST.FIELD.USERSAREA_PLACEHOLDER}),e("button.btn.btn-default.pull-right",{type:"button",onclick:function(){t.addMultiple(document.querySelector("textarea[name=usersArea]"))}},n.LANG.USER.OK)])])])},g.form=function(t){var i=n.LANG.GROUP;return e("form.form-horizontal",{id:"group-form",onsubmit:t.submit},[e("fieldset",[e("legend",i.INVITE_USERLIST),e("div",g.userlistField(t))]),e("fieldset",[e("legend",t.isInvite?i.INVITE_USER.IU:i.ADMIN_SHARE.AS),e("div",g.userField(t.tag))]),e("fieldset",[e("legend",n.LANG.GROUP.INVITE_USER.USERS_SELECTED),e("div",s.views.tagslist(t.tag))]),e("input.btn.btn-success.pull-right",{form:"group-form",type:"submit",value:n.LANG.ACTIONS.SAVE})])},g.main=function(t){return e("section",{class:"user group-form"},[e("h2",n.LANG.GROUP.GROUP+" "+t.group.name),g.form(t)])},g.aside=function(t){var i=n.LANG.GROUP;return e("section.user-aside",[e("h2",n.LANG.ACTIONS.HELP),e("article.well",[e("h3",t.isInvite?i.INVITE_USER.IU:i.ADMIN_SHARE.AS),e("section",e.trust(n.LANG.GROUP.INVITE_USER.HELP))])])},c.view=function(e){return o.view(g.main(e),g.aside(e))},c}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../helpers/cleanupXss.js":4,"../helpers/form.js":6,"../model/group.js":9,"../widgets/notification.js":40,"../widgets/tag.js":41,"./layout.js":22,"lodash":48,"mithril":49}],35:[function(require,module,exports){
module.exports=function(){var i=require("lodash"),e=require("mithril"),n=require("../configuration.js"),o=require("../helpers/form.js"),a={};return a.view={},a.view.icon={},a.view.icon.optional=function(){return e("i",{class:"mp-tooltip glyphicon glyphicon-info-sign","data-msg":n.LANG.USER.INFO.OPTIONAL})},a.view.icon.firstname=a.view.icon.optional,a.view.icon.lastname=a.view.icon.optional,a.view.icon.organization=a.view.icon.optional,a.view.icon.login=function(i){return o.icon(i,"login",n.LANG.USER.INFO.LOGIN,n.LANG.USER.ERR.LOGIN)},a.view.icon.password=function(i,o){var a={password:n.LANG.USER.INFO.PASSWORD_BEGIN+n.SERVER.passwordMin+" "+n.LANG.GLOBAL.AND+" "+n.SERVER.passwordMax+n.LANG.USER.INFO.PASSWORD_END,passwordConfirm:n.LANG.USER.INFO.PASSWORD_CHECK,passwordCurrent:n.LANG.USER.INFO.PASSWORD_CURRENT},t=["glyphicon glyphicon-exclamation-sign"];return i.valid[o]()&&(t=["glyphicon glyphicon-info-sign"]),t.push("mp-tooltip"),e("i",{class:t.join(" "),"data-msg":a[o]})},a.view.icon.email=function(i){return o.icon(i,"email",n.LANG.USER.INFO.EMAIL,n.LANG.USER.ERR.EMAIL)},a.view.icon.color=function(i){return o.icon(i,"color",n.LANG.USER.INFO.COLOR,n.LANG.USER.ERR.COLOR)},a.view.field={},a.view.field.login=function(e){var t=o.field(e,"login",n.LANG.USER.USERNAME,a.view.icon.login(e));return i.assign(t.input.attrs,{type:"text",placeholder:n.LANG.USER.USERNAME,required:!0}),t},a.view.field._pass=function(i,t,r,l){var s=n.SERVER.passwordMin,c=n.SERVER.passwordMax,u={type:"password",name:t,placeholder:n.LANG.USER.UNDEF,required:!i.profileView||!i.profileView(),oninput:o.handleField.bind(null,i,l)};n.SERVER.useLdap||(u.minlength=s,u.maxlength=c,u.pattern=".{"+s+","+c+"}");var d=a.view.icon.password(i,t);return{label:e("label.col-sm-4",{for:t},[r,d]),input:e("input.form-control",u),icon:d}},a.view.field.password=function(i){return a.view.field._pass(i,"password",n.LANG.USER.PASSWORD)},a.view.field.passwordConfirm=function(i){var e=function(i){return i.data.password()===i.data.passwordConfirm()};return a.view.field._pass(i,"passwordConfirm",n.LANG.USER.PASSCHECK,e)},a.view.field.passwordCurrent=function(e){var o=a.view.field._pass(e,"passwordCurrent",n.LANG.USER.PASSCURRENT);return i.assign(o.label.attrs,{style:{fontWeight:"bold"}}),i.assign(o.input.attrs,{required:!0}),o},a.view.field.email=function(e){var t=o.field(e,"email",n.LANG.USER.EMAIL,a.view.icon.email(e));return i.assign(t.input.attrs,{type:"email",placeholder:n.LANG.USER.EMAIL_SAMPLE,required:!0,value:e.data.email()||""}),t},a.view.field.lang=function(o){var a=e("i",{class:"mp-tooltip glyphicon glyphicon-info-sign","data-msg":n.LANG.USER.INFO.LANG});return{label:e("label.col-sm-4",{for:"lang"},[n.LANG.USER.LANG,a]),select:e("select.form-control",{name:"lang",required:!0,value:o.data.lang(),onchange:e.withAttr("value",o.data.lang)},i.reduce(n.SERVER.languages,function(i,n,o){return i.push(e("option",{value:o},n)),i},[]))}},a.view.field.useLoginAndColorInPads=function(i){return{label:e("label",[e("input",{type:"checkbox",name:"useLoginAndColorInPads",checked:i.data.useLoginAndColorInPads(),onchange:e.withAttr("checked",i.data.useLoginAndColorInPads)}),n.SERVER.useFirstLastNameInPads?n.LANG.USER.USECOLORINPADS:n.LANG.USER.USELOGINANDCOLORINPADS,e("i",{class:"mp-tooltip glyphicon glyphicon-info-sign","data-msg":n.SERVER.useFirstLastNameInPads?n.LANG.USER.INFO.USECOLORINPADS:n.LANG.USER.INFO.USELOGINANDCOLORINPADS})])}},a.view.field.firstname=function(e){var t=o.field(e,"firstname",n.LANG.USER.FIRSTNAME,a.view.icon.firstname(e));return i.assign(t.input.attrs,{type:"text",placeholder:n.LANG.USER.FIRSTNAME}),t},a.view.field.lastname=function(e){var t=o.field(e,"lastname",n.LANG.USER.LASTNAME,a.view.icon.lastname(e));return i.assign(t.input.attrs,{type:"text",placeholder:n.LANG.USER.LASTNAME}),t},a.view.field.organization=function(e){var t=o.field(e,"organization",n.LANG.USER.ORGANIZATION,a.view.icon.organization(e));return i.assign(t.input.attrs,{type:"text",placeholder:n.LANG.USER.ORGANIZATION}),t},a.view.field.color=function(e){var t=o.field(e,"color",n.LANG.USER.COLOR,a.view.icon.color(e));return i.assign(t.input.attrs,{type:"color",placeholder:n.LANG.USER.COLOR_SAMPLE,maxlength:7,pattern:"#[0-9,a-f]{6}"}),t},a.view.aside={common:function(){return e("section.user-aside",[e("h2",n.SERVER.title),e("article.well",e.trust(n.LANG.GLOBAL.DESCRIPTION))])},profile:function(){return e("section.user-aside",[e("h2",n.LANG.ACTIONS.HELP),e("article.well",e.trust(n.LANG.USER.HELP.PROFILE))])}},a}.call(this);
},{"../configuration.js":3,"../helpers/form.js":6,"lodash":48,"mithril":49}],36:[function(require,module,exports){
module.exports=function(){"use strict";var e=require("mithril"),t=require("lodash"),r=require("../configuration.js"),n=require("../auth.js"),i=require("./layout.js"),s=require("../widgets/notification.js"),u=require("../widgets/tag.js"),l=require("../helpers/form.js"),o=require("../model/group.js"),a=require("../helpers/cleanupXss.js"),S={};S.controller=function(){if(!n.isAuthenticated())return r.unauthUrl(!0),e.route("/login");var i={};i.addView=e.prop("/myuserlists/add"===e.route()),i.fields=["name"],l.initFields(i,i.fields);var S=function(){var s=n.userInfo(),l=[];i.addView()||(i.key=e.route.param("key"),i.userlist=s.userlists[i.key],l=t.pluck(i.userlist.users,"login"),i.data.name(i.userlist.name));var o=t.reduce(s.userlists,function(e,r){return t.each(r.users,function(r){t.includes(e,r.login)||(e.push(r.login),e.push(r.email))}),e},[]);i.tag=new u.controller({name:"users",label:r.LANG.GROUP.INVITE_USER.USERS_SELECTION,current:l,placeholder:r.LANG.GROUP.INVITE_USER.PLACEHOLDER,tags:o}),document.title=i.addView()?r.LANG.USERLIST.ADD:r.LANG.USERLIST.EDIT,document.title+=" - "+r.SERVER.title};return t.isEmpty(o.groups())?o.fetch(S):S(),i.submit=function(u){u.preventDefault();var l={method:"POST",url:r.URLS.USERLIST,data:{name:i.data.name(),loginsOrEmails:i.tag.current,auth_token:n.token()}},o=r.LANG.USERLIST.INFO.ADD_SUCCESS;i.addView()||(l.method="PUT",l.url+="/"+i.key,l.data.ulistid=i.key,o=r.LANG.USERLIST.INFO.EDIT_SUCCESS),e.request(l).then(function(t){var i=n.userInfo();i.userlists=t.value,n.userInfo(i),s.success({body:o});var u;t.present.length>0&&(u=r.LANG.USERLIST.INFO.USER_SUCCESS+a.cleanup(t.present.join(", ")),s.success({body:u})),t.absent.length>0&&(u=r.LANG.USERLIST.INFO.USER_FAILURE+a.cleanup(t.absent.join(", ")),s.warning({body:u})),e.route("/myuserlists")},function(e){s.error({body:t.result(r.LANG,e.error)})})},i};var E={};return E.field={},E.field.name=function(e){var n=l.field(e,"name",r.LANG.USERLIST.FIELD.NAME,l.icon(e,"name",r.LANG.USERLIST.INFO.NAME,r.LANG.GROUP.ERR.NAME));return t.assign(n.input.attrs,{placeholder:r.LANG.USERLIST.INFO.NAME,required:!0,maxlength:40,config:l.focusOnInit}),n},E.field.users=function(t){return e("div.tag",[e(".form-group",[e("label.col-sm-4",{for:t.name},[t.label,e("i",{class:"mp-tooltip glyphicon glyphicon-info-sign tag","data-msg":r.LANG.USERLIST.FIELD.USERS_HELP})]),e(".col-sm-7",[e(".input-group",[u.views.input(t),e("span.input-group-btn",e("button.btn.btn-default",{type:"button",onclick:function(){t.add(document.getElementById(t.name+"-input"))}},r.LANG.USER.OK))]),u.views.datalist(t)])]),e(".form-group",[e("label.col-sm-4",[r.LANG.GLOBAL.OR,e("i",{class:"mp-tooltip glyphicon glyphicon-info-sign tag","data-msg":r.LANG.USERLIST.FIELD.USERSAREA_HELP})]),e(".col-sm-7",[e("textarea.form-control",{name:"usersArea",placeholder:r.LANG.USERLIST.FIELD.USERSAREA_PLACEHOLDER}),e("button.btn.btn-default.pull-right",{type:"button",onclick:function(){t.addMultiple(document.querySelector("textarea[name=usersArea]"))}},r.LANG.USER.OK)])])])},E.form=function(t){var n=E.field.name(t);n.label.attrs.class="col-sm-4";var i=[e(".form-group",[n.label,e(".col-sm-7",n.input)])];return e("form.form-horizontal",{id:"ulist-form",onsubmit:t.submit},[e("fieldset",[e("legend",r.LANG.USERLIST.USERLIST),e("div",i)]),e("fieldset",[e("legend",r.LANG.USERLIST.FIELD.USERS),e("div",E.field.users(t.tag))]),e("fieldset",[e("legend",r.LANG.GROUP.INVITE_USER.USERS_SELECTED),e("div",u.views.tagslist(t.tag))]),e("input.btn.btn-success.pull-right",{form:"ulist-form",type:"submit",value:r.LANG.ACTIONS.SAVE})])},E.main=function(t){return e("section",[e("h2",t.addView()?r.LANG.USERLIST.ADD:r.LANG.USERLIST.EDIT),E.form(t)])},E.aside=function(){return e("section.user-aside",[e("h2",r.LANG.ACTIONS.HELP),e("article.well",e.trust(r.LANG.USERLIST.FORM_HELP))])},S.view=function(e){return i.view(E.main(e),E.aside(e))},S}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../helpers/cleanupXss.js":4,"../helpers/form.js":6,"../model/group.js":9,"../widgets/notification.js":40,"../widgets/tag.js":41,"./layout.js":22,"lodash":48,"mithril":49}],37:[function(require,module,exports){
module.exports=function(){"use strict";var r=require("mithril"),e=require("lodash"),t=require("../auth.js"),u=require("../configuration.js"),i=require("../widgets/notification.js"),o={};return o.controller=function(){if(!t.isAuthenticated())return u.unauthUrl(!0),r.route("/login");var o=r.route.param("key");window.confirm(u.LANG.USERLIST.INFO.REMOVE_SURE)?r.request({method:"DELETE",url:u.URLS.USERLIST+"/"+o,data:{auth_token:t.token()}}).then(function(){var e=t.userInfo();delete e.userlists[o],t.userInfo(e),i.success({body:u.LANG.USERLIST.INFO.REMOVE_SUCCESS}),r.route("/myuserlists")},function(r){i.error({body:e.result(u.LANG,r.error)})}):r.route("/myuserlists")},o.view=function(){},o}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../widgets/notification.js":40,"lodash":48,"mithril":49}],38:[function(require,module,exports){
module.exports=function(){"use strict";var t=require("mithril"),e=require("lodash"),r=require("../configuration.js"),i=require("../auth.js"),n=require("./layout.js"),u=require("../model/group.js"),s={};s.controller=function(){if(!i.isAuthenticated())return r.unauthUrl(!0),t.route("/login");document.title=r.LANG.MENU.USERLIST+" - "+r.SERVER.title;var n={},s=function(){n.userlists=i.userInfo().userlists};return e.isEmpty(u.groups())?u.fetch(s):s(),n};var o={};return o.userlist=function(i,n,u){var s="/myuserlists/"+u,o=[t("a.btn.btn-default.btn-xs",{href:s+"/edit",config:t.route,title:r.LANG.GROUP.EDIT},[t("i.glyphicon.glyphicon-pencil")]),t("a.btn.btn-default.btn-xs",{href:s+"/remove",config:t.route,title:r.LANG.GROUP.REMOVE},[t("i.glyphicon.glyphicon-trash.text-danger")])];return t("tr",[t("th",t("a",{href:s+"/edit",config:t.route,title:r.LANG.GROUP.EDIT},n.name)),t("td",e.size(n.uids)),t("td.text-right",o)])},o.main=function(i){var n=e.reduce(i.userlists,function(t,e,r){return t.push(o.userlist(i,e,r)),t},[]);return t("section",[t("h2",[t("span",r.LANG.MENU.USERLIST),t("a.btn.btn-warning.pull-right",{href:"/myuserlists/add",config:t.route},[t("span",r.LANG.USERLIST.ADD)])]),t("section.panel.panel-default",t("table.table.table-stripped",[t("thead",t("tr",[t("th",{scope:"col"}),t("th",{scope:"col"},r.LANG.USERLIST.FIELD.USERS),t("th",{scope:"col"})])),t("tbody",n)]))])},o.aside=function(){return t("section.user-aside",[t("h2",r.LANG.ACTIONS.HELP),t("article.well",t.trust(r.LANG.USERLIST.HELP))])},s.view=function(t){return n.view(o.main(t),o.aside(t))},s}.call(this);
},{"../auth.js":2,"../configuration.js":3,"../model/group.js":9,"./layout.js":22,"lodash":48,"mithril":49}],39:[function(require,module,exports){
module.exports=function(){var e=require("mithril"),r=require("./modules/home.js"),s=require("./modules/login.js"),o=require("./modules/logout.js"),u=require("./modules/passrecover.js"),m=require("./modules/accountconfirm.js"),d=require("./modules/subscribe.js"),i=require("./modules/bookmark.js"),p=require("./modules/userlist.js"),a=require("./modules/userlist-form.js"),l=require("./modules/userlist-remove.js"),t=require("./modules/group.js"),g=require("./modules/group-view.js"),n=require("./modules/group-form.js"),y=require("./modules/group-remove.js"),q=require("./modules/pad-form.js"),j=require("./modules/pad-remove.js"),v=require("./modules/pad-remove-chat-history.js"),c=require("./modules/pad-view.js"),k=require("./modules/pad-move.js"),f=require("./modules/user-invitation.js"),h=require("./modules/admin.js"),b=require("./modules/admin-logout.js"),w=require("./modules/admin-users.js"),x=require("./modules/admin-users-form.js"),B=require("./modules/admin-users-remove.js"),E={model:{}};E.model.routes={"/":r,"/login":s,"/logout":o,"/passrecover":u,"/passrecover/:token":u,"/accountconfirm/:token":m,"/subscribe":d,"/myprofile":d,"/mybookmarks":i,"/myuserlists":p,"/myuserlists/add":a,"/myuserlists/:key/edit":a,"/myuserlists/:key/remove":l,"/mypads":t,"/mypads/group":t,"/mypads/group/list":t,"/mypads/group/add":n,"/mypads/group/:key/view":g,"/mypads/group/:key/edit":n,"/mypads/group/:key/remove":y,"/mypads/group/:group/pad/add":q,"/mypads/group/:group/pad/move":k,"/mypads/group/:group/pad/edit/:pad":q,"/mypads/group/:group/pad/remove/:pad":j,"/mypads/group/:group/pad/remove/chat/history/:pad":v,"/mypads/group/:group/pad/view/:pad":c,"/mypads/group/:group/user/:action":f,"/admin":h,"/admin/logout":b,"/admin/users":w,"/admin/users/:login/edit":x,"/admin/users/:login/remove":B};var I=document.getElementById("mypads");return E.init=function(){e.route(I,"/",E.model.routes)},E}.call(this);
},{"./modules/accountconfirm.js":10,"./modules/admin-logout.js":11,"./modules/admin-users-form.js":12,"./modules/admin-users-remove.js":13,"./modules/admin-users.js":14,"./modules/admin.js":15,"./modules/bookmark.js":16,"./modules/group-form.js":17,"./modules/group-remove.js":18,"./modules/group-view.js":19,"./modules/group.js":20,"./modules/home.js":21,"./modules/login.js":23,"./modules/logout.js":24,"./modules/pad-form.js":25,"./modules/pad-move.js":27,"./modules/pad-remove-chat-history.js":28,"./modules/pad-remove.js":29,"./modules/pad-view.js":31,"./modules/passrecover.js":32,"./modules/subscribe.js":33,"./modules/user-invitation.js":34,"./modules/userlist-form.js":36,"./modules/userlist-remove.js":37,"./modules/userlist.js":38,"mithril":49}],40:[function(require,module,exports){
module.exports=function(){"use strict";var e=require("mithril"),t=require("../configuration.js"),o={};return o.model={items:{},counter:0},o.controller=function(){var t={};return t.toClose={},t.close=function(e,i){i&&"timeout"!==i&&window.clearTimeout(t.toClose[e]),delete t.toClose[e],delete o.model.items[e]},t.delayClose=function(o,i){i&&!t.toClose[o]&&(t.toClose[o]=window.setTimeout(function(){e.startComputation(),t.close(o,"timeout"),e.endComputation()},1e3*i))},t},o.view=function(t){var i=Object.keys(o.model.items).sort();return e("div",i.map(function(i){var n=o.model.items[i];t.delayClose(i,n.timeout);var l=t.close.bind(t,i,n.timeout);return e("div",{class:n.cls?n.cls:"",onclick:n.click?n.click:l},[e("header",[n.icon?e("i",{class:"glyphicon glyphicon-"+n.icon}):"",e("span"," "+n.title)]),e("i",{class:"close glyphicon glyphicon-remove-circle",onclick:l}),e("p",e.trust(n.body))])}))},o.send=function(t,i){void 0===t.timeout&&(t.timeout=10),o.model.counter+=1,o.model.items[o.model.counter]=t,e.redraw(),i&&i()},o.success=function(e,i){e.title=e.title||t.LANG.NOTIFICATION.SUCCESS,e.cls="alert alert-success",e.icon="ok",o.send(e,i)},o.info=function(e,i){e.title=e.title||t.LANG.NOTIFICATION.INFO,e.cls="alert alert-info",e.icon="info-sign",o.send(e,i)},o.warning=function(e,i){e.title=t.LANG.NOTIFICATION.WARNING,e.cls="alert alert-warning",e.icon="warning-sign",e.timeout=15,o.send(e,i)},o.error=function(e,i){e.title=t.LANG.NOTIFICATION.ERROR,e.cls="alert alert-danger",e.icon="exclamation-sign",e.timeout=15,o.send(e,i)},o.errorUnexpected=function(e,i){e.body="<em>"+e.body+"</em><br>"+t.LANG.NOTIFICATION.ERROR_UNEXPECTED,o.error(e,i)},o}.call(this);
},{"../configuration.js":3,"mithril":49}],41:[function(require,module,exports){
module.exports=function(){"use strict";var t=require("mithril"),n=require("lodash"),e=require("../configuration.js"),i={};return i.controller=function(t){var i=t;return i.label=i.label||e.LANG.TAG.TAGS,i.placeholder=i.placeholder||e.LANG.TAG.PLACEHOLDER,i.name=i.name||"tags",i.tags=n.difference(i.tags,i.current),i.add=function(t){var e=t.value;0!==e.length&&(n.includes(i.current,e)||i.current.push(e),n.pull(i.tags,e),t.value="")},i.addMultiple=function(t){var e=t.value;0!==e.length&&(e=n.compact(e.split("\n")),i.current=n.union(i.current,e),i.tags=n.difference(i.tags,e),t.value="")},i},i.views={},i.views.icon=function(){return t("i",{class:"mp-tooltip glyphicon glyphicon-info-sign tag","data-msg":e.LANG.TAG.HELP})},i.views.input=function(n){return t("input.form-control",{id:n.name+"-input",name:n.name,type:"text",list:n.name,placeholder:n.placeholder,onkeydown:function(t){13===t.keyCode&&(t.preventDefault(),n.add(t.target))},onchange:function(t){n.add(t.target)}})},i.views.datalist=function(e){return t("datalist",{id:e.name},n.map(e.tags,function(n){return t("option",{value:n})}))},i.views.tagslist=function(e){return t("ul.list-inline help-block",n.map(e.current,function(i){return t("li",[t("span.label.label-default",i),t("i",{role:"button",class:"small glyphicon glyphicon-remove text-danger",onclick:function(t){var i=t.target.parentElement.textContent;n.pull(e.current,i),e.tags.push(i)}})])}))},i.view=function(n){return t("div.form-group",[t("label.col-sm-4",{for:n.name},[n.label,i.views.icon()]),t(".col-sm-7",[t(".input-group.input-group-sm",[i.views.input(n),t("span.input-group-btn",t("button.btn.btn-default",{type:"button",onclick:function(){n.add(document.getElementById(n.name+"-input"))}},e.LANG.USER.OK))]),i.views.datalist(n),i.views.tagslist(n)])])},i}.call(this);
},{"../configuration.js":3,"lodash":48,"mithril":49}],42:[function(require,module,exports){
var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function r(t){var r=t.charCodeAt(0);return r===h||r===u?62:r===c||r===f?63:r<o?-1:r<o+10?r-o+26+26:r<i+26?r-i:r<A+26?r-A+26:void 0}function e(t){function e(t){i[f++]=t}var n,h,c,o,A,i;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=t.length;A="="===t.charAt(u-2)?2:"="===t.charAt(u-1)?1:0,i=new a(3*t.length/4-A),c=A>0?t.length-4:t.length;var f=0;for(n=0,h=0;n<c;n+=4,h+=3)o=r(t.charAt(n))<<18|r(t.charAt(n+1))<<12|r(t.charAt(n+2))<<6|r(t.charAt(n+3)),e((16711680&o)>>16),e((65280&o)>>8),e(255&o);return 2===A?(o=r(t.charAt(n))<<2|r(t.charAt(n+1))>>4,e(255&o)):1===A&&(o=r(t.charAt(n))<<10|r(t.charAt(n+1))<<4|r(t.charAt(n+2))>>2,e(o>>8&255),e(255&o)),i}function n(t){function r(t){return lookup.charAt(t)}var e,n,a,h=t.length%3,c="";for(e=0,a=t.length-h;e<a;e+=3)n=(t[e]<<16)+(t[e+1]<<8)+t[e+2],c+=function(t){return r(t>>18&63)+r(t>>12&63)+r(t>>6&63)+r(63&t)}(n);switch(h){case 1:n=t[t.length-1],c+=r(n>>2),c+=r(n<<4&63),c+="==";break;case 2:n=(t[t.length-2]<<8)+t[t.length-1],c+=r(n>>10),c+=r(n>>4&63),c+=r(n<<2&63),c+="="}return c}var a="undefined"!=typeof Uint8Array?Uint8Array:Array,h="+".charCodeAt(0),c="/".charCodeAt(0),o="0".charCodeAt(0),A="a".charCodeAt(0),i="A".charCodeAt(0),u="-".charCodeAt(0),f="_".charCodeAt(0);t.toByteArray=e,t.fromByteArray=n}("undefined"==typeof exports?this.base64js={}:exports);
},{}],43:[function(require,module,exports){
(function (global){
"use strict";function typedArraySupport(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Buffer(t){return this instanceof Buffer?(Buffer.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof t?fromNumber(this,t):"string"==typeof t?fromString(this,t,arguments.length>1?arguments[1]:"utf8"):fromObject(this,t)):arguments.length>1?new Buffer(t,arguments[1]):new Buffer(t)}function fromNumber(t,e){if(t=allocate(t,e<0?0:0|checked(e)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;r++)t[r]=0;return t}function fromString(t,e,r){return"string"==typeof r&&""!==r||(r="utf8"),t=allocate(t,0|byteLength(e,r)),t.write(e,r),t}function fromObject(t,e){if(Buffer.isBuffer(e))return fromBuffer(t,e);if(isArray(e))return fromArray(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(e.buffer instanceof ArrayBuffer)return fromTypedArray(t,e);if(e instanceof ArrayBuffer)return fromArrayBuffer(t,e)}return e.length?fromArrayLike(t,e):fromJsonObject(t,e)}function fromBuffer(t,e){var r=0|checked(e.length);return t=allocate(t,r),e.copy(t,0,0,r),t}function fromArray(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromTypedArray(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromArrayBuffer(t,e){return Buffer.TYPED_ARRAY_SUPPORT?(e.byteLength,t=Buffer._augment(new Uint8Array(e))):t=fromTypedArray(t,new Uint8Array(e)),t}function fromArrayLike(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromJsonObject(t,e){var r,n=0;"Buffer"===e.type&&isArray(e.data)&&(r=e.data,n=0|checked(r.length)),t=allocate(t,n);for(var f=0;f<n;f+=1)t[f]=255&r[f];return t}function allocate(t,e){return Buffer.TYPED_ARRAY_SUPPORT?(t=Buffer._augment(new Uint8Array(e)),t.__proto__=Buffer.prototype):(t.length=e,t._isBuffer=!0),0!==e&&e<=Buffer.poolSize>>>1&&(t.parent=rootParent),t}function checked(t){if(t>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|t}function SlowBuffer(t,e){if(!(this instanceof SlowBuffer))return new SlowBuffer(t,e);var r=new Buffer(t,e);return delete r.parent,r}function byteLength(t,e){"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return r;case"utf8":case"utf-8":return utf8ToBytes(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(t).length;default:if(n)return utf8ToBytes(t).length;e=(""+e).toLowerCase(),n=!0}}function slowToString(t,e,r){var n=!1;if(e|=0,r=void 0===r||r===1/0?this.length:0|r,t||(t="utf8"),e<0&&(e=0),r>this.length&&(r=this.length),r<=e)return"";for(;;)switch(t){case"hex":return hexSlice(this,e,r);case"utf8":case"utf-8":return utf8Slice(this,e,r);case"ascii":return asciiSlice(this,e,r);case"binary":return binarySlice(this,e,r);case"base64":return base64Slice(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function hexWrite(t,e,r,n){r=Number(r)||0;var f=t.length-r;n?(n=Number(n))>f&&(n=f):n=f;var i=e.length;if(i%2!=0)throw new Error("Invalid hex string");n>i/2&&(n=i/2);for(var o=0;o<n;o++){var u=parseInt(e.substr(2*o,2),16);if(isNaN(u))throw new Error("Invalid hex string");t[r+o]=u}return o}function utf8Write(t,e,r,n){return blitBuffer(utf8ToBytes(e,t.length-r),t,r,n)}function asciiWrite(t,e,r,n){return blitBuffer(asciiToBytes(e),t,r,n)}function binaryWrite(t,e,r,n){return asciiWrite(t,e,r,n)}function base64Write(t,e,r,n){return blitBuffer(base64ToBytes(e),t,r,n)}function ucs2Write(t,e,r,n){return blitBuffer(utf16leToBytes(e,t.length-r),t,r,n)}function base64Slice(t,e,r){return 0===e&&r===t.length?base64.fromByteArray(t):base64.fromByteArray(t.slice(e,r))}function utf8Slice(t,e,r){r=Math.min(t.length,r);for(var n=[],f=e;f<r;){var i=t[f],o=null,u=i>239?4:i>223?3:i>191?2:1;if(f+u<=r){var s,a,h,c;switch(u){case 1:i<128&&(o=i);break;case 2:s=t[f+1],128==(192&s)&&(c=(31&i)<<6|63&s)>127&&(o=c);break;case 3:s=t[f+1],a=t[f+2],128==(192&s)&&128==(192&a)&&(c=(15&i)<<12|(63&s)<<6|63&a)>2047&&(c<55296||c>57343)&&(o=c);break;case 4:s=t[f+1],a=t[f+2],h=t[f+3],128==(192&s)&&128==(192&a)&&128==(192&h)&&(c=(15&i)<<18|(63&s)<<12|(63&a)<<6|63&h)>65535&&c<1114112&&(o=c)}}null===o?(o=65533,u=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),f+=u}return decodeCodePointsArray(n)}function decodeCodePointsArray(t){var e=t.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}function asciiSlice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;f<r;f++)n+=String.fromCharCode(127&t[f]);return n}function binarySlice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;f<r;f++)n+=String.fromCharCode(t[f]);return n}function hexSlice(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var f="",i=e;i<r;i++)f+=toHex(t[i]);return f}function utf16leSlice(t,e,r){for(var n=t.slice(e,r),f="",i=0;i<n.length;i+=2)f+=String.fromCharCode(n[i]+256*n[i+1]);return f}function checkOffset(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(t,e,r,n,f,i){if(!Buffer.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>f||e<i)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range")}function objectWriteUInt16(t,e,r,n){e<0&&(e=65535+e+1);for(var f=0,i=Math.min(t.length-r,2);f<i;f++)t[r+f]=(e&255<<8*(n?f:1-f))>>>8*(n?f:1-f)}function objectWriteUInt32(t,e,r,n){e<0&&(e=4294967295+e+1);for(var f=0,i=Math.min(t.length-r,4);f<i;f++)t[r+f]=e>>>8*(n?f:3-f)&255}function checkIEEE754(t,e,r,n,f,i){if(e>f||e<i)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range");if(r<0)throw new RangeError("index out of range")}function writeFloat(t,e,r,n,f){return f||checkIEEE754(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),ieee754.write(t,e,r,n,23,4),r+4}function writeDouble(t,e,r,n,f){return f||checkIEEE754(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),ieee754.write(t,e,r,n,52,8),r+8}function base64clean(t){if(t=stringtrim(t).replace(INVALID_BASE64_RE,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function toHex(t){return t<16?"0"+t.toString(16):t.toString(16)}function utf8ToBytes(t,e){e=e||1/0;for(var r,n=t.length,f=null,i=[],o=0;o<n;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!f){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue}f=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),f=r;continue}r=65536+(f-55296<<10|r-56320)}else f&&(e-=3)>-1&&i.push(239,191,189);if(f=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function asciiToBytes(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function utf16leToBytes(t,e){for(var r,n,f,i=[],o=0;o<t.length&&!((e-=2)<0);o++)r=t.charCodeAt(o),n=r>>8,f=r%256,i.push(f),i.push(n);return i}function base64ToBytes(t){return base64.toByteArray(base64clean(t))}function blitBuffer(t,e,r,n){for(var f=0;f<n&&!(f+r>=e.length||f>=t.length);f++)e[f+r]=t[f];return f}var base64=require("base64-js"),ieee754=require("ieee754"),isArray=require("isarray");exports.Buffer=Buffer,exports.SlowBuffer=SlowBuffer,exports.INSPECT_MAX_BYTES=50,Buffer.poolSize=8192;var rootParent={};Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:typedArraySupport(),Buffer.TYPED_ARRAY_SUPPORT?(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array):(Buffer.prototype.length=void 0,Buffer.prototype.parent=void 0),Buffer.isBuffer=function(t){return!(null==t||!t._isBuffer)},Buffer.compare=function(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,f=0,i=Math.min(r,n);f<i&&t[f]===e[f];)++f;return f!==i&&(r=t[f],n=e[f]),r<n?-1:n<r?1:0},Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(t,e){if(!isArray(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new Buffer(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;r++)e+=t[r].length;var n=new Buffer(e),f=0;for(r=0;r<t.length;r++){var i=t[r];i.copy(n,f),f+=i.length}return n},Buffer.byteLength=byteLength,Buffer.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?utf8Slice(this,0,t):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Buffer.compare(this,t)},Buffer.prototype.inspect=function(){var t="",e=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},Buffer.prototype.compare=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:Buffer.compare(this,t)},Buffer.prototype.indexOf=function(t,e){function r(t,e,r){for(var n=-1,f=0;r+f<t.length;f++)if(t[r+f]===e[-1===n?0:f-n]){if(-1===n&&(n=f),f-n+1===e.length)return r+n}else n=-1;return-1}if(e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(e<0&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(Buffer.isBuffer(t))return r(this,t,e);if("number"==typeof t)return Buffer.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):r(this,[t],e);throw new TypeError("val must be string, number or Buffer")},Buffer.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},Buffer.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},Buffer.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else if(isFinite(e))e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else{var f=n;n=e,e=0|r,r=f}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return hexWrite(this,t,e,r);case"utf8":case"utf-8":return utf8Write(this,t,e,r);case"ascii":return asciiWrite(this,t,e,r);case"binary":return binaryWrite(this,t,e,r);case"base64":return base64Write(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;Buffer.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n;if(Buffer.TYPED_ARRAY_SUPPORT)n=Buffer._augment(this.subarray(t,e));else{var f=e-t;n=new Buffer(f,void 0);for(var i=0;i<f;i++)n[i]=this[i+t]}return n.length&&(n.parent=this.parent||this),n},Buffer.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return n},Buffer.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=this[t+--e],f=1;e>0&&(f*=256);)n+=this[t+--e]*f;return n},Buffer.prototype.readUInt8=function(t,e){return e||checkOffset(t,1,this.length),this[t]},Buffer.prototype.readUInt16LE=function(t,e){return e||checkOffset(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUInt16BE=function(t,e){return e||checkOffset(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUInt32LE=function(t,e){return e||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUInt32BE=function(t,e){return e||checkOffset(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return f*=128,n>=f&&(n-=Math.pow(2,8*e)),n},Buffer.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=e,f=1,i=this[t+--n];n>0&&(f*=256);)i+=this[t+--n]*f;return f*=128,i>=f&&(i-=Math.pow(2,8*e)),i},Buffer.prototype.readInt8=function(t,e){return e||checkOffset(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Buffer.prototype.readInt16LE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(t,e){return e||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function(t,e){return e||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readFloatLE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!1,52,8)},Buffer.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||checkInt(this,t,e,r,Math.pow(2,8*r),0);var f=1,i=0;for(this[e]=255&t;++i<r&&(f*=256);)this[e+i]=t/f&255;return e+r},Buffer.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||checkInt(this,t,e,r,Math.pow(2,8*r),0);var f=r-1,i=1;for(this[e+f]=255&t;--f>=0&&(i*=256);)this[e+f]=t/i&255;return e+r},Buffer.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},Buffer.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=0,o=1,u=t<0?1:0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=r-1,o=1,u=t<0?1:0;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},Buffer.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeFloatLE=function(t,e,r){return writeFloat(this,t,e,!0,r)},Buffer.prototype.writeFloatBE=function(t,e,r){return writeFloat(this,t,e,!1,r)},Buffer.prototype.writeDoubleLE=function(t,e,r){return writeDouble(this,t,e,!0,r)},Buffer.prototype.writeDoubleBE=function(t,e,r){return writeDouble(this,t,e,!1,r)},Buffer.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var f,i=n-r;if(this===t&&r<e&&e<n)for(f=i-1;f>=0;f--)t[f+e]=this[f+r];else if(i<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(f=0;f<i;f++)t[f+e]=this[f+r];else t._set(this.subarray(r,r+i),e);return i},Buffer.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),r<e)throw new RangeError("end < start");if(r!==e&&0!==this.length){if(e<0||e>=this.length)throw new RangeError("start out of bounds");if(r<0||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;n<r;n++)this[n]=t;else{var f=utf8ToBytes(t.toString()),i=f.length;for(n=e;n<r;n++)this[n]=f[n%i]}return this}},Buffer.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(Buffer.TYPED_ARRAY_SUPPORT)return new Buffer(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;e<r;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var BP=Buffer.prototype;Buffer._augment=function(t){return t.constructor=Buffer,t._isBuffer=!0,t._set=t.set,t.get=BP.get,t.set=BP.set,t.write=BP.write,t.toString=BP.toString,t.toLocaleString=BP.toString,t.toJSON=BP.toJSON,t.equals=BP.equals,t.compare=BP.compare,t.indexOf=BP.indexOf,t.copy=BP.copy,t.slice=BP.slice,t.readUIntLE=BP.readUIntLE,t.readUIntBE=BP.readUIntBE,t.readUInt8=BP.readUInt8,t.readUInt16LE=BP.readUInt16LE,t.readUInt16BE=BP.readUInt16BE,t.readUInt32LE=BP.readUInt32LE,t.readUInt32BE=BP.readUInt32BE,t.readIntLE=BP.readIntLE,t.readIntBE=BP.readIntBE,t.readInt8=BP.readInt8,t.readInt16LE=BP.readInt16LE,t.readInt16BE=BP.readInt16BE,t.readInt32LE=BP.readInt32LE,t.readInt32BE=BP.readInt32BE,t.readFloatLE=BP.readFloatLE,t.readFloatBE=BP.readFloatBE,t.readDoubleLE=BP.readDoubleLE,t.readDoubleBE=BP.readDoubleBE,t.writeUInt8=BP.writeUInt8,t.writeUIntLE=BP.writeUIntLE,t.writeUIntBE=BP.writeUIntBE,t.writeUInt16LE=BP.writeUInt16LE,t.writeUInt16BE=BP.writeUInt16BE,t.writeUInt32LE=BP.writeUInt32LE,t.writeUInt32BE=BP.writeUInt32BE,t.writeIntLE=BP.writeIntLE,t.writeIntBE=BP.writeIntBE,t.writeInt8=BP.writeInt8,t.writeInt16LE=BP.writeInt16LE,t.writeInt16BE=BP.writeInt16BE,t.writeInt32LE=BP.writeInt32LE,t.writeInt32BE=BP.writeInt32BE,t.writeFloatLE=BP.writeFloatLE,t.writeFloatBE=BP.writeFloatBE,t.writeDoubleLE=BP.writeDoubleLE,t.writeDoubleBE=BP.writeDoubleBE,t.fill=BP.fill,t.inspect=BP.inspect,t.toArrayBuffer=BP.toArrayBuffer,t};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"base64-js":42,"ieee754":45,"isarray":44}],44:[function(require,module,exports){
var toString={}.toString;module.exports=Array.isArray||function(r){return"[object Array]"==toString.call(r)};
},{}],45:[function(require,module,exports){
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),o+=p+N>=1?n/f:n*Math.pow(2,1-N),o*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],46:[function(require,module,exports){
!function(t){"use strict";var r,e=t.Base64;if("undefined"!=typeof module&&module.exports)try{r=require("buffer").Buffer}catch(t){}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=function(t){for(var r={},e=0,n=t.length;e<n;e++)r[t.charAt(e)]=e;return r}(n),c=String.fromCharCode,u=function(t){if(t.length<2){var r=t.charCodeAt(0);return r<128?t:r<2048?c(192|r>>>6)+c(128|63&r):c(224|r>>>12&15)+c(128|r>>>6&63)+c(128|63&r)}var r=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return c(240|r>>>18&7)+c(128|r>>>12&63)+c(128|r>>>6&63)+c(128|63&r)},a=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,i=function(t){return t.replace(a,u)},f=function(t){var r=[0,2,1][t.length%3],e=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[n.charAt(e>>>18),n.charAt(e>>>12&63),r>=2?"=":n.charAt(e>>>6&63),r>=1?"=":n.charAt(63&e)].join("")},h=t.btoa?function(r){return t.btoa(r)}:function(t){return t.replace(/[\s\S]{1,3}/g,f)},d=r?function(t){return(t.constructor===r.constructor?t:new r(t)).toString("base64")}:function(t){return h(i(t))},s=function(t,r){return r?d(String(t)).replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,""):d(String(t))},g=function(t){return s(t,!0)},A=new RegExp(["[-][-]","[-][-]{2}","[-][-]{3}"].join("|"),"g"),l=function(t){switch(t.length){case 4:var r=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),e=r-65536;return c(55296+(e>>>10))+c(56320+(1023&e));case 3:return c((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return c((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},p=function(t){return t.replace(A,l)},C=function(t){var r=t.length,e=r%4,n=(r>0?o[t.charAt(0)]<<18:0)|(r>1?o[t.charAt(1)]<<12:0)|(r>2?o[t.charAt(2)]<<6:0)|(r>3?o[t.charAt(3)]:0),u=[c(n>>>16),c(n>>>8&255),c(255&n)];return u.length-=[0,0,2,1][e],u.join("")},b=t.atob?function(r){return t.atob(r)}:function(t){return t.replace(/[\s\S]{1,4}/g,C)},B=r?function(t){return(t.constructor===r.constructor?t:new r(t,"base64")).toString()}:function(t){return p(b(t))},S=function(t){return B(String(t).replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},v=function(){var r=t.Base64;return t.Base64=e,r};if(t.Base64={VERSION:"2.1.9",atob:b,btoa:h,fromBase64:S,toBase64:s,utob:i,encode:s,encodeURI:g,btou:p,decode:S,noConflict:v},"function"==typeof Object.defineProperty){var y=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};t.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",y(function(){return S(this)})),Object.defineProperty(String.prototype,"toBase64",y(function(t){return s(this,t)})),Object.defineProperty(String.prototype,"toBase64URI",y(function(){return s(this,!0)}))}}t.Meteor&&(Base64=t.Base64)}(this);
},{"buffer":43}],47:[function(require,module,exports){
!function(e){var n=!1;if("function"==typeof define&&define.amd&&(define(e),n=!0),"object"==typeof exports&&(module.exports=e(),n=!0),!n){var o=window.Cookies,t=window.Cookies=e();t.noConflict=function(){return window.Cookies=o,t}}}(function(){function e(){for(var e=0,n={};e<arguments.length;e++){var o=arguments[e];for(var t in o)n[t]=o[t]}return n}function n(o){function t(n,r,i){var c;if("undefined"!=typeof document){if(arguments.length>1){if(i=e({path:"/"},t.defaults,i),"number"==typeof i.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*i.expires),i.expires=a}i.expires=i.expires?i.expires.toUTCString():"";try{c=JSON.stringify(r),/^[\{\[]/.test(c)&&(r=c)}catch(e){}r=o.write?o.write(r,n):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=encodeURIComponent(String(n)),n=n.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),n=n.replace(/[\(\)]/g,escape);var s="";for(var f in i)i[f]&&(s+="; "+f,!0!==i[f]&&(s+="="+i[f]));return document.cookie=n+"="+r+s}n||(c={});for(var p=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,u=0;u<p.length;u++){var l=p[u].split("="),C=l.slice(1).join("=");this.json||'"'!==C.charAt(0)||(C=C.slice(1,-1));try{var g=l[0].replace(d,decodeURIComponent);if(C=o.read?o.read(C,g):o(C,g)||C.replace(d,decodeURIComponent),this.json)try{C=JSON.parse(C)}catch(e){}if(n===g){c=C;break}n||(c[g]=C)}catch(e){}}return c}}return t.set=t,t.get=function(e){return t.call(t,e)},t.getJSON=function(){return t.apply({json:!0},[].slice.call(arguments))},t.defaults={},t.remove=function(n,o){t(n,"",e(o,{expires:-1}))},t.withConverter=n,t}return n(function(){})});
},{}],48:[function(require,module,exports){
(function (global){
(function(){function n(n,t){if(n!==t){var r=null===n,e=n===b,u=n===n,i=null===t,o=t===b,f=t===t;if(n>t&&!i||!u||r&&!o&&f||e&&f)return 1;if(n<t&&!r||!f||i&&!e&&u||o&&u)return-1}return 0}function t(n,t,r){for(var e=n.length,u=r?e:-1;r?u--:++u<e;)if(t(n[u],u,n))return u;return-1}function r(n,t,r){if(t!==t)return h(n,r);for(var e=r-1,u=n.length;++e<u;)if(n[e]===t)return e;return-1}function e(n){return"function"==typeof n||!1}function u(n){return null==n?"":n+""}function i(n,t){for(var r=-1,e=n.length;++r<e&&t.indexOf(n.charAt(r))>-1;);return r}function o(n,t){for(var r=n.length;r--&&t.indexOf(n.charAt(r))>-1;);return r}function f(t,r){return n(t.criteria,r.criteria)||t.index-r.index}function a(t,r,e){for(var u=-1,i=t.criteria,o=r.criteria,f=i.length,a=e.length;++u<f;){var c=n(i[u],o[u]);if(c){if(u>=a)return c;var l=e[u];return c*("asc"===l||!0===l?1:-1)}}return t.index-r.index}function c(n){return Bn[n]}function l(n){return zn[n]}function s(n,t,r){return t?n=qn[n]:r&&(n=Pn[n]),"\\"+n}function p(n){return"\\"+Pn[n]}function h(n,t,r){for(var e=n.length,u=t+(r?0:-1);r?u--:++u<e;){var i=n[u];if(i!==i)return u}return-1}function v(n){return!!n&&"object"==typeof n}function _(n){return n<=160&&n>=9&&n<=13||32==n||160==n||5760==n||6158==n||n>=8192&&(n<=8202||8232==n||8233==n||8239==n||8287==n||12288==n||65279==n)}function g(n,t){for(var r=-1,e=n.length,u=-1,i=[];++r<e;)n[r]===t&&(n[r]=D,i[++u]=r);return i}function y(n,t){for(var r,e=-1,u=n.length,i=-1,o=[];++e<u;){var f=n[e],a=t?t(f,e,n):f;e&&r===a||(r=a,o[++i]=f)}return o}function d(n){for(var t=-1,r=n.length;++t<r&&_(n.charCodeAt(t)););return t}function w(n){for(var t=n.length;t--&&_(n.charCodeAt(t)););return t}function m(n){return Dn[n]}function x(_){function Bn(n){if(v(n)&&!Cf(n)&&!(n instanceof Mn)){if(n instanceof Dn)return n;if(no.call(n,"__chain__")&&no.call(n,"__wrapped__"))return he(n)}return new Dn(n)}function zn(){}function Dn(n,t,r){this.__wrapped__=n,this.__actions__=r||[],this.__chain__=!!t}function Mn(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Oo,this.__views__=[]}function qn(){var n=new Mn(this.__wrapped__);return n.__actions__=et(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=et(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=et(this.__views__),n}function Pn(){if(this.__filtered__){var n=new Mn(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function Kn(){var n=this.__wrapped__.value(),t=this.__dir__,r=Cf(n),e=t<0,u=r?n.length:0,i=Vr(0,u,this.__views__),o=i.start,f=i.end,a=f-o,c=e?f:o-1,l=this.__iteratees__,s=l.length,p=0,h=Ao(a,this.__takeCount__);if(!r||u<T||u==a&&h==a)return er(e&&r?n.reverse():n,this.__actions__);var v=[];n:for(;a--&&p<h;){c+=t;for(var _=-1,g=n[c];++_<s;){var y=l[_],d=y.iteratee,w=y.type,m=d(g);if(w==B)g=m;else if(!m){if(w==L)continue n;break n}}v[p++]=g}return v}function Vn(){this.__data__={}}function Yn(n){return this.has(n)&&delete this.__data__[n]}function Gn(n){return"__proto__"==n?b:this.__data__[n]}function Jn(n){return"__proto__"!=n&&no.call(this.__data__,n)}function Xn(n,t){return"__proto__"!=n&&(this.__data__[n]=t),this}function Qn(n){var t=n?n.length:0;for(this.data={hash:go(null),set:new lo};t--;)this.push(n[t])}function nt(n,t){var r=n.data;return("string"==typeof t||$u(t)?r.set.has(t):r.hash[t])?0:-1}function tt(n){var t=this.data;"string"==typeof n||$u(n)?t.set.add(n):t.hash[n]=!0}function rt(n,t){for(var r=-1,e=n.length,u=-1,i=t.length,o=zi(e+i);++r<e;)o[r]=n[r];for(;++u<i;)o[r++]=t[u];return o}function et(n,t){var r=-1,e=n.length;for(t||(t=zi(e));++r<e;)t[r]=n[r];return t}function ut(n,t){for(var r=-1,e=n.length;++r<e&&!1!==t(n[r],r,n););return n}function it(n,t){for(var r=n.length;r--&&!1!==t(n[r],r,n););return n}function ot(n,t){for(var r=-1,e=n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function ft(n,t,r,e){for(var u=-1,i=n.length,o=e,f=o;++u<i;){var a=n[u],c=+t(a);r(c,o)&&(o=c,f=a)}return f}function at(n,t){for(var r=-1,e=n.length,u=-1,i=[];++r<e;){var o=n[r];t(o,r,n)&&(i[++u]=o)}return i}function ct(n,t){for(var r=-1,e=n.length,u=zi(e);++r<e;)u[r]=t(n[r],r,n);return u}function lt(n,t){for(var r=-1,e=t.length,u=n.length;++r<e;)n[u+r]=t[r];return n}function st(n,t,r,e){var u=-1,i=n.length;for(e&&i&&(r=n[++u]);++u<i;)r=t(r,n[u],u,n);return r}function pt(n,t,r,e){var u=n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function ht(n,t){for(var r=-1,e=n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function vt(n,t){for(var r=n.length,e=0;r--;)e+=+t(n[r])||0;return e}function _t(n,t){return n===b?t:n}function gt(n,t,r,e){return n!==b&&no.call(e,r)?n:t}function yt(n,t,r){for(var e=-1,u=Df(t),i=u.length;++e<i;){var o=u[e],f=n[o],a=r(f,t[o],o,n,t);(a===a?a===f:f!==f)&&(f!==b||o in n)||(n[o]=a)}return n}function dt(n,t){return null==t?n:mt(t,Df(t),n)}function wt(n,t){for(var r=-1,e=null==n,u=!e&&Zr(n),i=u?n.length:0,o=t.length,f=zi(o);++r<o;){var a=t[r];f[r]=u?Hr(a,i)?n[a]:b:e?b:n[a]}return f}function mt(n,t,r){r||(r={});for(var e=-1,u=t.length;++e<u;){var i=t[e];r[i]=n[i]}return r}function xt(n,t,r){var e=typeof n;return"function"==e?t===b?n:or(n,t,r):null==n?Ri:"object"==e?zt(n):t===b?Wi(n):Dt(n,t)}function bt(n,t,r,e,u,i,o){var f;if(r&&(f=u?r(n,e,u):r(n)),f!==b)return f;if(!$u(n))return n;var a=Cf(n);if(a){if(f=Yr(n),!t)return et(n,f)}else{var c=ro.call(n),l=c==Y;if(c!=J&&c!=M&&(!l||u))return Ln[c]?Jr(n,c,t):u?n:{};if(f=Gr(l?{}:n),!t)return dt(f,n)}i||(i=[]),o||(o=[]);for(var s=i.length;s--;)if(i[s]==n)return o[s];return i.push(n),o.push(f),(a?ut:Ut)(n,function(e,u){f[u]=bt(e,t,r,u,n,i,o)}),f}function At(n,t,r){if("function"!=typeof n)throw new Ji(z);return so(function(){n.apply(b,r)},t)}function jt(n,t){var e=n?n.length:0,u=[];if(!e)return u;var i=-1,o=qr(),f=o==r,a=f&&t.length>=T?_r(t):null,c=t.length;a&&(o=nt,f=!1,t=a);n:for(;++i<e;){var l=n[i];if(f&&l===l){for(var s=c;s--;)if(t[s]===l)continue n;u.push(l)}else o(t,l,0)<0&&u.push(l)}return u}function kt(n,t){var r=!0;return No(n,function(n,e,u){return r=!!t(n,e,u)}),r}function It(n,t,r,e){var u=e,i=u;return No(n,function(n,o,f){var a=+t(n,o,f);(r(a,u)||a===e&&a===i)&&(u=a,i=n)}),i}function Rt(n,t,r,e){var u=n.length;for(r=null==r?0:+r||0,r<0&&(r=-r>u?0:u+r),e=e===b||e>u?u:+e||0,e<0&&(e+=u),u=r>e?0:e>>>0,r>>>=0;r<u;)n[r++]=t;return n}function Ot(n,t){var r=[];return No(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function Et(n,t,r,e){var u;return r(n,function(n,r,i){if(t(n,r,i))return u=e?r:n,!1}),u}function Ct(n,t,r,e){e||(e=[]);for(var u=-1,i=n.length;++u<i;){var o=n[u];v(o)&&Zr(o)&&(r||Cf(o)||ku(o))?t?Ct(o,t,r,e):lt(e,o):r||(e[e.length]=o)}return e}function St(n,t){return Lo(n,t,ni)}function Ut(n,t){return Lo(n,t,Df)}function Wt(n,t){return Bo(n,t,Df)}function $t(n,t){for(var r=-1,e=t.length,u=-1,i=[];++r<e;){var o=t[r];Wu(n[o])&&(i[++u]=o)}return i}function Ft(n,t,r){if(null!=n){r!==b&&r in se(n)&&(t=[r]);for(var e=0,u=t.length;null!=n&&e<u;)n=n[t[e++]];return e&&e==u?n:b}}function Nt(n,t,r,e,u,i){return n===t||(null==n||null==t||!$u(n)&&!v(t)?n!==n&&t!==t:Tt(n,t,Nt,r,e,u,i))}function Tt(n,t,r,e,u,i,o){var f=Cf(n),a=Cf(t),c=q,l=q;f||(c=ro.call(n),c==M?c=J:c!=J&&(f=qu(n))),a||(l=ro.call(t),l==M?l=J:l!=J&&(a=qu(t)));var s=c==J,p=l==J,h=c==l;if(h&&!f&&!s)return Br(n,t,c);if(!u){var v=s&&no.call(n,"__wrapped__"),_=p&&no.call(t,"__wrapped__");if(v||_)return r(v?n.value():n,_?t.value():t,e,u,i,o)}if(!h)return!1;i||(i=[]),o||(o=[]);for(var g=i.length;g--;)if(i[g]==n)return o[g]==t;i.push(n),o.push(t);var y=(f?Lr:zr)(n,t,r,e,u,i,o);return i.pop(),o.pop(),y}function Lt(n,t,r){var e=t.length,u=e,i=!r;if(null==n)return!u;for(n=se(n);e--;){var o=t[e];if(i&&o[2]?o[1]!==n[o[0]]:!(o[0]in n))return!1}for(;++e<u;){o=t[e];var f=o[0],a=n[f],c=o[1];if(i&&o[2]){if(a===b&&!(f in n))return!1}else{var l=r?r(a,c,f):b;if(!(l===b?Nt(c,a,r,!0):l))return!1}}return!0}function Bt(n,t){var r=-1,e=Zr(n)?zi(n.length):[];return No(n,function(n,u,i){e[++r]=t(n,u,i)}),e}function zt(n){var t=Pr(n);if(1==t.length&&t[0][2]){var r=t[0][0],e=t[0][1];return function(n){return null!=n&&(n[r]===e&&(e!==b||r in se(n)))}}return function(n){return Lt(n,t)}}function Dt(n,t){var r=Cf(n),e=ne(n)&&ee(t),u=n+"";return n=pe(n),function(i){if(null==i)return!1;var o=u;if(i=se(i),(r||!e)&&!(o in i)){if(null==(i=1==n.length?i:Ft(i,Jt(n,0,-1))))return!1;o=Ie(n),i=se(i)}return i[o]===t?t!==b||o in i:Nt(t,i[o],b,!0)}}function Mt(n,t,r,e,u){if(!$u(n))return n;var i=Zr(t)&&(Cf(t)||qu(t)),o=i?b:Df(t);return ut(o||t,function(f,a){if(o&&(a=f,f=t[a]),v(f))e||(e=[]),u||(u=[]),qt(n,t,a,Mt,r,e,u);else{var c=n[a],l=r?r(c,f,a,n,t):b,s=l===b;s&&(l=f),l===b&&(!i||a in n)||!s&&(l===l?l===c:c!==c)||(n[a]=l)}}),n}function qt(n,t,r,e,u,i,o){for(var f=i.length,a=t[r];f--;)if(i[f]==a)return void(n[r]=o[f]);var c=n[r],l=u?u(c,a,r,n,t):b,s=l===b;s&&(l=a,Zr(a)&&(Cf(a)||qu(a))?l=Cf(c)?c:Zr(c)?et(c):[]:zu(a)||ku(a)?l=ku(c)?Gu(c):zu(c)?c:{}:s=!1),i.push(a),o.push(l),s?n[r]=e(l,a,u,i,o):(l===l?l!==c:c===c)&&(n[r]=l)}function Pt(n){return function(t){return null==t?b:t[n]}}function Kt(n){var t=n+"";return n=pe(n),function(r){return Ft(r,n,t)}}function Vt(n,t){for(var r=n?t.length:0;r--;){var e=t[r];if(e!=u&&Hr(e)){var u=e;po.call(n,e,1)}}return n}function Yt(n,t){return n+yo(Io()*(t-n+1))}function Gt(n,t,r,e,u){return u(n,function(n,u,i){r=e?(e=!1,n):t(r,n,u,i)}),r}function Jt(n,t,r){var e=-1,u=n.length;t=null==t?0:+t||0,t<0&&(t=-t>u?0:u+t),r=r===b||r>u?u:+r||0,r<0&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var i=zi(u);++e<u;)i[e]=n[e+t];return i}function Xt(n,t){var r;return No(n,function(n,e,u){return!(r=t(n,e,u))}),!!r}function Zt(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].value;return n}function Ht(n,t,r){var e=Dr(),u=-1;return t=ct(t,function(n){return e(n)}),Zt(Bt(n,function(n){return{criteria:ct(t,function(t){return t(n)}),index:++u,value:n}}),function(n,t){return a(n,t,r)})}function Qt(n,t){var r=0;return No(n,function(n,e,u){r+=+t(n,e,u)||0}),r}function nr(n,t){var e=-1,u=qr(),i=n.length,o=u==r,f=o&&i>=T,a=f?_r():null,c=[];a?(u=nt,o=!1):(f=!1,a=t?[]:c);n:for(;++e<i;){var l=n[e],s=t?t(l,e,n):l;if(o&&l===l){for(var p=a.length;p--;)if(a[p]===s)continue n;t&&a.push(s),c.push(l)}else u(a,s,0)<0&&((t||f)&&a.push(s),c.push(l))}return c}function tr(n,t){for(var r=-1,e=t.length,u=zi(e);++r<e;)u[r]=n[t[r]];return u}function rr(n,t,r,e){for(var u=n.length,i=e?u:-1;(e?i--:++i<u)&&t(n[i],i,n););return r?Jt(n,e?0:i,e?i+1:u):Jt(n,e?i+1:0,e?u:i)}function er(n,t){var r=n;r instanceof Mn&&(r=r.value());for(var e=-1,u=t.length;++e<u;){var i=t[e];r=i.func.apply(i.thisArg,lt([r],i.args))}return r}function ur(n,t,r){var e=0,u=n?n.length:e;if("number"==typeof t&&t===t&&u<=So){for(;e<u;){var i=e+u>>>1,o=n[i];(r?o<=t:o<t)&&null!==o?e=i+1:u=i}return u}return ir(n,t,Ri,r)}function ir(n,t,r,e){t=r(t);for(var u=0,i=n?n.length:0,o=t!==t,f=null===t,a=t===b;u<i;){var c=yo((u+i)/2),l=r(n[c]),s=l!==b,p=l===l;if(o)var h=p||e;else h=f?p&&s&&(e||null!=l):a?p&&(e||s):null!=l&&(e?l<=t:l<t);h?u=c+1:i=c}return Ao(i,Co)}function or(n,t,r){if("function"!=typeof n)return Ri;if(t===b)return n;switch(r){case 1:return function(r){return n.call(t,r)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)};case 5:return function(r,e,u,i,o){return n.call(t,r,e,u,i,o)}}return function(){return n.apply(t,arguments)}}function fr(n){var t=new io(n.byteLength);return new ho(t).set(new ho(n)),t}function ar(n,t,r){for(var e=r.length,u=-1,i=bo(n.length-e,0),o=-1,f=t.length,a=zi(f+i);++o<f;)a[o]=t[o];for(;++u<e;)a[r[u]]=n[u];for(;i--;)a[o++]=n[u++];return a}function cr(n,t,r){for(var e=-1,u=r.length,i=-1,o=bo(n.length-u,0),f=-1,a=t.length,c=zi(o+a);++i<o;)c[i]=n[i];for(var l=i;++f<a;)c[l+f]=t[f];for(;++e<u;)c[l+r[e]]=n[i++];return c}function lr(n,t){return function(r,e,u){var i=t?t():{};if(e=Dr(e,u,3),Cf(r))for(var o=-1,f=r.length;++o<f;){var a=r[o];n(i,a,e(a,o,r),r)}else No(r,function(t,r,u){n(i,t,e(t,r,u),u)});return i}}function sr(n){return yu(function(t,r){var e=-1,u=null==t?0:r.length,i=u>2?r[u-2]:b,o=u>2?r[2]:b,f=u>1?r[u-1]:b;for("function"==typeof i?(i=or(i,f,5),u-=2):(i="function"==typeof f?f:b,u-=i?1:0),o&&Qr(r[0],r[1],o)&&(i=u<3?b:i,u=1);++e<u;){var a=r[e];a&&n(t,a,i)}return t})}function pr(n,t){return function(r,e){var u=r?Mo(r):0;if(!re(u))return n(r,e);for(var i=t?u:-1,o=se(r);(t?i--:++i<u)&&!1!==e(o[i],i,o););return r}}function hr(n){return function(t,r,e){for(var u=se(t),i=e(t),o=i.length,f=n?o:-1;n?f--:++f<o;){var a=i[f];if(!1===r(u[a],a,u))break}return t}}function vr(n,t){function r(){return(this&&this!==Zn&&this instanceof r?e:n).apply(t,arguments)}var e=yr(n);return r}function _r(n){return go&&lo?new Qn(n):null}function gr(n){return function(t){for(var r=-1,e=ji(li(t)),u=e.length,i="";++r<u;)i=n(i,e[r],r);return i}}function yr(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Fo(n.prototype),e=n.apply(r,t);return $u(e)?e:r}}function dr(n){function t(r,e,u){u&&Qr(r,e,u)&&(e=b);var i=Tr(r,n,b,b,b,b,b,e);return i.placeholder=t.placeholder,i}return t}function wr(n,t){return yu(function(r){var e=r[0];return null==e?e:(r.push(t),n.apply(b,r))})}function mr(n,t){return function(r,e,u){if(u&&Qr(r,e,u)&&(e=b),e=Dr(e,u,3),1==e.length){r=Cf(r)?r:le(r);var i=ft(r,e,n,t);if(!r.length||i!==t)return i}return It(r,e,n,t)}}function xr(n,r){return function(e,u,i){if(u=Dr(u,i,3),Cf(e)){var o=t(e,u,r);return o>-1?e[o]:b}return Et(e,u,n)}}function br(n){return function(r,e,u){return r&&r.length?(e=Dr(e,u,3),t(r,e,n)):-1}}function Ar(n){return function(t,r,e){return r=Dr(r,e,3),Et(t,r,n,!0)}}function jr(n){return function(){for(var t,r=arguments.length,e=n?r:-1,u=0,i=zi(r);n?e--:++e<r;){var o=i[u++]=arguments[e];if("function"!=typeof o)throw new Ji(z);!t&&Dn.prototype.thru&&"wrapper"==Mr(o)&&(t=new Dn([],!0))}for(e=t?-1:r;++e<r;){o=i[e];var f=Mr(o),a="wrapper"==f?Do(o):b;t=a&&te(a[0])&&a[1]==(S|R|E|U)&&!a[4].length&&1==a[9]?t[Mr(a[0])].apply(t,a[3]):1==o.length&&te(o)?t[f]():t.thru(o)}return function(){var n=arguments,e=n[0];if(t&&1==n.length&&Cf(e)&&e.length>=T)return t.plant(e).value();for(var u=0,o=r?i[u].apply(this,n):e;++u<r;)o=i[u].call(this,o);return o}}}function kr(n,t){return function(r,e,u){return"function"==typeof e&&u===b&&Cf(r)?n(r,e):t(r,or(e,u,3))}}function Ir(n){return function(t,r,e){return"function"==typeof r&&e===b||(r=or(r,e,3)),n(t,r,ni)}}function Rr(n){return function(t,r,e){return"function"==typeof r&&e===b||(r=or(r,e,3)),n(t,r)}}function Or(n){return function(t,r,e){var u={};return r=Dr(r,e,3),Ut(t,function(t,e,i){var o=r(t,e,i);e=n?o:e,t=n?t:o,u[e]=t}),u}}function Er(n){return function(t,r,e){return t=u(t),(n?t:"")+Wr(t,r,e)+(n?"":t)}}function Cr(n){var t=yu(function(r,e){var u=g(e,t.placeholder);return Tr(r,n,b,e,u)});return t}function Sr(n,t){return function(r,e,u,i){var o=arguments.length<3;return"function"==typeof e&&i===b&&Cf(r)?n(r,e,u,o):Gt(r,Dr(e,i,4),u,o,t)}}function Ur(n,t,r,e,u,i,o,f,a,c){function l(){for(var w=arguments.length,m=w,x=zi(w);m--;)x[m]=arguments[m];if(e&&(x=ar(x,e,u)),i&&(x=cr(x,i,o)),v||y){var A=l.placeholder,I=g(x,A);if((w-=I.length)<c){var R=f?et(f):b,O=bo(c-w,0),S=v?I:b,U=v?b:I,W=v?x:b,$=v?b:x;t|=v?E:C,t&=~(v?C:E),_||(t&=~(j|k));var F=[n,t,r,W,S,$,U,R,a,O],N=Ur.apply(b,F);return te(n)&&qo(N,F),N.placeholder=A,N}}var T=p?r:this,L=h?T[n]:n;return f&&(x=ae(x,f)),s&&a<x.length&&(x.length=a),this&&this!==Zn&&this instanceof l&&(L=d||yr(n)),L.apply(T,x)}var s=t&S,p=t&j,h=t&k,v=t&R,_=t&I,y=t&O,d=h?b:yr(n);return l}function Wr(n,t,r){var e=n.length;if(t=+t,e>=t||!mo(t))return"";var u=t-e;return r=null==r?" ":r+"",gi(r,_o(u/r.length)).slice(0,u)}function $r(n,t,r,e){function u(){for(var t=-1,f=arguments.length,a=-1,c=e.length,l=zi(c+f);++a<c;)l[a]=e[a];for(;f--;)l[a++]=arguments[++t];return(this&&this!==Zn&&this instanceof u?o:n).apply(i?r:this,l)}var i=t&j,o=yr(n);return u}function Fr(n){var t=Pi[n];return function(n,r){return r=r===b?0:+r||0,r?(r=ao(10,r),t(n*r)/r):t(n)}}function Nr(n){return function(t,r,e,u){var i=Dr(e);return null==e&&i===xt?ur(t,r,n):ir(t,r,i(e,u,1),n)}}function Tr(n,t,r,e,u,i,o,f){var a=t&k;if(!a&&"function"!=typeof n)throw new Ji(z);var c=e?e.length:0;if(c||(t&=~(E|C),e=u=b),c-=u?u.length:0,t&C){var l=e,s=u;e=u=b}var p=a?b:Do(n),h=[n,t,r,e,u,l,s,i,o,f];if(p&&(ue(h,p),t=h[1],f=h[9]),h[9]=null==f?a?0:n.length:bo(f-c,0)||0,t==j)var v=vr(h[0],h[2]);else v=t!=E&&t!=(j|E)||h[4].length?Ur.apply(b,h):$r.apply(b,h);return(p?zo:qo)(v,h)}function Lr(n,t,r,e,u,i,o){var f=-1,a=n.length,c=t.length;if(a!=c&&!(u&&c>a))return!1;for(;++f<a;){var l=n[f],s=t[f],p=e?e(u?s:l,u?l:s,f):b;if(p!==b){if(p)continue;return!1}if(u){if(!ht(t,function(n){return l===n||r(l,n,e,u,i,o)}))return!1}else if(l!==s&&!r(l,s,e,u,i,o))return!1}return!0}function Br(n,t,r){switch(r){case P:case K:return+n==+t;case V:return n.name==t.name&&n.message==t.message;case G:return n!=+n?t!=+t:n==+t;case X:case Z:return n==t+""}return!1}function zr(n,t,r,e,u,i,o){var f=Df(n),a=f.length;if(a!=Df(t).length&&!u)return!1;for(var c=a;c--;){var l=f[c];if(!(u?l in t:no.call(t,l)))return!1}for(var s=u;++c<a;){l=f[c];var p=n[l],h=t[l],v=e?e(u?h:p,u?p:h,l):b;if(!(v===b?r(p,h,e,u,i,o):v))return!1;s||(s="constructor"==l)}if(!s){var _=n.constructor,g=t.constructor;if(_!=g&&"constructor"in n&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof g&&g instanceof g))return!1}return!0}function Dr(n,t,r){var e=Bn.callback||ki;return e=e===ki?xt:e,r?e(n,t,r):e}function Mr(n){for(var t=n.name,r=$o[t],e=r?r.length:0;e--;){var u=r[e],i=u.func;if(null==i||i==n)return u.name}return t}function qr(n,t,e){var u=Bn.indexOf||je;return u=u===je?r:u,n?u(n,t,e):u}function Pr(n){for(var t=ti(n),r=t.length;r--;)t[r][2]=ee(t[r][1]);return t}function Kr(n,t){var r=null==n?b:n[t];return Tu(r)?r:b}function Vr(n,t,r){for(var e=-1,u=r.length;++e<u;){var i=r[e],o=i.size;switch(i.type){case"drop":n+=o;break;case"dropRight":t-=o;break;case"take":t=Ao(t,n+o);break;case"takeRight":n=bo(n,t-o)}}return{start:n,end:t}}function Yr(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&no.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function Gr(n){var t=n.constructor;return"function"==typeof t&&t instanceof t||(t=Vi),new t}function Jr(n,t,r){var e=n.constructor;switch(t){case H:return fr(n);case P:case K:return new e(+n);case Q:case nn:case tn:case rn:case en:case un:case on:case fn:case an:var u=n.buffer;return new e(r?fr(u):u,n.byteOffset,n.length);case G:case Z:return new e(n);case X:var i=new e(n.source,Rn.exec(n));i.lastIndex=n.lastIndex}return i}function Xr(n,t,r){null==n||ne(t,n)||(t=pe(t),n=1==t.length?n:Ft(n,Jt(t,0,-1)),t=Ie(t));var e=null==n?n:n[t];return null==e?b:e.apply(n,r)}function Zr(n){return null!=n&&re(Mo(n))}function Hr(n,t){return n="number"==typeof n||Cn.test(n)?+n:-1,t=null==t?Uo:t,n>-1&&n%1==0&&n<t}function Qr(n,t,r){if(!$u(r))return!1;var e=typeof t;if("number"==e?Zr(r)&&Hr(t,r.length):"string"==e&&t in r){var u=r[t];return n===n?n===u:u!==u}return!1}function ne(n,t){var r=typeof n;return!!("string"==r&&mn.test(n)||"number"==r)||!Cf(n)&&(!wn.test(n)||null!=t&&n in se(t))}function te(n){var t=Mr(n);if(!(t in Mn.prototype))return!1;var r=Bn[t];if(n===r)return!0;var e=Do(r);return!!e&&n===e[0]}function re(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=Uo}function ee(n){return n===n&&!$u(n)}function ue(n,t){var r=n[1],e=t[1],u=r|e,i=u<S,o=e==S&&r==R||e==S&&r==U&&n[7].length<=t[8]||e==(S|U)&&r==R;if(!i&&!o)return n;e&j&&(n[2]=t[2],u|=r&j?0:I);var f=t[3];if(f){var a=n[3];n[3]=a?ar(a,f,t[4]):et(f),n[4]=a?g(n[3],D):et(t[4])}return f=t[5],f&&(a=n[5],n[5]=a?cr(a,f,t[6]):et(f),n[6]=a?g(n[5],D):et(t[6])),f=t[7],f&&(n[7]=et(f)),e&S&&(n[8]=null==n[8]?t[8]:Ao(n[8],t[8])),null==n[9]&&(n[9]=t[9]),n[0]=t[0],n[1]=u,n}function ie(n,t){return n===b?t:Sf(n,t,ie)}function oe(n,t){n=se(n);for(var r=-1,e=t.length,u={};++r<e;){var i=t[r];i in n&&(u[i]=n[i])}return u}function fe(n,t){var r={};return St(n,function(n,e,u){t(n,e,u)&&(r[e]=n)}),r}function ae(n,t){for(var r=n.length,e=Ao(t.length,r),u=et(n);e--;){var i=t[e];n[e]=Hr(i,r)?u[i]:b}return n}function ce(n){for(var t=ni(n),r=t.length,e=r&&n.length,u=!!e&&re(e)&&(Cf(n)||ku(n)),i=-1,o=[];++i<r;){var f=t[i];(u&&Hr(f,e)||no.call(n,f))&&o.push(f)}return o}function le(n){return null==n?[]:Zr(n)?$u(n)?n:Vi(n):ii(n)}function se(n){return $u(n)?n:Vi(n)}function pe(n){if(Cf(n))return n;var t=[];return u(n).replace(xn,function(n,r,e,u){t.push(e?u.replace(kn,"$1"):r||n)}),t}function he(n){return n instanceof Mn?n.clone():new Dn(n.__wrapped__,n.__chain__,et(n.__actions__))}function ve(n,t,r){t=(r?Qr(n,t,r):null==t)?1:bo(yo(t)||1,1);for(var e=0,u=n?n.length:0,i=-1,o=zi(_o(u/t));e<u;)o[++i]=Jt(n,e,e+=t);return o}function _e(n){for(var t=-1,r=n?n.length:0,e=-1,u=[];++t<r;){var i=n[t];i&&(u[++e]=i)}return u}function ge(n,t,r){return(n?n.length:0)?((r?Qr(n,t,r):null==t)&&(t=1),Jt(n,t<0?0:t)):[]}function ye(n,t,r){var e=n?n.length:0;return e?((r?Qr(n,t,r):null==t)&&(t=1),t=e-(+t||0),Jt(n,0,t<0?0:t)):[]}function de(n,t,r){return n&&n.length?rr(n,Dr(t,r,3),!0,!0):[]}function we(n,t,r){return n&&n.length?rr(n,Dr(t,r,3),!0):[]}function me(n,t,r,e){var u=n?n.length:0;return u?(r&&"number"!=typeof r&&Qr(n,t,r)&&(r=0,e=u),Rt(n,t,r,e)):[]}function xe(n){return n?n[0]:b}function be(n,t,r){var e=n?n.length:0;return r&&Qr(n,t,r)&&(t=!1),e?Ct(n,t):[]}function Ae(n){return(n?n.length:0)?Ct(n,!0):[]}function je(n,t,e){var u=n?n.length:0;if(!u)return-1;if("number"==typeof e)e=e<0?bo(u+e,0):e;else if(e){var i=ur(n,t);return i<u&&(t===t?t===n[i]:n[i]!==n[i])?i:-1}return r(n,t,e||0)}function ke(n){return ye(n,1)}function Ie(n){var t=n?n.length:0;return t?n[t-1]:b}function Re(n,t,r){var e=n?n.length:0;if(!e)return-1;var u=e;if("number"==typeof r)u=(r<0?bo(e+r,0):Ao(r||0,e-1))+1;else if(r){u=ur(n,t,!0)-1;var i=n[u];return(t===t?t===i:i!==i)?u:-1}if(t!==t)return h(n,u,!0);for(;u--;)if(n[u]===t)return u;return-1}function Oe(){var n=arguments,t=n[0];if(!t||!t.length)return t;for(var r=0,e=qr(),u=n.length;++r<u;)for(var i=0,o=n[r];(i=e(t,o,i))>-1;)po.call(t,i,1);return t}function Ee(n,t,r){var e=[];if(!n||!n.length)return e;var u=-1,i=[],o=n.length;for(t=Dr(t,r,3);++u<o;){var f=n[u];t(f,u,n)&&(e.push(f),i.push(u))}return Vt(n,i),e}function Ce(n){return ge(n,1)}function Se(n,t,r){var e=n?n.length:0;return e?(r&&"number"!=typeof r&&Qr(n,t,r)&&(t=0,r=e),Jt(n,t,r)):[]}function Ue(n,t,r){return(n?n.length:0)?((r?Qr(n,t,r):null==t)&&(t=1),Jt(n,0,t<0?0:t)):[]}function We(n,t,r){var e=n?n.length:0;return e?((r?Qr(n,t,r):null==t)&&(t=1),t=e-(+t||0),Jt(n,t<0?0:t)):[]}function $e(n,t,r){return n&&n.length?rr(n,Dr(t,r,3),!1,!0):[]}function Fe(n,t,r){return n&&n.length?rr(n,Dr(t,r,3)):[]}function Ne(n,t,e,u){if(!(n?n.length:0))return[];null!=t&&"boolean"!=typeof t&&(u=e,e=Qr(n,t,u)?b:t,t=!1);var i=Dr();return null==e&&i===xt||(e=i(e,u,3)),t&&qr()==r?y(n,e):nr(n,e)}function Te(n){if(!n||!n.length)return[];var t=-1,r=0;n=at(n,function(n){if(Zr(n))return r=bo(n.length,r),!0});for(var e=zi(r);++t<r;)e[t]=ct(n,Pt(t));return e}function Le(n,t,r){if(!(n?n.length:0))return[];var e=Te(n);return null==t?e:(t=or(t,r,4),ct(e,function(n){return st(n,t,b,!0)}))}function Be(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(Zr(r))var e=e?lt(jt(e,r),jt(r,e)):r}return e?nr(e):[]}function ze(n,t){var r=-1,e=n?n.length:0,u={};for(!e||t||Cf(n[0])||(t=[]);++r<e;){var i=n[r];t?u[i]=t[r]:i&&(u[i[0]]=i[1])}return u}function De(n){var t=Bn(n);return t.__chain__=!0,t}function Me(n,t,r){return t.call(r,n),n}function qe(n,t,r){return t.call(r,n)}function Pe(){return De(this)}function Ke(){return new Dn(this.value(),this.__chain__)}function Ve(n){for(var t,r=this;r instanceof zn;){var e=he(r);t?u.__wrapped__=e:t=e;var u=e;r=r.__wrapped__}return u.__wrapped__=n,t}function Ye(){var n=this.__wrapped__,t=function(n){return r&&r.__dir__<0?n:n.reverse()};if(n instanceof Mn){var r=n;return this.__actions__.length&&(r=new Mn(this)),r=r.reverse(),r.__actions__.push({func:qe,args:[t],thisArg:b}),new Dn(r,this.__chain__)}return this.thru(t)}function Ge(){return this.value()+""}function Je(){return er(this.__wrapped__,this.__actions__)}function Xe(n,t,r){var e=Cf(n)?ot:kt;return r&&Qr(n,t,r)&&(t=b),"function"==typeof t&&r===b||(t=Dr(t,r,3)),e(n,t)}function Ze(n,t,r){var e=Cf(n)?at:Ot;return t=Dr(t,r,3),e(n,t)}function He(n,t){return uf(n,zt(t))}function Qe(n,t,r,e){var u=n?Mo(n):0;return re(u)||(n=ii(n),u=n.length),r="number"!=typeof r||e&&Qr(t,r,e)?0:r<0?bo(u+r,0):r||0,"string"==typeof n||!Cf(n)&&Mu(n)?r<=u&&n.indexOf(t,r)>-1:!!u&&qr(n,t,r)>-1}function nu(n,t,r){var e=Cf(n)?ct:Bt;return t=Dr(t,r,3),e(n,t)}function tu(n,t){return nu(n,Wi(t))}function ru(n,t,r){var e=Cf(n)?at:Ot;return t=Dr(t,r,3),e(n,function(n,r,e){return!t(n,r,e)})}function eu(n,t,r){if(r?Qr(n,t,r):null==t){n=le(n);var e=n.length;return e>0?n[Yt(0,e-1)]:b}var u=-1,i=Yu(n),e=i.length,o=e-1;for(t=Ao(t<0?0:+t||0,e);++u<t;){var f=Yt(u,o),a=i[f];i[f]=i[u],i[u]=a}return i.length=t,i}function uu(n){return eu(n,Oo)}function iu(n){var t=n?Mo(n):0;return re(t)?t:Df(n).length}function ou(n,t,r){var e=Cf(n)?ht:Xt;return r&&Qr(n,t,r)&&(t=b),"function"==typeof t&&r===b||(t=Dr(t,r,3)),e(n,t)}function fu(n,t,r){if(null==n)return[];r&&Qr(n,t,r)&&(t=b);var e=-1;return t=Dr(t,r,3),Zt(Bt(n,function(n,r,u){return{criteria:t(n,r,u),index:++e,value:n}}),f)}function au(n,t,r,e){return null==n?[]:(e&&Qr(t,r,e)&&(r=b),Cf(t)||(t=null==t?[]:[t]),Cf(r)||(r=null==r?[]:[r]),Ht(n,t,r))}function cu(n,t){return Ze(n,zt(t))}function lu(n,t){if("function"!=typeof t){if("function"!=typeof n)throw new Ji(z);var r=n;n=t,t=r}return n=mo(n=+n)?n:0,function(){if(--n<1)return t.apply(this,arguments)}}function su(n,t,r){return r&&Qr(n,t,r)&&(t=b),t=n&&null==t?n.length:bo(+t||0,0),Tr(n,S,b,b,b,b,t)}function pu(n,t){var r;if("function"!=typeof t){if("function"!=typeof n)throw new Ji(z);var e=n;n=t,t=e}return function(){return--n>0&&(r=t.apply(this,arguments)),n<=1&&(t=b),r}}function hu(n,t,r){function e(){h&&oo(h),c&&oo(c),_=0,c=h=v=b}function u(t,r){r&&oo(r),c=h=v=b,t&&(_=gf(),l=n.apply(p,a),h||c||(a=p=b))}function i(){var n=t-(gf()-s);n<=0||n>t?u(v,c):h=so(i,n)}function o(){u(y,h)}function f(){if(a=arguments,s=gf(),p=this,v=y&&(h||!d),!1===g)var r=d&&!h;else{c||d||(_=s);var e=g-(s-_),u=e<=0||e>g;u?(c&&(c=oo(c)),_=s,l=n.apply(p,a)):c||(c=so(o,e))}return u&&h?h=oo(h):h||t===g||(h=so(i,t)),r&&(u=!0,l=n.apply(p,a)),!u||h||c||(a=p=b),l}var a,c,l,s,p,h,v,_=0,g=!1,y=!0;if("function"!=typeof n)throw new Ji(z);if(t=t<0?0:+t||0,!0===r){var d=!0;y=!1}else $u(r)&&(d=!!r.leading,g="maxWait"in r&&bo(+r.maxWait||0,t),y="trailing"in r?!!r.trailing:y);return f.cancel=e,f}function vu(n,t){if("function"!=typeof n||t&&"function"!=typeof t)throw new Ji(z);var r=function(){var e=arguments,u=t?t.apply(this,e):e[0],i=r.cache;if(i.has(u))return i.get(u);var o=n.apply(this,e);return r.cache=i.set(u,o),o};return r.cache=new vu.Cache,r}function _u(n){if("function"!=typeof n)throw new Ji(z);return function(){return!n.apply(this,arguments)}}function gu(n){return pu(2,n)}function yu(n,t){if("function"!=typeof n)throw new Ji(z);return t=bo(t===b?n.length-1:+t||0,0),function(){for(var r=arguments,e=-1,u=bo(r.length-t,0),i=zi(u);++e<u;)i[e]=r[t+e];switch(t){case 0:return n.call(this,i);case 1:return n.call(this,r[0],i);case 2:return n.call(this,r[0],r[1],i)}var o=zi(t+1);for(e=-1;++e<t;)o[e]=r[e];return o[t]=i,n.apply(this,o)}}function du(n){if("function"!=typeof n)throw new Ji(z);return function(t){return n.apply(this,t)}}function wu(n,t,r){var e=!0,u=!0;if("function"!=typeof n)throw new Ji(z);return!1===r?e=!1:$u(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),hu(n,t,{leading:e,maxWait:+t,trailing:u})}function mu(n,t){return t=null==t?Ri:t,Tr(t,E,b,[n],[])}function xu(n,t,r,e){return t&&"boolean"!=typeof t&&Qr(n,t,r)?t=!1:"function"==typeof t&&(e=r,r=t,t=!1),"function"==typeof r?bt(n,t,or(r,e,1)):bt(n,t)}function bu(n,t,r){return"function"==typeof t?bt(n,!0,or(t,r,1)):bt(n,!0)}function Au(n,t){return n>t}function ju(n,t){return n>=t}function ku(n){return v(n)&&Zr(n)&&no.call(n,"callee")&&!co.call(n,"callee")}function Iu(n){return!0===n||!1===n||v(n)&&ro.call(n)==P}function Ru(n){return v(n)&&ro.call(n)==K}function Ou(n){return!!n&&1===n.nodeType&&v(n)&&!zu(n)}function Eu(n){return null==n||(Zr(n)&&(Cf(n)||Mu(n)||ku(n)||v(n)&&Wu(n.splice))?!n.length:!Df(n).length)}function Cu(n,t,r,e){r="function"==typeof r?or(r,e,3):b;var u=r?r(n,t):b;return u===b?Nt(n,t,r):!!u}function Su(n){return v(n)&&"string"==typeof n.message&&ro.call(n)==V}function Uu(n){return"number"==typeof n&&mo(n)}function Wu(n){return $u(n)&&ro.call(n)==Y}function $u(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}function Fu(n,t,r,e){return r="function"==typeof r?or(r,e,3):b,Lt(n,Pr(t),r)}function Nu(n){return Bu(n)&&n!=+n}function Tu(n){return null!=n&&(Wu(n)?uo.test(Qi.call(n)):v(n)&&En.test(n))}function Lu(n){return null===n}function Bu(n){return"number"==typeof n||v(n)&&ro.call(n)==G}function zu(n){var t;if(!v(n)||ro.call(n)!=J||ku(n)||!no.call(n,"constructor")&&"function"==typeof(t=n.constructor)&&!(t instanceof t))return!1;var r;return St(n,function(n,t){r=t}),r===b||no.call(n,r)}function Du(n){return $u(n)&&ro.call(n)==X}function Mu(n){return"string"==typeof n||v(n)&&ro.call(n)==Z}function qu(n){return v(n)&&re(n.length)&&!!Tn[ro.call(n)]}function Pu(n){return n===b}function Ku(n,t){return n<t}function Vu(n,t){return n<=t}function Yu(n){var t=n?Mo(n):0;return re(t)?t?et(n):[]:ii(n)}function Gu(n){return mt(n,ni(n))}function Ju(n,t,r){var e=Fo(n);return r&&Qr(n,t,r)&&(t=b),t?dt(e,t):e}function Xu(n){return $t(n,ni(n))}function Zu(n,t,r){var e=null==n?b:Ft(n,pe(t),t+"");return e===b?r:e}function Hu(n,t){if(null==n)return!1;var r=no.call(n,t);if(!r&&!ne(t)){if(t=pe(t),null==(n=1==t.length?n:Ft(n,Jt(t,0,-1))))return!1;t=Ie(t),r=no.call(n,t)}return r||re(n.length)&&Hr(t,n.length)&&(Cf(n)||ku(n))}function Qu(n,t,r){r&&Qr(n,t,r)&&(t=b);for(var e=-1,u=Df(n),i=u.length,o={};++e<i;){var f=u[e],a=n[f];t?no.call(o,a)?o[a].push(f):o[a]=[f]:o[a]=f}return o}function ni(n){if(null==n)return[];$u(n)||(n=Vi(n));var t=n.length;t=t&&re(t)&&(Cf(n)||ku(n))&&t||0;for(var r=n.constructor,e=-1,u="function"==typeof r&&r.prototype===n,i=zi(t),o=t>0;++e<t;)i[e]=e+"";for(var f in n)o&&Hr(f,t)||"constructor"==f&&(u||!no.call(n,f))||i.push(f);return i}function ti(n){n=se(n);for(var t=-1,r=Df(n),e=r.length,u=zi(e);++t<e;){var i=r[t];u[t]=[i,n[i]]}return u}function ri(n,t,r){var e=null==n?b:n[t];return e===b&&(null==n||ne(t,n)||(t=pe(t),n=1==t.length?n:Ft(n,Jt(t,0,-1)),e=null==n?b:n[Ie(t)]),e=e===b?r:e),Wu(e)?e.call(n):e}function ei(n,t,r){if(null==n)return n;var e=t+"";t=null!=n[e]||ne(t,n)?[e]:pe(t);for(var u=-1,i=t.length,o=i-1,f=n;null!=f&&++u<i;){var a=t[u];$u(f)&&(u==o?f[a]=r:null==f[a]&&(f[a]=Hr(t[u+1])?[]:{})),f=f[a]}return n}function ui(n,t,r,e){var u=Cf(n)||qu(n);if(t=Dr(t,e,4),null==r)if(u||$u(n)){var i=n.constructor;r=u?Cf(n)?new i:[]:Fo(Wu(i)?i.prototype:b)}else r={};return(u?ut:Ut)(n,function(n,e,u){return t(r,n,e,u)}),r}function ii(n){return tr(n,Df(n))}function oi(n){return tr(n,ni(n))}function fi(n,t,r){return t=+t||0,r===b?(r=t,t=0):r=+r||0,n>=Ao(t,r)&&n<bo(t,r)}function ai(n,t,r){r&&Qr(n,t,r)&&(t=r=b);var e=null==n,u=null==t;if(null==r&&(u&&"boolean"==typeof n?(r=n,n=1):"boolean"==typeof t&&(r=t,u=!0)),e&&u&&(t=1,u=!1),n=+n||0,u?(t=n,n=0):t=+t||0,r||n%1||t%1){var i=Io();return Ao(n+i*(t-n+fo("1e-"+((i+"").length-1))),t)}return Yt(n,t)}function ci(n){return(n=u(n))&&n.charAt(0).toUpperCase()+n.slice(1)}function li(n){return(n=u(n))&&n.replace(Sn,c).replace(jn,"")}function si(n,t,r){n=u(n),t+="";var e=n.length;return r=r===b?e:Ao(r<0?0:+r||0,e),
(r-=t.length)>=0&&n.indexOf(t,r)==r}function pi(n){return n=u(n),n&&_n.test(n)?n.replace(hn,l):n}function hi(n){return n=u(n),n&&An.test(n)?n.replace(bn,s):n||"(?:)"}function vi(n,t,r){n=u(n),t=+t;var e=n.length;if(e>=t||!mo(t))return n;var i=(t-e)/2,o=yo(i);return r=Wr("",_o(i),r),r.slice(0,o)+n+r}function _i(n,t,r){return(r?Qr(n,t,r):null==t)?t=0:t&&(t=+t),n=wi(n),ko(n,t||(On.test(n)?16:10))}function gi(n,t){var r="";if(n=u(n),(t=+t)<1||!n||!mo(t))return r;do{t%2&&(r+=n),t=yo(t/2),n+=n}while(t);return r}function yi(n,t,r){return n=u(n),r=null==r?0:Ao(r<0?0:+r||0,n.length),n.lastIndexOf(t,r)==r}function di(n,t,r){var e=Bn.templateSettings;r&&Qr(n,t,r)&&(t=r=b),n=u(n),t=yt(dt({},r||t),e,gt);var i,o,f=yt(dt({},t.imports),e.imports,gt),a=Df(f),c=tr(f,a),l=0,s=t.interpolate||Un,h="__p += '",v=Yi((t.escape||Un).source+"|"+s.source+"|"+(s===dn?In:Un).source+"|"+(t.evaluate||Un).source+"|$","g"),_="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Nn+"]")+"\n";n.replace(v,function(t,r,e,u,f,a){return e||(e=u),h+=n.slice(l,a).replace(Wn,p),r&&(i=!0,h+="' +\n__e("+r+") +\n'"),f&&(o=!0,h+="';\n"+f+";\n__p += '"),e&&(h+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),l=a+t.length,t}),h+="';\n";var g=t.variable;g||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(cn,""):h).replace(ln,"$1").replace(sn,"$1;"),h="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var y=Hf(function(){return qi(a,_+"return "+h).apply(b,c)});if(y.source=h,Su(y))throw y;return y}function wi(n,t,r){var e=n;return(n=u(n))?(r?Qr(e,t,r):null==t)?n.slice(d(n),w(n)+1):(t+="",n.slice(i(n,t),o(n,t)+1)):n}function mi(n,t,r){var e=n;return n=u(n),n?(r?Qr(e,t,r):null==t)?n.slice(d(n)):n.slice(i(n,t+"")):n}function xi(n,t,r){var e=n;return n=u(n),n?(r?Qr(e,t,r):null==t)?n.slice(0,w(n)+1):n.slice(0,o(n,t+"")+1):n}function bi(n,t,r){r&&Qr(n,t,r)&&(t=b);var e=W,i=$;if(null!=t)if($u(t)){var o="separator"in t?t.separator:o;e="length"in t?+t.length||0:e,i="omission"in t?u(t.omission):i}else e=+t||0;if(n=u(n),e>=n.length)return n;var f=e-i.length;if(f<1)return i;var a=n.slice(0,f);if(null==o)return a+i;if(Du(o)){if(n.slice(f).search(o)){var c,l,s=n.slice(0,f);for(o.global||(o=Yi(o.source,(Rn.exec(o)||"")+"g")),o.lastIndex=0;c=o.exec(s);)l=c.index;a=a.slice(0,null==l?f:l)}}else if(n.indexOf(o,f)!=f){var p=a.lastIndexOf(o);p>-1&&(a=a.slice(0,p))}return a+i}function Ai(n){return n=u(n),n&&vn.test(n)?n.replace(pn,m):n}function ji(n,t,r){return r&&Qr(n,t,r)&&(t=b),n=u(n),n.match(t||$n)||[]}function ki(n,t,r){return r&&Qr(n,t,r)&&(t=b),v(n)?Oi(n):xt(n,t)}function Ii(n){return function(){return n}}function Ri(n){return n}function Oi(n){return zt(bt(n,!0))}function Ei(n,t){return Dt(n,bt(t,!0))}function Ci(n,t,r){if(null==r){var e=$u(t),u=e?Df(t):b,i=u&&u.length?$t(t,u):b;(i?i.length:e)||(i=!1,r=t,t=n,n=this)}i||(i=$t(t,Df(t)));var o=!0,f=-1,a=Wu(n),c=i.length;!1===r?o=!1:$u(r)&&"chain"in r&&(o=r.chain);for(;++f<c;){var l=i[f],s=t[l];n[l]=s,a&&(n.prototype[l]=function(t){return function(){var r=this.__chain__;if(o||r){var e=n(this.__wrapped__);return(e.__actions__=et(this.__actions__)).push({func:t,args:arguments,thisArg:n}),e.__chain__=r,e}return t.apply(n,lt([this.value()],arguments))}}(s))}return n}function Si(){return Zn._=eo,this}function Ui(){}function Wi(n){return ne(n)?Pt(n):Kt(n)}function $i(n){return function(t){return Ft(n,pe(t),t+"")}}function Fi(n,t,r){r&&Qr(n,t,r)&&(t=r=b),n=+n||0,r=null==r?1:+r||0,null==t?(t=n,n=0):t=+t||0;for(var e=-1,u=bo(_o((t-n)/(r||1)),0),i=zi(u);++e<u;)i[e]=n,n+=r;return i}function Ni(n,t,r){if((n=yo(n))<1||!mo(n))return[];var e=-1,u=zi(Ao(n,Eo));for(t=or(t,r,1);++e<n;)e<Eo?u[e]=t(e):t(e);return u}function Ti(n){var t=++to;return u(n)+t}function Li(n,t){return(+n||0)+(+t||0)}function Bi(n,t,r){return r&&Qr(n,t,r)&&(t=b),t=Dr(t,r,3),1==t.length?vt(Cf(n)?n:le(n),t):Qt(n,t)}_=_?Hn.defaults(Zn.Object(),_,Hn.pick(Zn,Fn)):Zn;var zi=_.Array,Di=_.Date,Mi=_.Error,qi=_.Function,Pi=_.Math,Ki=_.Number,Vi=_.Object,Yi=_.RegExp,Gi=_.String,Ji=_.TypeError,Xi=zi.prototype,Zi=Vi.prototype,Hi=Gi.prototype,Qi=qi.prototype.toString,no=Zi.hasOwnProperty,to=0,ro=Zi.toString,eo=Zn._,uo=Yi("^"+Qi.call(no).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),io=_.ArrayBuffer,oo=_.clearTimeout,fo=_.parseFloat,ao=Pi.pow,co=Zi.propertyIsEnumerable,lo=Kr(_,"Set"),so=_.setTimeout,po=Xi.splice,ho=_.Uint8Array,vo=Kr(_,"WeakMap"),_o=Pi.ceil,go=Kr(Vi,"create"),yo=Pi.floor,wo=Kr(zi,"isArray"),mo=_.isFinite,xo=Kr(Vi,"keys"),bo=Pi.max,Ao=Pi.min,jo=Kr(Di,"now"),ko=_.parseInt,Io=Pi.random,Ro=Ki.NEGATIVE_INFINITY,Oo=Ki.POSITIVE_INFINITY,Eo=4294967295,Co=Eo-1,So=Eo>>>1,Uo=9007199254740991,Wo=vo&&new vo,$o={};Bn.support={};Bn.templateSettings={escape:gn,evaluate:yn,interpolate:dn,variable:"",imports:{_:Bn}};var Fo=function(){function n(){}return function(t){if($u(t)){n.prototype=t;var r=new n;n.prototype=b}return r||{}}}(),No=pr(Ut),To=pr(Wt,!0),Lo=hr(),Bo=hr(!0),zo=Wo?function(n,t){return Wo.set(n,t),n}:Ri,Do=Wo?function(n){return Wo.get(n)}:Ui,Mo=Pt("length"),qo=function(){var n=0,t=0;return function(r,e){var u=gf(),i=N-(u-t);if(t=u,i>0){if(++n>=F)return r}else n=0;return zo(r,e)}}(),Po=yu(function(n,t){return v(n)&&Zr(n)?jt(n,Ct(t,!1,!0)):[]}),Ko=br(),Vo=br(!0),Yo=yu(function(n){for(var t=n.length,e=t,u=zi(s),i=qr(),o=i==r,f=[];e--;){var a=n[e]=Zr(a=n[e])?a:[];u[e]=o&&a.length>=120?_r(e&&a):null}var c=n[0],l=-1,s=c?c.length:0,p=u[0];n:for(;++l<s;)if(a=c[l],(p?nt(p,a):i(f,a,0))<0){for(var e=t;--e;){var h=u[e];if((h?nt(h,a):i(n[e],a,0))<0)continue n}p&&p.push(a),f.push(a)}return f}),Go=yu(function(t,r){r=Ct(r);var e=wt(t,r);return Vt(t,r.sort(n)),e}),Jo=Nr(),Xo=Nr(!0),Zo=yu(function(n){return nr(Ct(n,!1,!0))}),Ho=yu(function(n,t){return Zr(n)?jt(n,t):[]}),Qo=yu(Te),nf=yu(function(n){var t=n.length,r=t>2?n[t-2]:b,e=t>1?n[t-1]:b;return t>2&&"function"==typeof r?t-=2:(r=t>1&&"function"==typeof e?(--t,e):b,e=b),n.length=t,Le(n,r,e)}),tf=yu(function(n){return n=Ct(n),this.thru(function(t){return rt(Cf(t)?t:[se(t)],n)})}),rf=yu(function(n,t){return wt(n,Ct(t))}),ef=lr(function(n,t,r){no.call(n,r)?++n[r]:n[r]=1}),uf=xr(No),of=xr(To,!0),ff=kr(ut,No),af=kr(it,To),cf=lr(function(n,t,r){no.call(n,r)?n[r].push(t):n[r]=[t]}),lf=lr(function(n,t,r){n[r]=t}),sf=yu(function(n,t,r){var e=-1,u="function"==typeof t,i=ne(t),o=Zr(n)?zi(n.length):[];return No(n,function(n){var f=u?t:i&&null!=n?n[t]:b;o[++e]=f?f.apply(n,r):Xr(n,t,r)}),o}),pf=lr(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),hf=Sr(st,No),vf=Sr(pt,To),_f=yu(function(n,t){if(null==n)return[];var r=t[2];return r&&Qr(t[0],t[1],r)&&(t.length=1),Ht(n,Ct(t),[])}),gf=jo||function(){return(new Di).getTime()},yf=yu(function(n,t,r){var e=j;if(r.length){var u=g(r,yf.placeholder);e|=E}return Tr(n,e,t,r,u)}),df=yu(function(n,t){t=t.length?Ct(t):Xu(n);for(var r=-1,e=t.length;++r<e;){var u=t[r];n[u]=Tr(n[u],j,n)}return n}),wf=yu(function(n,t,r){var e=j|k;if(r.length){var u=g(r,wf.placeholder);e|=E}return Tr(t,e,n,r,u)}),mf=dr(R),xf=dr(O),bf=yu(function(n,t){return At(n,1,t)}),Af=yu(function(n,t,r){return At(n,t,r)}),jf=jr(),kf=jr(!0),If=yu(function(n,t){if(t=Ct(t),"function"!=typeof n||!ot(t,e))throw new Ji(z);var r=t.length;return yu(function(e){for(var u=Ao(e.length,r);u--;)e[u]=t[u](e[u]);return n.apply(this,e)})}),Rf=Cr(E),Of=Cr(C),Ef=yu(function(n,t){return Tr(n,U,b,b,b,Ct(t))}),Cf=wo||function(n){return v(n)&&re(n.length)&&ro.call(n)==q},Sf=sr(Mt),Uf=sr(function(n,t,r){return r?yt(n,t,r):dt(n,t)}),Wf=wr(Uf,_t),$f=wr(Sf,ie),Ff=Ar(Ut),Nf=Ar(Wt),Tf=Ir(Lo),Lf=Ir(Bo),Bf=Rr(Ut),zf=Rr(Wt),Df=xo?function(n){var t=null==n?b:n.constructor;return"function"==typeof t&&t.prototype===n||"function"!=typeof n&&Zr(n)?ce(n):$u(n)?xo(n):[]}:ce,Mf=Or(!0),qf=Or(),Pf=yu(function(n,t){if(null==n)return{};if("function"!=typeof t[0]){var t=ct(Ct(t),Gi);return oe(n,jt(ni(n),t))}var r=or(t[0],t[1],3);return fe(n,function(n,t,e){return!r(n,t,e)})}),Kf=yu(function(n,t){return null==n?{}:"function"==typeof t[0]?fe(n,or(t[0],t[1],3)):oe(n,Ct(t))}),Vf=gr(function(n,t,r){return t=t.toLowerCase(),n+(r?t.charAt(0).toUpperCase()+t.slice(1):t)}),Yf=gr(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()}),Gf=Er(),Jf=Er(!0),Xf=gr(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),Zf=gr(function(n,t,r){return n+(r?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Hf=yu(function(n,t){try{return n.apply(b,t)}catch(n){return Su(n)?n:new Mi(n)}}),Qf=yu(function(n,t){return function(r){return Xr(r,n,t)}}),na=yu(function(n,t){return function(r){return Xr(n,r,t)}}),ta=Fr("ceil"),ra=Fr("floor"),ea=mr(Au,Ro),ua=mr(Ku,Oo),ia=Fr("round");return Bn.prototype=zn.prototype,Dn.prototype=Fo(zn.prototype),Dn.prototype.constructor=Dn,Mn.prototype=Fo(zn.prototype),Mn.prototype.constructor=Mn,Vn.prototype.delete=Yn,Vn.prototype.get=Gn,Vn.prototype.has=Jn,Vn.prototype.set=Xn,Qn.prototype.push=tt,vu.Cache=Vn,Bn.after=lu,Bn.ary=su,Bn.assign=Uf,Bn.at=rf,Bn.before=pu,Bn.bind=yf,Bn.bindAll=df,Bn.bindKey=wf,Bn.callback=ki,Bn.chain=De,Bn.chunk=ve,Bn.compact=_e,Bn.constant=Ii,Bn.countBy=ef,Bn.create=Ju,Bn.curry=mf,Bn.curryRight=xf,Bn.debounce=hu,Bn.defaults=Wf,Bn.defaultsDeep=$f,Bn.defer=bf,Bn.delay=Af,Bn.difference=Po,Bn.drop=ge,Bn.dropRight=ye,Bn.dropRightWhile=de,Bn.dropWhile=we,Bn.fill=me,Bn.filter=Ze,Bn.flatten=be,Bn.flattenDeep=Ae,Bn.flow=jf,Bn.flowRight=kf,Bn.forEach=ff,Bn.forEachRight=af,Bn.forIn=Tf,Bn.forInRight=Lf,Bn.forOwn=Bf,Bn.forOwnRight=zf,Bn.functions=Xu,Bn.groupBy=cf,Bn.indexBy=lf,Bn.initial=ke,Bn.intersection=Yo,Bn.invert=Qu,Bn.invoke=sf,Bn.keys=Df,Bn.keysIn=ni,Bn.map=nu,Bn.mapKeys=Mf,Bn.mapValues=qf,Bn.matches=Oi,Bn.matchesProperty=Ei,Bn.memoize=vu,Bn.merge=Sf,Bn.method=Qf,Bn.methodOf=na,Bn.mixin=Ci,Bn.modArgs=If,Bn.negate=_u,Bn.omit=Pf,Bn.once=gu,Bn.pairs=ti,Bn.partial=Rf,Bn.partialRight=Of,Bn.partition=pf,Bn.pick=Kf,Bn.pluck=tu,Bn.property=Wi,Bn.propertyOf=$i,Bn.pull=Oe,Bn.pullAt=Go,Bn.range=Fi,Bn.rearg=Ef,Bn.reject=ru,Bn.remove=Ee,Bn.rest=Ce,Bn.restParam=yu,Bn.set=ei,Bn.shuffle=uu,Bn.slice=Se,Bn.sortBy=fu,Bn.sortByAll=_f,Bn.sortByOrder=au,Bn.spread=du,Bn.take=Ue,Bn.takeRight=We,Bn.takeRightWhile=$e,Bn.takeWhile=Fe,Bn.tap=Me,Bn.throttle=wu,Bn.thru=qe,Bn.times=Ni,Bn.toArray=Yu,Bn.toPlainObject=Gu,Bn.transform=ui,Bn.union=Zo,Bn.uniq=Ne,Bn.unzip=Te,Bn.unzipWith=Le,Bn.values=ii,Bn.valuesIn=oi,Bn.where=cu,Bn.without=Ho,Bn.wrap=mu,Bn.xor=Be,Bn.zip=Qo,Bn.zipObject=ze,Bn.zipWith=nf,Bn.backflow=kf,Bn.collect=nu,Bn.compose=kf,Bn.each=ff,Bn.eachRight=af,Bn.extend=Uf,Bn.iteratee=ki,Bn.methods=Xu,Bn.object=ze,Bn.select=Ze,Bn.tail=Ce,Bn.unique=Ne,Ci(Bn,Bn),Bn.add=Li,Bn.attempt=Hf,Bn.camelCase=Vf,Bn.capitalize=ci,Bn.ceil=ta,Bn.clone=xu,Bn.cloneDeep=bu,Bn.deburr=li,Bn.endsWith=si,Bn.escape=pi,Bn.escapeRegExp=hi,Bn.every=Xe,Bn.find=uf,Bn.findIndex=Ko,Bn.findKey=Ff,Bn.findLast=of,Bn.findLastIndex=Vo,Bn.findLastKey=Nf,Bn.findWhere=He,Bn.first=xe,Bn.floor=ra,Bn.get=Zu,Bn.gt=Au,Bn.gte=ju,Bn.has=Hu,Bn.identity=Ri,Bn.includes=Qe,Bn.indexOf=je,Bn.inRange=fi,Bn.isArguments=ku,Bn.isArray=Cf,Bn.isBoolean=Iu,Bn.isDate=Ru,Bn.isElement=Ou,Bn.isEmpty=Eu,Bn.isEqual=Cu,Bn.isError=Su,Bn.isFinite=Uu,Bn.isFunction=Wu,Bn.isMatch=Fu,Bn.isNaN=Nu,Bn.isNative=Tu,Bn.isNull=Lu,Bn.isNumber=Bu,Bn.isObject=$u,Bn.isPlainObject=zu,Bn.isRegExp=Du,Bn.isString=Mu,Bn.isTypedArray=qu,Bn.isUndefined=Pu,Bn.kebabCase=Yf,Bn.last=Ie,Bn.lastIndexOf=Re,Bn.lt=Ku,Bn.lte=Vu,Bn.max=ea,Bn.min=ua,Bn.noConflict=Si,Bn.noop=Ui,Bn.now=gf,Bn.pad=vi,Bn.padLeft=Gf,Bn.padRight=Jf,Bn.parseInt=_i,Bn.random=ai,Bn.reduce=hf,Bn.reduceRight=vf,Bn.repeat=gi,Bn.result=ri,Bn.round=ia,Bn.runInContext=x,Bn.size=iu,Bn.snakeCase=Xf,Bn.some=ou,Bn.sortedIndex=Jo,Bn.sortedLastIndex=Xo,Bn.startCase=Zf,Bn.startsWith=yi,Bn.sum=Bi,Bn.template=di,Bn.trim=wi,Bn.trimLeft=mi,Bn.trimRight=xi,Bn.trunc=bi,Bn.unescape=Ai,Bn.uniqueId=Ti,Bn.words=ji,Bn.all=Xe,Bn.any=ou,Bn.contains=Qe,Bn.eq=Cu,Bn.detect=uf,Bn.foldl=hf,Bn.foldr=vf,Bn.head=xe,Bn.include=Qe,Bn.inject=hf,Ci(Bn,function(){var n={};return Ut(Bn,function(t,r){Bn.prototype[r]||(n[r]=t)}),n}(),!1),Bn.sample=eu,Bn.prototype.sample=function(n){return this.__chain__||null!=n?this.thru(function(t){return eu(t,n)}):eu(this.value())},Bn.VERSION=A,ut(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){Bn[n].placeholder=Bn}),ut(["drop","take"],function(n,t){Mn.prototype[n]=function(r){var e=this.__filtered__;if(e&&!t)return new Mn(this);r=null==r?1:bo(yo(r)||0,0);var u=this.clone();return e?u.__takeCount__=Ao(u.__takeCount__,r):u.__views__.push({size:r,type:n+(u.__dir__<0?"Right":"")}),u},Mn.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),ut(["filter","map","takeWhile"],function(n,t){var r=t+1,e=r!=B;Mn.prototype[n]=function(n,t){var u=this.clone();return u.__iteratees__.push({iteratee:Dr(n,t,1),type:r}),u.__filtered__=u.__filtered__||e,u}}),ut(["first","last"],function(n,t){var r="take"+(t?"Right":"");Mn.prototype[n]=function(){return this[r](1).value()[0]}}),ut(["initial","rest"],function(n,t){var r="drop"+(t?"":"Right");Mn.prototype[n]=function(){return this.__filtered__?new Mn(this):this[r](1)}}),ut(["pluck","where"],function(n,t){var r=t?"filter":"map",e=t?zt:Wi;Mn.prototype[n]=function(n){return this[r](e(n))}}),Mn.prototype.compact=function(){return this.filter(Ri)},Mn.prototype.reject=function(n,t){return n=Dr(n,t,1),this.filter(function(t){return!n(t)})},Mn.prototype.slice=function(n,t){n=null==n?0:+n||0;var r=this;return r.__filtered__&&(n>0||t<0)?new Mn(r):(n<0?r=r.takeRight(-n):n&&(r=r.drop(n)),t!==b&&(t=+t||0,r=t<0?r.dropRight(-t):r.take(t-n)),r)},Mn.prototype.takeRightWhile=function(n,t){return this.reverse().takeWhile(n,t).reverse()},Mn.prototype.toArray=function(){return this.take(Oo)},Ut(Mn.prototype,function(n,t){var r=/^(?:filter|map|reject)|While$/.test(t),e=/^(?:first|last)$/.test(t),u=Bn[e?"take"+("last"==t?"Right":""):t];u&&(Bn.prototype[t]=function(){var t=e?[1]:arguments,i=this.__chain__,o=this.__wrapped__,f=!!this.__actions__.length,a=o instanceof Mn,c=t[0],l=a||Cf(o);l&&r&&"function"==typeof c&&1!=c.length&&(a=l=!1);var s=function(n){return e&&i?u(n,1)[0]:u.apply(b,lt([n],t))},p={func:qe,args:[s],thisArg:b},h=a&&!f;if(e&&!i)return h?(o=o.clone(),o.__actions__.push(p),n.call(o)):u.call(b,this.value())[0];if(!e&&l){o=h?o:new Mn(this);var v=n.apply(o,t);return v.__actions__.push(p),new Dn(v,i)}return this.thru(s)})}),ut(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(n){var t=(/^(?:replace|split)$/.test(n)?Hi:Xi)[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:join|pop|replace|shift)$/.test(n);Bn.prototype[n]=function(){var n=arguments;return e&&!this.__chain__?t.apply(this.value(),n):this[r](function(r){return t.apply(r,n)})}}),Ut(Mn.prototype,function(n,t){var r=Bn[t];if(r){var e=r.name;($o[e]||($o[e]=[])).push({name:t,func:r})}}),$o[Ur(b,k).name]=[{name:"wrapper",func:b}],Mn.prototype.clone=qn,Mn.prototype.reverse=Pn,Mn.prototype.value=Kn,Bn.prototype.chain=Pe,Bn.prototype.commit=Ke,Bn.prototype.concat=tf,Bn.prototype.plant=Ve,Bn.prototype.reverse=Ye,Bn.prototype.toString=Ge,Bn.prototype.run=Bn.prototype.toJSON=Bn.prototype.valueOf=Bn.prototype.value=Je,Bn.prototype.collect=Bn.prototype.map,Bn.prototype.head=Bn.prototype.first,Bn.prototype.select=Bn.prototype.filter,Bn.prototype.tail=Bn.prototype.rest,Bn}var b,A="3.10.1",j=1,k=2,I=4,R=8,O=16,E=32,C=64,S=128,U=256,W=30,$="...",F=150,N=16,T=200,L=1,B=2,z="Expected a function",D="__lodash_placeholder__",M="[object Arguments]",q="[object Array]",P="[object Boolean]",K="[object Date]",V="[object Error]",Y="[object Function]",G="[object Number]",J="[object Object]",X="[object RegExp]",Z="[object String]",H="[object ArrayBuffer]",Q="[object Float32Array]",nn="[object Float64Array]",tn="[object Int8Array]",rn="[object Int16Array]",en="[object Int32Array]",un="[object Uint8Array]",on="[object Uint8ClampedArray]",fn="[object Uint16Array]",an="[object Uint32Array]",cn=/\b__p \+= '';/g,ln=/\b(__p \+=) '' \+/g,sn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pn=/&(?:amp|lt|gt|quot|#39|#96);/g,hn=/[&<>"'`]/g,vn=RegExp(pn.source),_n=RegExp(hn.source),gn=/<%-([\s\S]+?)%>/g,yn=/<%([\s\S]+?)%>/g,dn=/<%=([\s\S]+?)%>/g,wn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,mn=/^\w*$/,xn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,bn=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,An=RegExp(bn.source),jn=/[\u0300-\u036f\ufe20-\ufe23]/g,kn=/\\(\\)?/g,In=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Rn=/\w*$/,On=/^0[xX]/,En=/^\[object .+?Constructor\]$/,Cn=/^\d+$/,Sn=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Un=/($^)/,Wn=/['\n\r\u2028\u2029\\]/g,$n=function(){var n="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(n+"+(?="+n+t+")|"+n+"?"+t+"|"+n+"+|[0-9]+","g")}(),Fn=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Nn=-1,Tn={};Tn[Q]=Tn[nn]=Tn[tn]=Tn[rn]=Tn[en]=Tn[un]=Tn[on]=Tn[fn]=Tn[an]=!0,Tn[M]=Tn[q]=Tn[H]=Tn[P]=Tn[K]=Tn[V]=Tn[Y]=Tn["[object Map]"]=Tn[G]=Tn[J]=Tn[X]=Tn["[object Set]"]=Tn[Z]=Tn["[object WeakMap]"]=!1;var Ln={};Ln[M]=Ln[q]=Ln[H]=Ln[P]=Ln[K]=Ln[Q]=Ln[nn]=Ln[tn]=Ln[rn]=Ln[en]=Ln[G]=Ln[J]=Ln[X]=Ln[Z]=Ln[un]=Ln[on]=Ln[fn]=Ln[an]=!0,Ln[V]=Ln[Y]=Ln["[object Map]"]=Ln["[object Set]"]=Ln["[object WeakMap]"]=!1;var Bn={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},zn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Dn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Mn={function:!0,object:!0},qn={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Pn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Kn=Mn[typeof exports]&&exports&&!exports.nodeType&&exports,Vn=Mn[typeof module]&&module&&!module.nodeType&&module,Yn=Kn&&Vn&&"object"==typeof global&&global&&global.Object&&global,Gn=Mn[typeof self]&&self&&self.Object&&self,Jn=Mn[typeof window]&&window&&window.Object&&window,Xn=Vn&&Vn.exports===Kn&&Kn,Zn=Yn||Jn!==(this&&this.window)&&Jn||Gn||this,Hn=x();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Zn._=Hn,define(function(){return Hn})):Kn&&Vn?Xn?(Vn.exports=Hn)._=Hn:Kn._=Hn:Zn._=Hn}).call(this);
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],49:[function(require,module,exports){
var m=function e(t,n){function r(e){j=e.document,A=e.location,R=e.cancelAnimationFrame||e.clearTimeout,S=e.requestAnimationFrame||e.setTimeout}function o(){var e,t=[].slice.call(arguments),n=!(null==t[1]||I.call(t[1])!==M||"tag"in t[1]||"subtree"in t[1]),r=n?t[1]:{},o="class"in r?"class":"className",a={tag:"div",attrs:{}},i=[];if(I.call(t[0])!=B)throw new Error("selector in m(selector, attrs, children) should be a string");for(;e=U.exec(t[0]);)if(""===e[1]&&e[2])a.tag=e[2];else if("#"===e[1])a.attrs.id=e[2];else if("."===e[1])i.push(e[2]);else if("["===e[3][0]){var l=q.exec(e[3]);a.attrs[l[1]]=l[3]||!l[2]||""}i.length>0&&(a.attrs[o]=i.join(" "));var s=n?t.slice(2):t.slice(1);1===s.length&&I.call(s[0])===L?a.children=s[0]:a.children=s;for(var c in r)if(c===o){var u=a.attrs[c];a.attrs[c]=(u&&r[c]?u+" ":u||"")+r[c]}else a.attrs[c]=r[c];return a}function a(e,t,r,c,d,f,h,p,g,m,v){try{null!=d&&null!=d.toString()||(d="")}catch(e){d=""}if("retain"===d.subtree)return f;var y=I.call(f),w=I.call(d);if(null==f||y!==w){if(null!=f)if(r&&r.nodes){var x=p-c,C=x+(w===L?d:f.nodes).length;s(r.nodes.slice(x,C),r.slice(x,C))}else f.nodes&&s(f.nodes,f);f=new d.constructor,f.tag&&(f={}),f.nodes=[]}if(w===L){for(var E=0,b=d.length;E<b;E++)I.call(d[E])===L&&(d=d.concat.apply([],d),E--,b=d.length);for(var N=[],k=f.length===d.length,T=0,O={},A=!1,E=0;E<f.length;E++)f[E]&&f[E].attrs&&null!=f[E].attrs.key&&(A=!0,O[f[E].attrs.key]={action:1,index:E});for(var S=0,E=0,b=d.length;E<b;E++)if(d[E]&&d[E].attrs&&null!=d[E].attrs.key){for(var R=0,b=d.length;R<b;R++)d[R]&&d[R].attrs&&null==d[R].attrs.key&&(d[R].attrs.key="__mithril__"+S++);break}if(A){var U=!1;if(d.length!=f.length)U=!0;else for(var q,H,E=0;q=f[E],H=d[E];E++)if(q.attrs&&H.attrs&&q.attrs.key!=H.attrs.key){U=!0;break}if(U){for(var E=0,b=d.length;E<b;E++)if(d[E]&&d[E].attrs&&null!=d[E].attrs.key){var J=d[E].attrs.key;O[J]?O[J]={action:3,index:E,from:O[J].index,element:f.nodes[O[J].index]||j.createElement("div")}:O[J]={action:2,index:E}}var K=[];for(var _ in O)K.push(O[_]);var $=K.sort(i),F=new Array(f.length);F.nodes=f.nodes.slice();for(var G,E=0;G=$[E];E++){if(1===G.action&&(s(f[G.index].nodes,f[G.index]),F.splice(G.index,1)),2===G.action){var P=j.createElement("div");P.key=d[G.index].attrs.key,e.insertBefore(P,e.childNodes[G.index]||null),F.splice(G.index,0,{attrs:{key:d[G.index].attrs.key},nodes:[P]}),F.nodes[G.index]=P}3===G.action&&(e.childNodes[G.index]!==G.element&&null!==G.element&&e.insertBefore(G.element,e.childNodes[G.index]||null),F[G.index]=f[G.from],F.nodes[G.index]=G.element)}f=F}}for(var E=0,V=0,b=d.length;E<b;E++){var Q=a(e,t,f,p,d[E],f[V],h,p+T||T,g,m,v);Q!==n&&(Q.nodes.intact||(k=!1),Q.$trusted?T+=(Q.match(/<[^\/]|\>\s*[^<]/g)||[0]).length:T+=I.call(Q)===L?Q.length:1,f[V++]=Q)}if(!k){for(var E=0,b=d.length;E<b;E++)null!=f[E]&&N.push.apply(N,f[E].nodes);for(var Y,E=0;Y=f.nodes[E];E++)null!=Y.parentNode&&N.indexOf(Y)<0&&s([Y],[f[E]]);d.length<f.length&&(f.length=d.length),f.nodes=N}}else if(null!=d&&w===M){d.attrs||(d.attrs={}),f.attrs||(f.attrs={});var W=Object.keys(d.attrs),X=W.length>("key"in d.attrs?1:0);if((d.tag!=f.tag||W.join()!=Object.keys(f.attrs).join()||d.attrs.id!=f.attrs.id||"all"==o.redraw.strategy()&&f.configContext&&!0!==f.configContext.retain||"diff"==o.redraw.strategy()&&f.configContext&&!1===f.configContext.retain)&&(f.nodes.length&&s(f.nodes),f.configContext&&typeof f.configContext.onunload===D&&f.configContext.onunload()),I.call(d.tag)!=B)return;var Y,Z=0===f.nodes.length;if(d.attrs.xmlns?m=d.attrs.xmlns:"svg"===d.tag?m="http://www.w3.org/2000/svg":"math"===d.tag&&(m="http://www.w3.org/1998/Math/MathML"),Z?(Y=d.attrs.is?m===n?j.createElement(d.tag,d.attrs.is):j.createElementNS(m,d.tag,d.attrs.is):m===n?j.createElement(d.tag):j.createElementNS(m,d.tag),f={tag:d.tag,attrs:X?l(Y,d.tag,d.attrs,{},m):d.attrs,children:null!=d.children&&d.children.length>0?a(Y,d.tag,n,n,d.children,f.children,!0,0,d.attrs.contenteditable?Y:g,m,v):d.children,nodes:[Y]},f.children&&!f.children.nodes&&(f.children.nodes=[]),"select"===d.tag&&d.attrs.value&&l(Y,d.tag,{value:d.attrs.value},{},m),e.insertBefore(Y,e.childNodes[p]||null)):(Y=f.nodes[0],X&&l(Y,d.tag,d.attrs,f.attrs,m),f.children=a(Y,d.tag,n,n,d.children,f.children,!1,0,d.attrs.contenteditable?Y:g,m,v),f.nodes.intact=!0,!0===h&&null!=Y&&e.insertBefore(Y,e.childNodes[p]||null)),typeof d.attrs.config===D){var ee=f.configContext=f.configContext||{retain:"diff"==o.redraw.strategy()||n};v.push(function(e,t){return function(){return e.attrs.config.apply(e,t)}}(d,[Y,!Z,ee,f]))}}else if(typeof d!=D){var N;0===f.nodes.length?(d.$trusted?N=u(e,p,d):(N=[j.createTextNode(d)],e.nodeName.match(z)||e.insertBefore(N[0],e.childNodes[p]||null)),f="string number boolean".indexOf(typeof d)>-1?new d.constructor(d):d,f.nodes=N):f.valueOf()!==d.valueOf()||!0===h?(N=f.nodes,g&&g===j.activeElement||(d.$trusted?(s(N,f),N=u(e,p,d)):"textarea"===t?e.value=d:g?g.innerHTML=d:((1===N[0].nodeType||N.length>1)&&(s(f.nodes,f),N=[j.createTextNode(d)]),e.insertBefore(N[0],e.childNodes[p]||null),N[0].nodeValue=d)),f=new d.constructor(d),f.nodes=N):f.nodes.intact=!0}return f}function i(e,t){return e.action-t.action||e.index-t.index}function l(e,t,n,r,o){for(var a in n){var i=n[a],l=r[a];if(a in r&&l===i)"value"===a&&"input"===t&&e.value!=i&&(e.value=i);else{r[a]=i;try{if("config"===a||"key"==a)continue;if(typeof i===D&&0===a.indexOf("on"))e[a]=d(i,e);else if("style"===a&&null!=i&&I.call(i)===M){for(var s in i)null!=l&&l[s]===i[s]||(e.style[s]=i[s]);for(var s in l)s in i||(e.style[s]="")}else null!=o?"href"===a?e.setAttributeNS("http://www.w3.org/1999/xlink","href",i):"className"===a?e.setAttribute("class",i):e.setAttribute(a,i):a in e&&"list"!==a&&"style"!==a&&"form"!==a&&"type"!==a&&"width"!==a&&"height"!==a?"input"===t&&e[a]===i||(e[a]=i):e.setAttribute(a,i)}catch(e){if(e.message.indexOf("Invalid argument")<0)throw e}}}return r}function s(e,t){for(var n=e.length-1;n>-1;n--)if(e[n]&&e[n].parentNode){try{e[n].parentNode.removeChild(e[n])}catch(e){}t=[].concat(t),t[n]&&c(t[n])}0!=e.length&&(e.length=0)}function c(e){if(e.configContext&&typeof e.configContext.onunload===D&&(e.configContext.onunload(),e.configContext.onunload=null),e.children)if(I.call(e.children)===L)for(var t,n=0;t=e.children[n];n++)c(t);else e.children.tag&&c(e.children)}function u(e,t,n){var r=e.childNodes[t];if(r){var o=1!=r.nodeType,a=j.createElement("span");o?(e.insertBefore(a,r||null),a.insertAdjacentHTML("beforebegin",n),e.removeChild(a)):r.insertAdjacentHTML("beforebegin",n)}else e.insertAdjacentHTML("beforeend",n);for(var i=[];e.childNodes[t]!==r;)i.push(e.childNodes[t]),t++;return i}function d(e,t){return function(n){n=n||event,o.redraw.strategy("diff"),o.startComputation();try{return e.call(t,n)}finally{Z()}}}function f(e){var t=K.indexOf(e);return t<0?K.push(e)-1:t}function h(e){var t=function(){return arguments.length&&(e=arguments[0]),e};return t.toJSON=function(){return e},t}function p(){for(var e,t=0;e=F[t];t++)P[t]&&o.render(e,G[t].view?G[t].view(P[t]):W());Y&&(Y(),Y=null),V=null,Q=new Date,o.redraw.strategy("diff")}function g(e){return e.slice(ne[o.route.mode].length)}function m(e,t,n){ee={};var r=n.indexOf("?");-1!==r&&(ee=x(n.substr(r+1,n.length)),n=n.substr(0,r));var a=Object.keys(t),i=a.indexOf(n);if(-1!==i)return o.module(e,t[a[i]]),!0;for(var l in t){if(l===n)return o.module(e,t[l]),!0;var s=new RegExp("^"+l.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(s.test(n))return n.replace(s,function(){for(var n=l.match(/:[^\/]+/g)||[],r=[].slice.call(arguments,1,-2),a=0,i=n.length;a<i;a++)ee[n[a].replace(/:|\./g,"")]=decodeURIComponent(r[a]);o.module(e,t[l])}),!0}}function v(e){if(e=e||event,!e.ctrlKey&&!e.metaKey&&2!==e.which){e.preventDefault?e.preventDefault():e.returnValue=!1;for(var t=e.currentTarget||e.srcElement,n="pathname"===o.route.mode&&t.search?x(t.search.slice(1)):{};t&&"A"!=t.nodeName.toUpperCase();)t=t.parentNode;o.route(t[o.route.mode].slice(ne[o.route.mode].length),n)}}function y(){"hash"!=o.route.mode&&A.hash?A.hash=A.hash:t.scrollTo(0,0)}function w(e,t){var r={},o=[];for(var a in e){var i=t?t+"["+a+"]":a,l=e[a],s=I.call(l),c=null===l?encodeURIComponent(i):s===M?w(l,i):s===L?l.reduce(function(e,t){return r[i]||(r[i]={}),r[i][t]?e:(r[i][t]=!0,e.concat(encodeURIComponent(i)+"="+encodeURIComponent(t)))},[]).join("&"):encodeURIComponent(i)+"="+encodeURIComponent(l);l!==n&&o.push(c)}return o.join("&")}function x(e){for(var t=e.split("&"),n={},r=0,o=t.length;r<o;r++){var a=t[r].split("="),i=decodeURIComponent(a[0]),l=2==a.length?decodeURIComponent(a[1]):null;null!=n[i]?(I.call(n[i])!==L&&(n[i]=[n[i]]),n[i].push(l)):n[i]=l}return n}function C(e){var t=f(e);s(e.childNodes,_[t]),_[t]=n}function E(e,t){var n=o.prop(t);return e.then(n),n.then=function(n,r){return E(e.then(n,r),t)},n}function b(e,t){function n(e){d=e||c,h.map(function(e){d===s&&e.resolve(f)||e.reject(f)})}function r(e,t,n,r){if((null!=f&&I.call(f)===M||typeof f===D)&&typeof e===D)try{var a=0;e.call(f,function(e){a++||(f=e,t())},function(e){a++||(f=e,n())})}catch(e){o.deferred.onerror(e),f=e,n()}else r()}function a(){var c;try{c=f&&f.then}catch(e){return o.deferred.onerror(e),f=e,d=l,a()}r(c,function(){d=i,a()},function(){d=l,a()},function(){try{d===i&&typeof e===D?f=e(f):d===l&&"function"==typeof t&&(f=t(f),d=i)}catch(e){return o.deferred.onerror(e),f=e,n()}f===u?(f=TypeError(),n()):r(c,function(){n(s)},n,function(){n(d===i&&s)})})}var i=1,l=2,s=3,c=4,u=this,d=0,f=0,h=[];u.promise={},u.resolve=function(e){return d||(f=e,d=i,a()),this},u.reject=function(e){return d||(f=e,d=l,a()),this},u.promise.then=function(e,t){var n=new b(e,t);return d===s?n.resolve(f):d===c?n.reject(f):h.push(n),n.promise}}function N(e){return e}function k(e){if(!e.dataType||"jsonp"!==e.dataType.toLowerCase()){var r=new t.XMLHttpRequest;if(r.open(e.method,e.url,!0,e.user,e.password),r.onreadystatechange=function(){4===r.readyState&&(r.status>=200&&r.status<300?e.onload({type:"load",target:r}):e.onerror({type:"error",target:r}))},e.serialize===JSON.stringify&&e.data&&"GET"!==e.method&&r.setRequestHeader("Content-Type","application/json; charset=utf-8"),e.deserialize===JSON.parse&&r.setRequestHeader("Accept","application/json, text/*"),typeof e.config===D){var o=e.config(r,e);null!=o&&(r=o)}var a="GET"!==e.method&&e.data?e.data:"";if(a&&I.call(a)!=B&&a.constructor!=t.FormData)throw"Request data should be either be a string or FormData. Check the `serialize` option in `m.request`";return r.send(a),r}var i="mithril_callback_"+(new Date).getTime()+"_"+Math.round(1e16*Math.random()).toString(36),l=j.createElement("script");t[i]=function(r){l.parentNode.removeChild(l),e.onload({type:"load",target:{responseText:r}}),t[i]=n},l.onerror=function(r){return l.parentNode.removeChild(l),e.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}}),t[i]=n,!1},l.onload=function(e){return!1},l.src=e.url+(e.url.indexOf("?")>0?"&":"?")+(e.callbackKey?e.callbackKey:"callback")+"="+i+"&"+w(e.data||{}),j.body.appendChild(l)}function T(e,t,n){if("GET"===e.method&&"jsonp"!=e.dataType){var r=e.url.indexOf("?")<0?"?":"&",o=w(t);e.url=e.url+(o?r+o:"")}else e.data=n(t);return e}function O(e,t){var n=e.match(/:[a-z]\w+/gi);if(n&&t)for(var r=0;r<n.length;r++){var o=n[r].slice(1);e=e.replace(n[r],t[o]),delete t[o]}return e}var j,A,S,R,M="[object Object]",L="[object Array]",B="[object String]",D="function",I={}.toString,U=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g,q=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/,z=/^(AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR)$/;r(t);var H,J={appendChild:function(e){H===n&&(H=j.createElement("html")),j.documentElement&&j.documentElement!==e?j.replaceChild(e,j.documentElement):j.appendChild(e),this.childNodes=j.childNodes},insertBefore:function(e){this.appendChild(e)},childNodes:[]},K=[],_={};o.render=function(e,t,r){var o=[];if(!e)throw new Error("Please ensure the DOM element exists before rendering a template into it.");var i=f(e),l=e===j,c=l||e===j.documentElement?J:e;l&&"html"!=t.tag&&(t={tag:"html",attrs:{},children:t}),_[i]===n&&s(c.childNodes),!0===r&&C(e),_[i]=a(c,null,n,n,t,_[i],!1,0,null,n,o);for(var u=0,d=o.length;u<d;u++)o[u]()},o.trust=function(e){return e=new String(e),e.$trusted=!0,e},o.prop=function(e){return(null!=e&&I.call(e)===M||typeof e===D)&&typeof e.then===D?E(e):h(e)};var $,F=[],G=[],P=[],V=null,Q=0,Y=null;o.module=function(e,t){if(!e)throw new Error("Please ensure the DOM element exists before rendering a template into it.");var n=F.indexOf(e);n<0&&(n=F.length);var r=!1;if(P[n]&&typeof P[n].onunload===D){var a={preventDefault:function(){r=!0}};P[n].onunload(a)}if(!r){o.redraw.strategy("all"),o.startComputation(),F[n]=e;var i=$=t=t||{},l=new(t.controller||function(){});return i===$&&(P[n]=l,G[n]=t),Z(),P[n]}},o.redraw=function(e){V&&!0!==e?(new Date-Q>16||S===t.requestAnimationFrame)&&(V>0&&R(V),V=S(p,16)):(p(),V=S(function(){V=null},16))},o.redraw.strategy=o.prop();var W=function(){return""},X=0;o.startComputation=function(){X++},o.endComputation=function(){0===(X=Math.max(X-1,0))&&o.redraw()};var Z=function(){"none"==o.redraw.strategy()?(X--,o.redraw.strategy("diff")):o.endComputation()};o.withAttr=function(e,t){return function(n){n=n||event;var r=n.currentTarget||this;t(e in r?r[e]:r.getAttribute(e))}};var ee,te,ne={pathname:"",hash:"#",search:"?"},re=function(){};return o.route=function(){if(0===arguments.length)return te;if(3===arguments.length&&I.call(arguments[1])===B){var e=arguments[0],n=arguments[1],r=arguments[2];re=function(t){var a=te=g(t);m(e,r,a)||o.route(n,!0)};var a="hash"===o.route.mode?"onhashchange":"onpopstate";t[a]=function(){var e=A[o.route.mode];"pathname"===o.route.mode&&(e+=A.search),te!=g(e)&&re(e)},Y=y,t[a]()}else if(arguments[0].addEventListener||arguments[0].attachEvent){var i=arguments[0];arguments[1],arguments[2];i.href=("pathname"!==o.route.mode?A.pathname:"")+ne[o.route.mode]+this.attrs.href,i.addEventListener?(i.removeEventListener("click",v),i.addEventListener("click",v)):(i.detachEvent("onclick",v),i.attachEvent("onclick",v))}else if(I.call(arguments[0])===B){var l=te;te=arguments[0];var s=arguments[1]||{},c=te.indexOf("?"),u=c>-1?x(te.slice(c+1)):{};for(var d in s)u[d]=s[d];var f=w(u),h=c>-1?te.slice(0,c):te;f&&(te=h+(-1===h.indexOf("?")?"?":"&")+f);var p=!0===(3===arguments.length?arguments[2]:arguments[1])||l===arguments[0];t.history.pushState?(Y=function(){t.history[p?"replaceState":"pushState"](null,j.title,ne[o.route.mode]+te),y()},re(ne[o.route.mode]+te)):(A[o.route.mode]=te,re(ne[o.route.mode]+te))}},o.route.param=function(e){if(!ee)throw new Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");return ee[e]},o.route.mode="search",o.route.buildQueryString=w,o.route.parseQueryString=x,o.deferred=function(){var e=new b;return e.promise=E(e.promise),e},o.deferred.onerror=function(e){if("[object Error]"===I.call(e)&&!e.constructor.toString().match(/ Error/))throw e},o.sync=function(e){function t(e,t){return function(o){return i[e]=o,t||(n="reject"),0==--a&&(r.promise(i),r[n](i)),o}}var n="resolve",r=o.deferred(),a=e.length,i=new Array(a);if(e.length>0)for(var l=0;l<e.length;l++)e[l].then(t(l,!0),t(l,!1));else r.resolve([]);return r.promise},o.request=function(e){!0!==e.background&&o.startComputation();var t=new b,n=e.dataType&&"jsonp"===e.dataType.toLowerCase(),r=e.serialize=n?N:e.serialize||JSON.stringify,a=e.deserialize=n?N:e.deserialize||JSON.parse,i=e.extract||function(e){return 0===e.responseText.length&&a===JSON.parse?null:e.responseText};return e.url=O(e.url,e.data),e=T(e,e.data,r),e.onload=e.onerror=function(n){try{n=n||event;var r=("load"===n.type?e.unwrapSuccess:e.unwrapError)||N,l=r(a(i(n.target,e)),n.target);if("load"===n.type)if(I.call(l)===L&&e.type)for(var s=0;s<l.length;s++)l[s]=new e.type(l[s]);else e.type&&(l=new e.type(l));t["load"===n.type?"resolve":"reject"](l)}catch(n){o.deferred.onerror(n),t.reject(n)}!0!==e.background&&o.endComputation()},k(e),t.promise=E(t.promise,e.initialValue),t.promise},o.deps=function(e){return r(t=e||t),t},o.deps.factory=e,o}("undefined"!=typeof window?window:{});"undefined"!=typeof module&&null!==module&&module.exports?module.exports=m:"function"==typeof define&&define.amd&&define(function(){return m});
},{}],50:[function(require,module,exports){
module.exports={"ACTIONS":{"ACTIONS":"Actions","CANCEL":"Cancel","HELP":"Help","SAVE":"Save"},"ADMIN":{"ERR":{"LANGUAGE_DEFAULT":"A default language must be selected","PASSWORD_MAX":"Maximum password size is mandatory","PASSWORD_MIN":"Minimum password size is mandatory","PASSWORD_SIZE":"Min size can't be higher than max size. Please check your numbers.","ROOTURL":"Must be a valid URL","SMTP_EMAILFROM":"Must be a valid email","TITLE":"Title is mandatory"},"ETHERPAD_ACCOUNT":"Etherpad account","FIELD":{"ALLOW_ETHERPADS":"Anonymous pads","APPLY":"Apply","CHECKMAILS":"Check user mails","HIDE_HELP_BLOCKS":"Hide help blocks","HTMLEXTRA_HEAD":"Extra HTML for <head>","LANGUAGE_DEFAULT":"Default language","OPEN_REGISTRATION":"Open registration","PASSWORD_MAX":"Maximum size","PASSWORD_MIN":"Minimum size","ROOTURL":"Root Web URL","SEARCH":"Search","SMTP_EMAILFROM":"Email to send from","SMTP_HOST":"SMTP Host","SMTP_PASS":"Password","SMTP_PORT":"SMTP Port","SMTP_SSL":"Encryption via SSL","SMTP_TLS":"Encryption via TLS","SMTP_USER":"User","TITLE":"Title","TOKEN_DURATION":"Token validity","USE_FIRST_AND_LAST_NAME_IN_PADS":"Use first and last name of users as nickname in pads"},"FORM_LOGIN":"Administration login","FORM_SETTINGS":"MyPads configuration","FORM_USERS_SEARCH":"Search user","FORM_USER_EDIT":"Profile user edition","HELP_LOGIN":"<p>MyPads administration is tied to Etherpad administration. Please enter an authorized login and password, as fixed into Etherpad <em>settings.json</em> to be able to update MyPads settings.</p>","HELP_SETTINGS":"<h3>Settings</h3><p>Only Etherpad admins have access this page. You can edit the global settings here and apply them. Changes will be effective directly.</p><h3>Passwords</h3><p>Be careful about password sizes : if you have existing accounts and raise minimum size or decrease maximum size, some user passwords may become unseizable.</p><h3>Mail configuration</h3><p>MyPads can verify the mails of subscribed users by sending them an email which will be used by them to confirm their address. Moreover, MyPads need email sending for password recovery.</p><p>Be cautious with SMTP configuration: bad parameters can lead to an Etherpad crash.</p><p>Please note that, unlike other parameters, SMTP settings are only applied after Etherpad reboot.</p>","HELP_USERS":"<p>This admin reserved page helps you to find users by entering their login. Once found, you will be able to edit or remove user.</p><p>For simplicity and performance reasons, we don't offer here a full listing of subscribed users.</p>","HELP_USER_EDIT":"<p>Here you can update all data associated to an existing user.</p><p>Please note that by default, leaving password empty means keeping the current password. If you want to change it, you have to fill password field and its confirmation.</p>","INFO":{"ALLOW_ETHERPADS":"Allow classic anonymous pads from on the Etherpad instance, created from the root URL of the server","CHECKMAILS":"Check user mail given at subscription","HIDE_HELP_BLOCKS":"Help blocks shows in multiple MyPads pages, you can hide them with this setting","HTMLEXTRA_HEAD":"Custom HTML Code appended to tag <head>","LANGUAGE_DEFAULT":"Default language for guest MyPads users","LOGIN":"The etherpad settings.json fixed admin login","NOCHANGE":"Configuration have not changed, so no update has been sent","OPEN_REGISTRATION":"Allow anyone to create an account (no effect if the LDAP authentication is set)","PASSWORD_MAX":"Password maximum number of characters","PASSWORD_MIN":"Password minimum number of characters","ROOTURL":"The root Web address used to access to Etherpad","SMTP_EMAILFROM":"Email address to use to send emails from MyPads","SMTP_HOST":"Domain name where the SMTP Server belongs to","SMTP_PASS":"Optional: if authentication to the SMTP server is required, password","SMTP_PORT":"SMTP Port to use","SMTP_SSL":"Check it if you want to use an encrypted SSL connexion between MyPads and your SMTP Server","SMTP_TLS":"Check it if you want to use an encrypted TLS connexion between MyPads and your SMTP Server","SMTP_USER":"Optional: if authentication to the SMTP server is required, username","SUCCESS":"Configuration has been updated successfully","TITLE":"Global title displayed on your MyPads instance","TOKEN_DURATION":"The time, in minutes, generated tokens are valid until users confirm their subscription","USERS_SEARCH_LOGIN":"Please enter a login to search around database users","USER_FOUND":"User found, please see options inside the form","USER_NONE":"No user for this login","USER_REMOVE_SURE":"You are on the verge of removing definitively this account and all the folders and pads on which the user is the unique administrator. If you are really sure about what you are doing, please click on the OK button.","USE_FIRST_AND_LAST_NAME_IN_PADS":"Force the use of first and last name as nickname in pads"},"SETTINGS_GENERAL":"General settings","SETTINGS_MAIL":"Mail settings","SETTINGS_PASSWORD":"Password settings","USERS_SEARCH_LOGIN":"Search by login"},"BACKEND":{"ERROR":{"AUTHENTICATION":{"ACTIVATION_NEEDED":"Your account has not been confirmed","ADMIN":"Access denied : you must be an authenticated Etherpad instance admin.","DENIED":"Access denied","DENIED_RECORD":"You're not allowed to get this record","DENIED_RECORD_EDIT":"You're not allowed to edit this record","MUST_BE":"You must be authenticated","NOT_AUTH":"Not authenticated","NO_RECOVER":"Sorry, you can't recover you password from here","NO_REGISTRATION":"Sorry, registration is disabled","PASSWORD_INCORRECT":"Password is not correct","TOKEN_INCORRECT":"Your security token is invalid"},"CONFIGURATION":{"CANTGET":"Configuration loading has failed. Please contact your administrator.","KEY_NOT_FOUND":"The record has not been found","LANG_PROBLEM":"Language update cannot be done. The default language will be used.","MAIL_NOT_CONFIGURED":"Mail settings have not been done on this server. Please contact its administrator.","ROOTURL_NOT_CONFIGURED":"Root Url setting has not been entered on this server. Please contact its administrator."},"GROUP":{"CASCADE_REMOVAL_PROBLEM":"Something goes wrong with cascade pads removal","INEXISTENT":"Folder does not exist","ITEMS_NOT_FOUND":"Some users, admins or pads have not been found","NOT_USER":"You are not an user of this folder","RESIGN_UNIQUE_ADMIN":"You can't resign the unique administrator"},"PAD":{"INEXISTENT":"Pad does not exist","ITEMS_NOT_FOUND":"Pad folder or at least one of the users are not found"},"PERMISSION":{"UNAUTHORIZED":"You are not allowed to access to this record","UNEXPECTED":"Sorry, an unexpected has error has occurred"},"TOKEN":{"EXPIRED":"Token has expired. Please make a new request.","INCORRECT":"Used token contains incorrect data for this request."},"TYPE":{"CALLBACK_FN":"Callback must be a function","GID_STR":"gid must be a string","ID_STR":"_id, when defined, must be a string","INVITE_BOOL":"Invite must be a boolean","KEY_STR":"Key must be a string","LOGINS_ARR":"logins must be an array","LOGIN_REQUIRED":"Login is required","LOGIN_STR":"Login must be a string","MAIL":"Email is invalid","MSG_STR":"message must be a string","PARAMS_REQUIRED":"Parameters are mandatory","PARAM_STR":"Some parameter must be a string","PASSWORD_MISSING":"Missing password","PASSWORD_SIZE":"Password size is too short or too long","PASSWORD_STR":"Password must be a string","SMTP_CONFIG":"Your SMTP server configuration is invalid","STR_100":"String can't be more than 100 characters","SUBJECT_STR":"subject must be a string","TO_MAIL":"to must be an email address","TYPE_PADSORGROUPS":"Type must be either pads or folders","USERLIST_CRUD":"crud must be add, set or del","USERLIST_ID":"In set and del modes, ulistid is mandatory","USERLIST_NAME":"In add mode, name of the userlist is mandatory","USERLIST_SET_PARAMS":"In set mode, name or uids is madantory","USER_INVALID":"User is invalid","VALUE_REQUIRED":"Value is mandatory","WITHEXTRA_BOOL":"withExtra must be a boolean"},"USER":{"ALREADY_EXISTS":"User already exists, please choose another login","BOOKMARK_NOT_FOUND":"Bookmark not found","EMAIL_ALREADY_EXISTS":"This user email has already been used, please choose another one","NOT_FOUND":"User not found","USERLIST_NOT_FOUND":"Userlist not found"}}},"BOOKMARK":{"HELP":"<p>Bookmark page offers you the ability to see all your bookmarked elements from MyPads. You can remove them from bookmarks if you want to.</p>","TITLE":"My Bookmarks"},"GLOBAL":{"AND":"and","DESCRIPTION":"MyPads is an <a href='http://etherpad.org/'>Etherpad</a> plugin which have been founded in 2014 on Ulule by <a href='http://ulule.com/etherpad-framapad/supporters/'>413 backers</a> and organized by the non-profit organization <a href='http://framasoft.org'>Framasoft</a>. It handles :<ul><li>users and their authentication; </li><li>folders of pads per user, unlimited, sharable;</li><li>attached pads, with choice between invite known users to use them, making them private with password or letting them public.</li></ul>","FOOTER":"Powered by <a href='https://git.framasoft.org/framasoft/ep_mypads'>MyPads</a><br>Published under Apache License 2.0","LANG":"English","NO":"no","OR":"or","YES":"yes"},"GROUP":{"ADD":"Add a new folder","ADD_HELP":"<h3>Visibility</h3><p>You have the choice between three levels of visibility. It will impact all linked pads:<ul><li><em>restricted</em>, default choice: access of the pads are limited to a list of invited users you have chosen;</li><li><em>private</em>: in this mode, you have to enter a password and access to the pads will be checked against this password;</li><li><em>public</em>: in this mode, all pads are public, users just need to have the URL address.</li></ul></p><h3>Readonly</h3><p>If you check <em>readonly</em>, all attached pads will stay in their state, and can not be edited. Note that visibility still works in readonly mode.</p><h3>Tags</h3><p>You can attach tags to this element by clicking on the corresponding input field and selecting them one by one.</p><p>To create a new tag, fill it and type ENTER key or click on the 'Ok' button. Once the tag has been added, it will automatically been selected on this form.</p><p>You can remove a tag by clicking on the cross located on the right of it.</p>","ADMIN_SHARE":{"AS":"Administration sharing","FAILURE":"You can't share administration with users who have no account in this instance : ","SUCCESS":"Administration sharing has been successfully achieved for "},"ARCHIVED":"Archived folders","BOOKMARK":"Bookmark","BOOKMARKED":"Bookmarked folders","EDIT":"Edit","EDIT_GROUP":"Edit a folder","ERR":{"NAME":"The name of the folder is required"},"FIELD":{"DESCRIPTION":"Description","GROUP_PARAMS":"Folder parameters ?","NAME":"Name","PRIVATE":"Private","PUBLIC":"Public","READONLY":"Readonly","RESTRICTED":"Restricted","VISIBILITY":"Visibility"},"FILTERS":{"ADMIN":"Folders I am admin","HELP":"You can select one or several filters, click again on it to deactivate","TITLE":"Filters","USER":"Folders I have been invited"},"GROUP":"Folder","GROUPS":"Folders","HELP":"Folders can contain pads. Here are your folders : those you have created, those you have been explicitly invited","INFO":{"ADD_SUCCESS":"Folder has been successfully created","CHAT_HISTORY_REMOVE_SUCCESS":"The chat history of the pad has been successfully removed","CHAT_HISTORY_REMOVE_SURE":"Are you sure you want to remove the chat history of this pad?","DESCRIPTION":"An optional long text to describe your folder","EDIT_SUCCESS":"Folder has been successfully updated","GROUP_PARAMS":"By default, pad inherits from parameters of the folder they belong to. You can overwrite them if you want","NAME":"Name","PAD_ADD_SUCCESS":"Pad has been successfully created","PAD_EDIT_SUCCESS":"Pad has been successfully updated","PAD_MOVE":"Select the wanted folder for your migration","PAD_MOVE_NOGROUP":"Sorry but no other folder is available. You should create one before.","PAD_MOVE_SUCCESS":"All pads have been successfully moved","PAD_REMOVE_SUCCESS":"Pad has been successfully removed","PAD_REMOVE_SURE":"Are you sure you want to remove this pad ?","PASSWORD":"Required in private mode","READONLY":"If checked, linked pads will be in readonly mode","REMOVE_SUCCESS":"Folder has been successfully removed","REMOVE_SURE":"Are you sure you want to remove this folder ?","RESIGN":"Are you sure you want to resign from this folder ?","RESIGN_SUCCESS":"You have left the folder successfully","VISIBILITY":"Required, restricted by default to invited users or admins"},"INVITE_USER":{"FAILURE":"You can't invite users who have no account in this instance : ","HELP":"<h4>Userlists</h4><p>You can select one or more userlists. Each click will add all members of the selected userlist to invited users.</p><h4>Invite users</h4><p>This field accepts one email or login at a time. When ENTER is typed, or OK is clicked, the filled data is added to the list of invited users. A list of known users helps you to fill the input.</p><h4>Users</h4><p>This list contains all selected users. You can remove one by clicking the sign after each item.</p><h4>Note</h4><p>Please note that, for instance, registered users will be automatically added to your folder. In short term, external users will receive a mail for creating an account.</p>","INPUT_HELP":"You can invite as many users as you want","IU":"Invite and manage users","PLACEHOLDER":"Email or login","SUCCESS":"User invitation has been successfully achieved for ","USERS_SELECTED":"Selected users","USERS_SELECTION":"Users selection"},"INVITE_USERLIST":"Invite a list of users","MARK_SUCCESS":"Marking successfully","MYGROUPS":"My Folders","NONE":"No folder","PAD":{"ADD":"Create a new pad","ADD_PROMPT":"Enter the name of the new pad","ADMINS":"Admins","EDIT":"Edit a pad","EDIT_PROMPT":"Enter the new name of the pad","EXPAND":"Expand","FROM_GROUP":"folder :","MOVE":"Move all pads to another folder","MOVE_HELP":"<p>Please select the wanted folder for your migration. Only folders on which you are admin are listed.</p><p>Once chosen, click on the submit button and wait for a moment.</p>","MOVE_TITLE":"Pads migration of the folder ","NONE":"No pad linked","OPEN_TAB":"Open in a new tab","PAD":"Pad","PADS":"Pads","PUBLIC_DENIED":"Public access: you are not allowed to see this data.","REDUCE":"Reduce","SORT_BY":"Sort pads by","SORT_BY_CREATION":"creation date","SORT_BY_NAME":"name","SORT_BY_UPDATE":"last update","TITLE":"Title","USERS":"Users","USERS_NONE":"No user","VIEW_HELP":"<p>Here is the main interface of the current pad.</p><p>If the folder or the pad is private, you need to enter the password to be able to access to it.</p><p>If you want to show the folder and if you have the permission to, you can click on the folder name.</p>","VISIBILITY":"Visibility"},"PROPERTIES":"Properties","QUIT_GROUP":"Unsubscribe from the folder","REMOVE":"Remove","REMOVE_CHAT_HISTORY":"Remove chat history","SEARCH":{"HELP":"Search on common fields with at least 2 characters","TITLE":"Search","TYPE":"Type here"},"SHARE":"Share","SHARE_ADMIN":"Share administration","SHARE_LINK":"Please share this URL to your guests","SHARE_PASSWORD":"Please enter the password to be able to share","SORT":{"HELP":"By default, folders are ordered by creation date, older first. You can choose to use another orders. Click again to reverse order.","TITLE":"Sort by"},"TAGS":{"HELP":"You can filter by one or more tags. Click again to deactivate if wanted","TITLE":"Tags"},"UNMARK":"Unmark","VIEW":"View","VIEW_HELP":"<p>The details of the folder show you :<ul><li>options defined when folder has been created or updated;</li><li>list of pads created for this folder;</li><li>and list of admins and users of the folder.</li></ul></p><p>From there, you can : <ul><li>create new pads, edit them, remove or mark them;</li><li>share administration of your folder with other users;</li><li>invite other users to view and edit pads of the folder.</li></ul></p>","VIEW_MANAGE":"View and manage folder and its pads"},"MENU":{"ADMIN":"Administration","BOOKMARK":"My Bookmarks","CONFIG":"Configuration","LOGOUT":"Logout","PAD":"My Folders & Pads","PROFILE":"My Profile","USERLIST":"My Userlists","USERS":"Users"},"NOTIFICATION":{"ERROR":"Error","ERROR_UNEXPECTED":"An unexpected error has been raised. Please contact the administrator.","INFO":"Info","SUCCESS":"Success","SUCCESS_GENERIC":"Action has been successfully achieved","WARNING":"Warning"},"TAG":{"HELP":"You can associate to this element as many tags as you wish","PLACEHOLDER":"Enter your tag","TAGS":"Tags"},"USER":{"AUTH":{"PROFILE_SUCCESS":"Profile successfully updated.","SUBSCRIBE_CONFIRM_SUCCESS":"Successful subscription. An email has been sent to you in order to confirm your email address before you can login.","SUBSCRIBE_SUCCESS":"Successful subscription ! Welcome.","SUCCESS":"Successful authentication ! Welcome.","SUCCESS_OUT":"You have been successfully disconnected.","WELCOME":"Welcome"},"COLOR":"Customized color for pads","COLOR_SAMPLE":"#00cc00","EMAIL":"Email","EMAIL_SAMPLE":"username@example.org","ERR":{"COLOR":"The hexadecimal code must be like #000000","EMAIL":"The email is required and should be valid","LOGIN":"Login is required","LOGOUT":"Log out error : you were not authenticated.","PASSWORD_MISMATCH":"The entered passwords do not match."},"FIRSTNAME":"Firstname","FORM":"Login","HELP":{"PROFILE":"<p>Every change into your profile needs the current password field to be correctly filled. Please note that :</p><ul><li>you can change everything by updating the appropriate field;</li><li>leaving password and password confirmation empty won't affect your current password;</li><li>you can't change your login at the moment but it will be possible in the future;</li><li>if you want to change your password, please enter the new one into the password field and confirm it with the password confirmation.</li></ul>"},"INFO":{"ACCOUNT_CONFIRMATION_SUCCESS":"Your account has been successfully confirmed. You can now login.","CHANGEPASS_SUCCESS":"Your password has been successfully updated.","COLOR":"The hexademical code for color you want to be used by default in pads","EMAIL":"The email is required for password recovery","LANG":"Your default browser configuration, depending on available languages on MyPads","LOGIN":"The unique login you choose when you have subscribed","OPTIONAL":"Optional field","PASSRECOVER_SUCCESS":"You should have received an email to the address you have used when you subscribe. This email contains a Web address that is temporary valid. Please follow this url to change your password.","PASSWORD_BEGIN":"Must be between ","PASSWORD_CHECK":"For verification : must be the same as password","PASSWORD_CURRENT":"Security check : required for all profile changes","PASSWORD_END":" characters","REMOVE_ACCOUNT":"Remove definitively your account and all the folders and pads on which you are the unique administrator","REMOVE_ACCOUNT_SUCCESS":"Account removed with success","REMOVE_ACCOUNT_SURE":"You are on the verge of removing definitively your account and all the folders and pads on which you are the unique administrator. If you are really sure about what you are doing, please enter your current password and click OK","USECOLORINPADS":"Use chosen color in pads by default?","USELOGINANDCOLORINPADS":"Use login and chosen color in pads by default?"},"LANG":"Language","LASTNAME":"Lastname","LOGIN":"Login","MANDATORY_FIELDS":"Mandatory fields","MYPADS_ACCOUNT":"MyPads account","OK":"Ok","OPTIONAL_FIELDS":"Optional fields","ORGANIZATION":"Organization","ORSUB":" (or subscribe)","PASSCHECK":"Password Confirmation","PASSCURRENT":"Current password","PASSRECOVER":"Password recovery","PASSWORD":"Password","PASSWORD_LOST":"Lost your password?","PLEASE_WAIT":"Please wait, the service is currently loading.","PROFILE":"Profile","REGISTER":"Register","REMOVE_ACCOUNT":"Remove my account","SUBSCRIBE":"Subscribe","UNDEF":"********","USECOLORINPADS":"Use color in pads?","USELOGINANDCOLORINPADS":"Use login and color in pads?","USERNAME":"Username"},"USERLIST":{"ADD":"Create a new userlist","EDIT":"Edit userlist ","ERR":{"NAME":"The name of the userlist is required"},"FIELD":{"NAME":"Name","USERS":"Users","USERSAREA_HELP":"You can add as many emails or logins you want","USERSAREA_PLACEHOLDER":"One email or login per line","USERS_HELP":"Add as many users as you want"},"FORM_HELP":"<h3>Name</h3><p>You must give a name to the userlist, in order to be able to identify it.</p><h3>Users</h3><p>You can add as many users as you want. To do it, please enter the email or login and click on the 'OK' button. Note that already known users can be selected from the input.</p><p>To remove users, click on the cross located at the right of each user.</p>","HELP":"<p>Here you can find all your userlists, ordered by creation date. Summary information are available with the name of each userlist and the number of users linked.</p><p>Through action icons, located on top right of each userlist, you can edit or remove lists. Details are available in the form view, via edit action.</p>","INFO":{"ADD_SUCCESS":"Userlist has been successfully created","EDIT_SUCCESS":"Userlist has been successfully updated","NAME":"Name of the userlist","REMOVE_SUCCESS":"Userlist has been successfully removed","REMOVE_SURE":"Are you sure you want to remove this userlist?","USER_FAILURE":"You can't add users who have no account in this instance : ","USER_INVITE":"By selecting a userlist, you will invite all its users at the same time","USER_SUCCESS":"User adding has been successfull for "},"USERLIST":"Userlist"}}
},{}]},{},[1])


//# sourceMappingURL=mypads.map.json